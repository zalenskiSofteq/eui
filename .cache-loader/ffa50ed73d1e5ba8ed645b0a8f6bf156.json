{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\markdown_editor\\plugins\\remark\\remark_prismjs.ts","dependencies":[{"path":"D:\\work\\eui\\src\\components\\markdown_editor\\plugins\\remark\\remark_prismjs.ts","mtime":1649070093705},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwppbXBvcnQgcmVmcmFjdG9yIGZyb20gJ3JlZnJhY3Rvcic7CmltcG9ydCB2aXNpdCBmcm9tICd1bmlzdC11dGlsLXZpc2l0JzsKCnZhciBhdHRhY2hlciA9IGZ1bmN0aW9uIGF0dGFjaGVyKCkgewogIHJldHVybiBmdW5jdGlvbiAoYXN0KSB7CiAgICByZXR1cm4gdmlzaXQoYXN0LCAnY29kZScsIHZpc2l0b3IpOwogIH07CgogIGZ1bmN0aW9uIHZpc2l0b3Iobm9kZSkgewogICAgdmFyIF9kYXRhJGhQcm9wZXJ0aWVzOwoKICAgIHZhciBfbm9kZSRkYXRhID0gbm9kZS5kYXRhLAogICAgICAgIGRhdGEgPSBfbm9kZSRkYXRhID09PSB2b2lkIDAgPyB7fSA6IF9ub2RlJGRhdGEsCiAgICAgICAgbGFuZ3VhZ2UgPSBub2RlLmxhbmc7CgogICAgaWYgKCFsYW5ndWFnZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgbm9kZS5kYXRhID0gZGF0YTsKICAgIGRhdGEuaENoaWxkcmVuID0gcmVmcmFjdG9yLmhpZ2hsaWdodChub2RlLnZhbHVlLCBsYW5ndWFnZSk7CiAgICBkYXRhLmhQcm9wZXJ0aWVzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXRhLmhQcm9wZXJ0aWVzKSwge30sIHsKICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlLAogICAgICBjbGFzc05hbWU6IFsncHJpc21qcyddLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoKChfZGF0YSRoUHJvcGVydGllcyA9IGRhdGEuaFByb3BlcnRpZXMpID09PSBudWxsIHx8IF9kYXRhJGhQcm9wZXJ0aWVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YSRoUHJvcGVydGllcy5jbGFzc05hbWUpIHx8IFtdKSwgWyJsYW5ndWFnZS0iLmNvbmNhdChsYW5ndWFnZSldKQogICAgfSk7CiAgfQp9OwoKZXhwb3J0IGRlZmF1bHQgYXR0YWNoZXI7"},{"version":3,"sources":["D:/work/eui/src/components/markdown_editor/plugins/remark/remark_prismjs.ts"],"names":["refractor","visit","attacher","ast","visitor","node","data","language","lang","hChildren","highlight","value","hProperties","className"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,SAAP,MAAsB,WAAtB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;;AAGA,IAAMC,QAAgB,GAAG,SAAnBA,QAAmB,GAAM;AAC7B,SAAO,UAACC,GAAD;AAAA,WAASF,KAAK,CAACE,GAAD,EAAM,MAAN,EAAcC,OAAd,CAAd;AAAA,GAAP;;AAEA,WAASA,OAAT,CAAiBC,IAAjB,EAA4B;AAAA;;AAAA,qBACYA,IADZ,CAClBC,IADkB;AAAA,QAClBA,IADkB,2BACX,EADW;AAAA,QACDC,QADC,GACYF,IADZ,CACPG,IADO;;AAG1B,QAAI,CAACD,QAAL,EAAe;AACb;AACD;;AAEDF,IAAAA,IAAI,CAACC,IAAL,GAAYA,IAAZ;AACAA,IAAAA,IAAI,CAACG,SAAL,GAAiBT,SAAS,CAACU,SAAV,CAAoBL,IAAI,CAACM,KAAzB,EAAgCJ,QAAhC,CAAjB;AACAD,IAAAA,IAAI,CAACM,WAAL,mCACKN,IAAI,CAACM,WADV;AAEEL,MAAAA,QAAQ,EAARA,QAFF;AAGEM,MAAAA,SAAS,GACP,SADO,4BAEH,sBAAAP,IAAI,CAACM,WAAL,wEAAkBC,SAAlB,KAA+B,EAF5B,uBAGKN,QAHL;AAHX;AASD;AACF,CAtBD;;AAwBA,eAAeL,QAAf","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport refractor from 'refractor';\nimport visit from 'unist-util-visit';\nimport { Plugin } from 'unified';\n\nconst attacher: Plugin = () => {\n  return (ast) => visit(ast, 'code', visitor);\n\n  function visitor(node: any) {\n    const { data = {}, lang: language } = node;\n\n    if (!language) {\n      return;\n    }\n\n    node.data = data;\n    data.hChildren = refractor.highlight(node.value, language);\n    data.hProperties = {\n      ...data.hProperties,\n      language,\n      className: [\n        'prismjs',\n        ...(data.hProperties?.className || []),\n        `language-${language}`,\n      ],\n    };\n  }\n};\n\nexport default attacher;\n"]}]}