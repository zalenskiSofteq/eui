{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\services\\sort\\comparators.ts","dependencies":[{"path":"D:\\work\\eui\\src\\services\\sort\\comparators.ts","mtime":1649070093846},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmZyZWV6ZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwppbXBvcnQgeyBTb3J0RGlyZWN0aW9uIH0gZnJvbSAnLi9zb3J0X2RpcmVjdGlvbic7CmltcG9ydCB7IGdldCB9IGZyb20gJy4uL29iamVjdHMnOwpleHBvcnQgdmFyIENvbXBhcmF0b3JzID0gT2JqZWN0LmZyZWV6ZSh7CiAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICB2YXIgZGlyZWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBTb3J0RGlyZWN0aW9uLkFTQzsKICAgIHJldHVybiBmdW5jdGlvbiAodjEsIHYyKSB7CiAgICAgIC8vIEphdmFTY3JpcHQncyBjb21wYXJpc29uIG9mIG51bGwvdW5kZWZpbmVkIChhbmQgc29tZSBvdGhlcnMgbm90IGhhbmRsZWQgaGVyZSkgdmFsdWVzIGFsd2F5cyByZXR1cm5zIGBmYWxzZWAKICAgICAgLy8gKGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvI3NlYy1hYnN0cmFjdC1yZWxhdGlvbmFsLWNvbXBhcmlzb24pCiAgICAgIC8vIHJlc3VsdGluZyBpbiBjYXNlcyB3aGVyZSB2MSA8IHYyIGFuZCB2MSA+IHYyIGFyZSBib3RoIGZhbHNlLgogICAgICAvLyBUaGlzIGxlYWRzIHRvIHVucHJlZGljdGFibGUgc29ydGluZyByZXN1bHRzIGluIG11bHRpcGxlIEpTIGVuZ2luZSBzb3J0aW5nIGFsZ29yaXRobXMKICAgICAgLy8gd2hpY2ggY2F1c2VzIHVucHJlZGljdGFibGUgdXNlciBleHBlcmllbmNlcy4KICAgICAgLy8gSW5zdGVhZDoKICAgICAgLy8gKiAxLiBwdXNoIHVuZGVmaW5lZC9udWxsIHZhbHVlcyB0byB0aGUgZW5kIG9mIHRoZSBzb3J0ZWQgbGlzdCwgX3JlZ2FyZGxlc3Mgb2Ygc29ydCBkaXJlY3Rpb25fCiAgICAgIC8vICAgIChub24tc29ydGFibGUgdmFsdWVzIGFsd2F5cyBhcHBlYXIgYXQgdGhlIGVuZCwgYW5kIHNvcnRhYmxlIHZhbHVlcyBhcmUgc29ydGVkIGF0IHRoZSB0b3ApCiAgICAgIC8vICogMi4gcmVwb3J0IHVuZGVmaW5lZC9udWxsIHZhbHVlcyBhcyBlcXVhbAogICAgICAvLyAqIDMuIHdoZW4gYm90aCB2YWx1ZXMgYXJlIGNvbXBhcmFibGUgdGhleSBhcmUgc29ydGVkIG5vcm1hbGx5CiAgICAgIHZhciB2MUlzQ29tcGFyYWJsZSA9IHYxICE9IG51bGw7CiAgICAgIHZhciB2MklzQ29tcGFyYWJsZSA9IHYyICE9IG51bGw7IC8vICogMS4KCiAgICAgIGlmICh2MUlzQ29tcGFyYWJsZSAmJiAhdjJJc0NvbXBhcmFibGUpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KCiAgICAgIGlmICghdjFJc0NvbXBhcmFibGUgJiYgdjJJc0NvbXBhcmFibGUpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfSAvLyAqIDIuCgoKICAgICAgaWYgKCF2MUlzQ29tcGFyYWJsZSAmJiAhdjJJc0NvbXBhcmFibGUpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSAvLyAqIDMuCgoKICAgICAgaWYgKHYxID09PSB2MikgewogICAgICAgIHJldHVybiAwOwogICAgICB9CgogICAgICB2YXIgcmVzdWx0ID0gdjEgPiB2MiA/IDEgOiAtMTsKICAgICAgcmV0dXJuIFNvcnREaXJlY3Rpb24uaXNBc2MoZGlyZWN0aW9uKSA/IHJlc3VsdCA6IC0xICogcmVzdWx0OwogICAgfTsKICB9LAogIHJldmVyc2U6IGZ1bmN0aW9uIHJldmVyc2UoY29tcGFyYXRvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2MSwgdjIpIHsKICAgICAgcmV0dXJuIGNvbXBhcmF0b3IodjIsIHYxKTsKICAgIH07CiAgfSwKICB2YWx1ZTogZnVuY3Rpb24gKF92YWx1ZSkgewogICAgZnVuY3Rpb24gdmFsdWUoX3gsIF94MikgewogICAgICByZXR1cm4gX3ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgdmFsdWUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdmFsdWUudG9TdHJpbmcoKTsKICAgIH07CgogICAgcmV0dXJuIHZhbHVlOwogIH0oZnVuY3Rpb24gKHZhbHVlQ2FsbGJhY2ssIGNvbXBhcmF0b3IpIHsKICAgIGlmICghY29tcGFyYXRvcikgewogICAgICBjb21wYXJhdG9yID0gdGhpcy5kZWZhdWx0KFNvcnREaXJlY3Rpb24uQVNDKTsKICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24gKG8xLCBvMikgewogICAgICByZXR1cm4gY29tcGFyYXRvcih2YWx1ZUNhbGxiYWNrKG8xKSwgdmFsdWVDYWxsYmFjayhvMikpOwogICAgfTsKICB9KSwKICBwcm9wZXJ0eTogZnVuY3Rpb24gcHJvcGVydHkocHJvcCwgY29tcGFyYXRvcikgewogICAgcmV0dXJuIHRoaXMudmFsdWUoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiBnZXQodmFsdWUsIHByb3ApOwogICAgfSwgY29tcGFyYXRvcik7CiAgfQp9KTs="},{"version":3,"sources":["D:/work/eui/src/services/sort/comparators.ts"],"names":["SortDirection","get","Comparators","Object","freeze","default","direction","ASC","v1","v2","v1IsComparable","v2IsComparable","result","isAsc","reverse","comparator","value","valueCallback","o1","o2","property","prop"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,aAAT,QAA8B,kBAA9B;AACA,SAASC,GAAT,QAAoB,YAApB;AAMA,OAAO,IAAMC,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAc;AACvCC,EAAAA,OAAO,EAAE,oBAAmD;AAAA,QAAlDC,SAAkD,uEAAtBN,aAAa,CAACO,GAAQ;AAC1D,WAAO,UAACC,EAAD,EAAgBC,EAAhB,EAAkC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,UAAMC,cAAc,GAAGF,EAAE,IAAI,IAA7B;AACA,UAAMG,cAAc,GAAGF,EAAE,IAAI,IAA7B,CAbuC,CAevC;;AACA,UAAIC,cAAc,IAAI,CAACC,cAAvB,EAAuC;AACrC,eAAO,CAAC,CAAR;AACD;;AACD,UAAI,CAACD,cAAD,IAAmBC,cAAvB,EAAuC;AACrC,eAAO,CAAP;AACD,OArBsC,CAuBvC;;;AACA,UAAI,CAACD,cAAD,IAAmB,CAACC,cAAxB,EAAwC;AACtC,eAAO,CAAP;AACD,OA1BsC,CA4BvC;;;AACA,UAAIH,EAAE,KAAKC,EAAX,EAAe;AACb,eAAO,CAAP;AACD;;AACD,UAAMG,MAAM,GAAGJ,EAAE,GAAIC,EAAN,GAAY,CAAZ,GAAgB,CAAC,CAAhC;AACA,aAAOT,aAAa,CAACa,KAAd,CAAoBP,SAApB,IAAiCM,MAAjC,GAA0C,CAAC,CAAD,GAAKA,MAAtD;AACD,KAlCD;AAmCD,GArCsC;AAuCvCE,EAAAA,OAAO,EAAE,iBAAIC,UAAJ,EAAiD;AACxD,WAAO,UAACP,EAAD,EAAKC,EAAL;AAAA,aAAYM,UAAU,CAACN,EAAD,EAAKD,EAAL,CAAtB;AAAA,KAAP;AACD,GAzCsC;AA2CvCQ,EAAAA,KA3CuC;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,cA4CrCC,aA5CqC,EA6CrCF,UA7CqC,EA8CtB;AACf,QAAI,CAACA,UAAL,EAAiB;AACfA,MAAAA,UAAU,GAAG,KAAKV,OAAL,CAAaL,aAAa,CAACO,GAA3B,CAAb;AACD;;AACD,WAAO,UAACW,EAAD,EAAQC,EAAR,EAAkB;AACvB,aAAOJ,UAAU,CAAEE,aAAa,CAACC,EAAD,CAAf,EAAqBD,aAAa,CAACE,EAAD,CAAlC,CAAjB;AACD,KAFD;AAGD,GArDsC;AAuDvCC,EAAAA,QAvDuC,oBAuD3BC,IAvD2B,EAuDbN,UAvDa,EAuD2B;AAChE,WAAO,KAAKC,KAAL,CAAW,UAACA,KAAD;AAAA,aAAWf,GAAG,CAACe,KAAD,EAAQK,IAAR,CAAd;AAAA,KAAX,EAAwCN,UAAxC,CAAP;AACD;AAzDsC,CAAd,CAApB","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SortDirection } from './sort_direction';\nimport { get } from '../objects';\n\nexport type Primitive = string | boolean | number | null | undefined;\n\ntype Comparator<T = Primitive> = (a: T, b: T) => number;\n\nexport const Comparators = Object.freeze({\n  default: (direction: 'asc' | 'desc' = SortDirection.ASC) => {\n    return (v1: Primitive, v2: Primitive) => {\n      // JavaScript's comparison of null/undefined (and some others not handled here) values always returns `false`\n      // (https://www.ecma-international.org/ecma-262/#sec-abstract-relational-comparison)\n      // resulting in cases where v1 < v2 and v1 > v2 are both false.\n      // This leads to unpredictable sorting results in multiple JS engine sorting algorithms\n      // which causes unpredictable user experiences.\n      // Instead:\n      // * 1. push undefined/null values to the end of the sorted list, _regardless of sort direction_\n      //    (non-sortable values always appear at the end, and sortable values are sorted at the top)\n      // * 2. report undefined/null values as equal\n      // * 3. when both values are comparable they are sorted normally\n\n      const v1IsComparable = v1 != null;\n      const v2IsComparable = v2 != null;\n\n      // * 1.\n      if (v1IsComparable && !v2IsComparable) {\n        return -1;\n      }\n      if (!v1IsComparable && v2IsComparable) {\n        return 1;\n      }\n\n      // * 2.\n      if (!v1IsComparable && !v2IsComparable) {\n        return 0;\n      }\n\n      // * 3.\n      if (v1 === v2) {\n        return 0;\n      }\n      const result = v1! > v2! ? 1 : -1;\n      return SortDirection.isAsc(direction) ? result : -1 * result;\n    };\n  },\n\n  reverse: <T>(comparator: Comparator<T>): Comparator<T> => {\n    return (v1, v2) => comparator(v2, v1);\n  },\n\n  value<T>(\n    valueCallback: (value: T) => Primitive,\n    comparator?: Comparator\n  ): Comparator<T> {\n    if (!comparator) {\n      comparator = this.default(SortDirection.ASC);\n    }\n    return (o1: T, o2: T) => {\n      return comparator!(valueCallback(o1), valueCallback(o2));\n    };\n  },\n\n  property<T>(prop: string, comparator?: Comparator): Comparator<T> {\n    return this.value((value) => get(value, prop), comparator);\n  },\n});\n"]}]}