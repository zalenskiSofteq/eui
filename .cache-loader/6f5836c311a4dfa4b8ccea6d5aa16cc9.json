{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\services\\popover\\calculate_popover_position.ts","dependencies":[{"path":"D:\\work\\eui\\src\\services\\popover\\calculate_popover_position.ts","mtime":1649070093835},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KdmFyIGdldFZpc2libGVBcmVhID0gZnVuY3Rpb24gZ2V0VmlzaWJsZUFyZWEoYm91bmRzLCB3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0KSB7CiAgdmFyIGxlZnQgPSBib3VuZHMubGVmdCwKICAgICAgdG9wID0gYm91bmRzLnRvcCwKICAgICAgd2lkdGggPSBib3VuZHMud2lkdGgsCiAgICAgIGhlaWdodCA9IGJvdW5kcy5oZWlnaHQ7IC8vIFRoaXMgaXMgYSBjb21tb24gYWxnb3JpdGhtIGZvciBmaW5kaW5nIHRoZSBpbnRlcnNlY3RlZCBhcmVhIGFtb25nIHR3byByZWN0YW5nbGVzLgoKICB2YXIgZHggPSBNYXRoLm1pbihsZWZ0ICsgd2lkdGgsIHdpbmRvd1dpZHRoKSAtIE1hdGgubWF4KGxlZnQsIDApOwogIHZhciBkeSA9IE1hdGgubWluKHRvcCArIGhlaWdodCwgd2luZG93SGVpZ2h0KSAtIE1hdGgubWF4KHRvcCwgMCk7CiAgcmV0dXJuIGR4ICogZHk7Cn07Cgp2YXIgcG9zaXRpb25BdFRvcCA9IGZ1bmN0aW9uIHBvc2l0aW9uQXRUb3AoYW5jaG9yQm91bmRzLCB3aWR0aCwgaGVpZ2h0LCBidWZmZXIpIHsKICB2YXIgd2lkdGhEaWZmZXJlbmNlID0gd2lkdGggLSBhbmNob3JCb3VuZHMud2lkdGg7CiAgdmFyIGxlZnQgPSBhbmNob3JCb3VuZHMubGVmdCAtIHdpZHRoRGlmZmVyZW5jZSAqIDAuNTsKICB2YXIgdG9wID0gYW5jaG9yQm91bmRzLnRvcCAtIGhlaWdodCAtIGJ1ZmZlcjsKICByZXR1cm4gewogICAgbGVmdDogbGVmdCwKICAgIHRvcDogdG9wLAogICAgd2lkdGg6IHdpZHRoLAogICAgaGVpZ2h0OiBoZWlnaHQKICB9Owp9OwoKdmFyIHBvc2l0aW9uQXRSaWdodCA9IGZ1bmN0aW9uIHBvc2l0aW9uQXRSaWdodChhbmNob3JCb3VuZHMsIHdpZHRoLCBoZWlnaHQsIGJ1ZmZlcikgewogIHZhciBsZWZ0ID0gYW5jaG9yQm91bmRzLnJpZ2h0ICsgYnVmZmVyOwogIHZhciBoZWlnaHREaWZmZXJlbmNlID0gaGVpZ2h0IC0gYW5jaG9yQm91bmRzLmhlaWdodDsKICB2YXIgdG9wID0gYW5jaG9yQm91bmRzLnRvcCAtIGhlaWdodERpZmZlcmVuY2UgKiAwLjU7CiAgcmV0dXJuIHsKICAgIGxlZnQ6IGxlZnQsCiAgICB0b3A6IHRvcCwKICAgIHdpZHRoOiB3aWR0aCwKICAgIGhlaWdodDogaGVpZ2h0CiAgfTsKfTsKCnZhciBwb3NpdGlvbkF0Qm90dG9tID0gZnVuY3Rpb24gcG9zaXRpb25BdEJvdHRvbShhbmNob3JCb3VuZHMsIHdpZHRoLCBoZWlnaHQsIGJ1ZmZlcikgewogIHZhciB3aWR0aERpZmZlcmVuY2UgPSB3aWR0aCAtIGFuY2hvckJvdW5kcy53aWR0aDsKICB2YXIgbGVmdCA9IGFuY2hvckJvdW5kcy5sZWZ0IC0gd2lkdGhEaWZmZXJlbmNlICogMC41OwogIHZhciB0b3AgPSBhbmNob3JCb3VuZHMuYm90dG9tICsgYnVmZmVyOwogIHJldHVybiB7CiAgICBsZWZ0OiBsZWZ0LAogICAgdG9wOiB0b3AsCiAgICB3aWR0aDogd2lkdGgsCiAgICBoZWlnaHQ6IGhlaWdodAogIH07Cn07Cgp2YXIgcG9zaXRpb25BdExlZnQgPSBmdW5jdGlvbiBwb3NpdGlvbkF0TGVmdChhbmNob3JCb3VuZHMsIHdpZHRoLCBoZWlnaHQsIGJ1ZmZlcikgewogIHZhciBsZWZ0ID0gYW5jaG9yQm91bmRzLmxlZnQgLSB3aWR0aCAtIGJ1ZmZlcjsKICB2YXIgaGVpZ2h0RGlmZmVyZW5jZSA9IGhlaWdodCAtIGFuY2hvckJvdW5kcy5oZWlnaHQ7CiAgdmFyIHRvcCA9IGFuY2hvckJvdW5kcy50b3AgLSBoZWlnaHREaWZmZXJlbmNlICogMC41OwogIHJldHVybiB7CiAgICBsZWZ0OiBsZWZ0LAogICAgdG9wOiB0b3AsCiAgICB3aWR0aDogd2lkdGgsCiAgICBoZWlnaHQ6IGhlaWdodAogIH07Cn07Cgp2YXIgcG9zaXRpb25Ub1Bvc2l0aW9uZXJNYXAgPSB7CiAgdG9wOiBwb3NpdGlvbkF0VG9wLAogIHJpZ2h0OiBwb3NpdGlvbkF0UmlnaHQsCiAgYm90dG9tOiBwb3NpdGlvbkF0Qm90dG9tLAogIGxlZnQ6IHBvc2l0aW9uQXRMZWZ0Cn07Ci8qKgogKiBEZXRlcm1pbmUgdGhlIGJlc3QgcG9zaXRpb24gZm9yIGEgcG9wb3ZlciB0aGF0IGF2b2lkcyBjbGlwcGluZyBieSB0aGUgd2luZG93IHZpZXcgcG9ydC4KICoKICogQHBhcmFtIHtPYmplY3R9IGFuY2hvckJvdW5kcyAtIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIG9mIHRoZSBub2RlIHRoZSBwb3BvdmVyIGlzIHRldGhlcmVkIHRvIChlLmcuIGEgYnV0dG9uKS4KICogQHBhcmFtIHtPYmplY3R9IHBvcG92ZXJCb3VuZHMgLSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoKSBvZiB0aGUgcG9wb3ZlciBub2RlIChlLmcuIHRoZSB0b29sdGlwKS4KICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFBvc2l0aW9uIC0gUG9zaXRpb24gdGhlIHVzZXIgd2FudHMuIE9uZSBvZiBbInRvcCIsICJyaWdodCIsICJib3R0b20iLCAibGVmdCJdCiAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXIgLSBUaGUgc3BhY2UgYmV0d2VlbiB0aGUgd3JhcHBlciBhbmQgdGhlIHBvcG92ZXIuIEFsc28gdGhlIG1pbmltdW0gc3BhY2UgYmV0d2VlbiB0aGUKICogcG9wb3ZlciBhbmQgdGhlIHdpbmRvdy4KICogQHBhcmFtIHtBcnJheX0gcG9zaXRpb25zIC0gTGlzdCBvZiBhY2NlcHRhYmxlIHBvc2l0aW9ucy4gRGVmYXVsdHMgdG8gWyJ0b3AiLCAicmlnaHQiLCAiYm90dG9tIiwgImxlZnQiXS4KICoKICogQHJldHVybnMge09iamVjdH0gV2l0aCBwcm9wZXJ0aWVzIHBvc2l0aW9uIChvbmUgb2YgWyJ0b3AiLCAicmlnaHQiLCAiYm90dG9tIiwgImxlZnQiXSksIGxlZnQsIHRvcCwgd2lkdGgsIGFuZCBoZWlnaHQuCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVBvcG92ZXJQb3NpdGlvbihhbmNob3JCb3VuZHMsIHBvcG92ZXJCb3VuZHMsIHJlcXVlc3RlZFBvc2l0aW9uKSB7CiAgdmFyIGJ1ZmZlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMTY7CiAgdmFyIHBvc2l0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnXTsKCiAgaWYgKHR5cGVvZiBidWZmZXIgIT09ICdudW1iZXInKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoImNhbGN1bGF0ZVBvcG92ZXJQb3NpdGlvbiByZWNlaXZlZCBhIGJ1ZmZlciBhcmd1bWVudCBvZiAiLmNvbmNhdChidWZmZXIsICInIGJ1dCBleHBlY3RlZCBhIG51bWJlciIpKTsKICB9CgogIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgdmFyIHBvcG92ZXJXaWR0aCA9IHBvcG92ZXJCb3VuZHMud2lkdGgsCiAgICAgIHBvcG92ZXJIZWlnaHQgPSBwb3BvdmVyQm91bmRzLmhlaWdodDsKICB2YXIgcG9zaXRpb25Ub0JvdW5kc01hcCA9IHt9OwogIHZhciBwb3NpdGlvblRvVmlzaWJsZUFyZWFNYXAgPSB7fTsKICBwb3NpdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAocG9zaXRpb24pIHsKICAgIHZhciBib3VuZHMgPSBwb3NpdGlvblRvUG9zaXRpb25lck1hcFtwb3NpdGlvbl0oYW5jaG9yQm91bmRzLCBwb3BvdmVyV2lkdGgsIHBvcG92ZXJIZWlnaHQsIGJ1ZmZlcik7CiAgICBwb3NpdGlvblRvQm91bmRzTWFwW3Bvc2l0aW9uXSA9IGJvdW5kczsgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIGFyZWEgb2YgdGhlIHBvcG92ZXIgaXMgdmlzaWJsZSBhdCBlYWNoIHBvc2l0aW9uLgoKICAgIHBvc2l0aW9uVG9WaXNpYmxlQXJlYU1hcFtwb3NpdGlvbl0gPSBnZXRWaXNpYmxlQXJlYShib3VuZHMsIHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQpOwogIH0pOyAvLyBJZiB0aGUgcmVxdWVzdGVkIHBvc2l0aW9uIGNsaXBzIHRoZSBwb3BvdmVyLCBmaW5kIHRoZSBwb3NpdGlvbiB3aGljaCBjbGlwcyB0aGUgcG9wb3ZlciB0aGUgbGVhc3QuCiAgLy8gRGVmYXVsdCB0byB1c2UgdGhlIHJlcXVlc3RlZCBwb3NpdGlvbi4KCiAgdmFyIGNhbGN1bGF0ZWRQb3BvdmVyUG9zaXRpb24gPSBwb3NpdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChtb3N0VmlzaWJsZVBvc2l0aW9uLCBwb3NpdGlvbikgewogICAgaWYgKHBvc2l0aW9uVG9WaXNpYmxlQXJlYU1hcFtwb3NpdGlvbl0gPiBwb3NpdGlvblRvVmlzaWJsZUFyZWFNYXBbbW9zdFZpc2libGVQb3NpdGlvbl0pIHsKICAgICAgcmV0dXJuIHBvc2l0aW9uOwogICAgfQoKICAgIHJldHVybiBtb3N0VmlzaWJsZVBvc2l0aW9uOwogIH0sIHJlcXVlc3RlZFBvc2l0aW9uKTsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICBwb3NpdGlvbjogY2FsY3VsYXRlZFBvcG92ZXJQb3NpdGlvbgogIH0sIHBvc2l0aW9uVG9Cb3VuZHNNYXBbY2FsY3VsYXRlZFBvcG92ZXJQb3NpdGlvbl0pOwp9Cgp0cnkgewogIGNhbGN1bGF0ZVBvcG92ZXJQb3NpdGlvbi5fX2RvY2dlbkluZm8gPSB7CiAgICBkZXNjcmlwdGlvbjogJ0RldGVybWluZSB0aGUgYmVzdCBwb3NpdGlvbiBmb3IgYSBwb3BvdmVyIHRoYXQgYXZvaWRzIGNsaXBwaW5nIGJ5IHRoZSB3aW5kb3cgdmlldyBwb3J0LicsCiAgICBkaXNwbGF5TmFtZTogJ2NhbGN1bGF0ZVBvcG92ZXJQb3NpdGlvbicsCiAgICBtZXRob2RzOiBbXSwKICAgIHByb3BzOiB7fSwKICAgIGV4dGVuZGVkSW50ZXJmYWNlczogW10KICB9Owp9IGNhdGNoIChlKSB7fQ=="},{"version":3,"sources":["D:/work/eui/src/services/popover/calculate_popover_position.ts"],"names":["getVisibleArea","bounds","windowWidth","windowHeight","left","top","width","height","dx","Math","min","max","dy","positionAtTop","anchorBounds","buffer","widthDifference","positionAtRight","right","heightDifference","positionAtBottom","bottom","positionAtLeft","positionToPositionerMap","calculatePopoverPosition","popoverBounds","requestedPosition","positions","Error","window","innerWidth","innerHeight","popoverWidth","popoverHeight","positionToBoundsMap","positionToVisibleAreaMap","forEach","position","calculatedPopoverPosition","reduce","mostVisiblePosition"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { EuiPopoverPosition } from './types';\n\ninterface EuiPopoverBoundingBox {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n}\n\ninterface EuiPopoverAnchorRect extends EuiPopoverBoundingBox {\n  right: number;\n  bottom: number;\n}\n\ninterface EuiPopoverDimensions {\n  width: number;\n  height: number;\n}\n\ninterface EuiPopoverPositionedBox extends EuiPopoverBoundingBox {\n  position: EuiPopoverPosition;\n}\n\nconst getVisibleArea = (\n  bounds: EuiPopoverBoundingBox,\n  windowWidth: number,\n  windowHeight: number\n): number => {\n  const { left, top, width, height } = bounds;\n  // This is a common algorithm for finding the intersected area among two rectangles.\n  const dx = Math.min(left + width, windowWidth) - Math.max(left, 0);\n  const dy = Math.min(top + height, windowHeight) - Math.max(top, 0);\n  return dx * dy;\n};\n\ntype Positioner = (\n  bounds: EuiPopoverAnchorRect,\n  width: number,\n  height: number,\n  buffer: number\n) => EuiPopoverBoundingBox;\n\nconst positionAtTop: Positioner = (anchorBounds, width, height, buffer) => {\n  const widthDifference = width - anchorBounds.width;\n  const left = anchorBounds.left - widthDifference * 0.5;\n  const top = anchorBounds.top - height - buffer;\n  return { left, top, width, height };\n};\n\nconst positionAtRight: Positioner = (anchorBounds, width, height, buffer) => {\n  const left = anchorBounds.right + buffer;\n  const heightDifference = height - anchorBounds.height;\n  const top = anchorBounds.top - heightDifference * 0.5;\n  return { left, top, width, height };\n};\n\nconst positionAtBottom: Positioner = (anchorBounds, width, height, buffer) => {\n  const widthDifference = width - anchorBounds.width;\n  const left = anchorBounds.left - widthDifference * 0.5;\n  const top = anchorBounds.bottom + buffer;\n  return { left, top, width, height };\n};\n\nconst positionAtLeft: Positioner = (anchorBounds, width, height, buffer) => {\n  const left = anchorBounds.left - width - buffer;\n  const heightDifference = height - anchorBounds.height;\n  const top = anchorBounds.top - heightDifference * 0.5;\n  return { left, top, width, height };\n};\n\nconst positionToPositionerMap: { [position: string]: Positioner } = {\n  top: positionAtTop,\n  right: positionAtRight,\n  bottom: positionAtBottom,\n  left: positionAtLeft,\n};\n\n/**\n * Determine the best position for a popover that avoids clipping by the window view port.\n *\n * @param {Object} anchorBounds - getBoundingClientRect() of the node the popover is tethered to (e.g. a button).\n * @param {Object} popoverBounds - getBoundingClientRect() of the popover node (e.g. the tooltip).\n * @param {string} requestedPosition - Position the user wants. One of [\"top\", \"right\", \"bottom\", \"left\"]\n * @param {number} buffer - The space between the wrapper and the popover. Also the minimum space between the\n * popover and the window.\n * @param {Array} positions - List of acceptable positions. Defaults to [\"top\", \"right\", \"bottom\", \"left\"].\n *\n * @returns {Object} With properties position (one of [\"top\", \"right\", \"bottom\", \"left\"]), left, top, width, and height.\n */\nexport function calculatePopoverPosition(\n  anchorBounds: EuiPopoverAnchorRect,\n  popoverBounds: EuiPopoverDimensions,\n  requestedPosition: EuiPopoverPosition,\n  buffer: number = 16,\n  positions: EuiPopoverPosition[] = ['top', 'right', 'bottom', 'left']\n): EuiPopoverPositionedBox {\n  if (typeof buffer !== 'number') {\n    throw new Error(\n      `calculatePopoverPosition received a buffer argument of ${buffer}' but expected a number`\n    );\n  }\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n  const { width: popoverWidth, height: popoverHeight } = popoverBounds;\n\n  const positionToBoundsMap: { [position: string]: EuiPopoverBoundingBox } = {};\n  const positionToVisibleAreaMap: { [positon: string]: number } = {};\n\n  positions.forEach((position) => {\n    const bounds = positionToPositionerMap[position](\n      anchorBounds,\n      popoverWidth,\n      popoverHeight,\n      buffer\n    );\n    positionToBoundsMap[position] = bounds;\n\n    // Calculate how much area of the popover is visible at each position.\n    positionToVisibleAreaMap[position] = getVisibleArea(\n      bounds,\n      windowWidth,\n      windowHeight\n    );\n  });\n\n  // If the requested position clips the popover, find the position which clips the popover the least.\n  // Default to use the requested position.\n  const calculatedPopoverPosition = positions.reduce(\n    (mostVisiblePosition, position) => {\n      if (\n        positionToVisibleAreaMap[position] >\n        positionToVisibleAreaMap[mostVisiblePosition]\n      ) {\n        return position;\n      }\n      return mostVisiblePosition;\n    },\n    requestedPosition\n  );\n\n  return {\n    position: calculatedPopoverPosition,\n    ...positionToBoundsMap[calculatedPopoverPosition],\n  };\n}\n"]}]}