{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\basic_table\\basic_table.tsx","dependencies":[{"path":"D:\\work\\eui\\src\\components\\basic_table\\basic_table.tsx","mtime":1649070093293},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJldmVyc2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgpmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsgdmFyIGtleSwgaTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICJwcm9wLXR5cGVzIjsKaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCB7IGZvcm1hdEF1dG8sIGZvcm1hdEJvb2xlYW4sIGZvcm1hdERhdGUsIGZvcm1hdE51bWJlciwgZm9ybWF0VGV4dCwgTEVGVF9BTElHTk1FTlQsIFJJR0hUX0FMSUdOTUVOVCwgU29ydERpcmVjdGlvbiB9IGZyb20gJy4uLy4uL3NlcnZpY2VzJzsKaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3ByZWRpY2F0ZSc7CmltcG9ydCB7IGdldCB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL29iamVjdHMnOwppbXBvcnQgeyBFdWlGbGV4R3JvdXAsIEV1aUZsZXhJdGVtIH0gZnJvbSAnLi4vZmxleCc7CmltcG9ydCB7IEV1aUNoZWNrYm94IH0gZnJvbSAnLi4vZm9ybSc7CmltcG9ydCB7IEV1aVRhYmxlLCBFdWlUYWJsZUJvZHksIEV1aVRhYmxlRm9vdGVyLCBFdWlUYWJsZUZvb3RlckNlbGwsIEV1aVRhYmxlSGVhZGVyLCBFdWlUYWJsZUhlYWRlckNlbGwsIEV1aVRhYmxlSGVhZGVyQ2VsbENoZWNrYm94LCBFdWlUYWJsZUhlYWRlck1vYmlsZSwgRXVpVGFibGVSb3csIEV1aVRhYmxlUm93Q2VsbCwgRXVpVGFibGVSb3dDZWxsQ2hlY2tib3gsIEV1aVRhYmxlU29ydE1vYmlsZSB9IGZyb20gJy4uL3RhYmxlJzsKaW1wb3J0IHsgQ29sbGFwc2VkSXRlbUFjdGlvbnMgfSBmcm9tICcuL2NvbGxhcHNlZF9pdGVtX2FjdGlvbnMnOwppbXBvcnQgeyBFeHBhbmRlZEl0ZW1BY3Rpb25zIH0gZnJvbSAnLi9leHBhbmRlZF9pdGVtX2FjdGlvbnMnOwppbXBvcnQgeyBQYWdpbmF0aW9uQmFyIH0gZnJvbSAnLi9wYWdpbmF0aW9uX2Jhcic7CmltcG9ydCB7IEV1aUljb24gfSBmcm9tICcuLi9pY29uJzsKaW1wb3J0IHsgRXVpS2V5Ym9hcmRBY2Nlc3NpYmxlLCBFdWlTY3JlZW5SZWFkZXJPbmx5IH0gZnJvbSAnLi4vYWNjZXNzaWJpbGl0eSc7CmltcG9ydCB7IEV1aUkxOG4gfSBmcm9tICcuLi9pMThuJzsKaW1wb3J0IHsgRXVpRGVsYXlSZW5kZXIgfSBmcm9tICcuLi9kZWxheV9yZW5kZXInOwppbXBvcnQgeyBodG1sSWRHZW5lcmF0b3IgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hY2Nlc3NpYmlsaXR5JzsKdmFyIGRhdGFUeXBlc1Byb2ZpbGVzID0gewogIGF1dG86IHsKICAgIGFsaWduOiBMRUZUX0FMSUdOTUVOVCwKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHZhbHVlKSB7CiAgICAgIHJldHVybiBmb3JtYXRBdXRvKHZhbHVlKTsKICAgIH0KICB9LAogIHN0cmluZzogewogICAgYWxpZ246IExFRlRfQUxJR05NRU5ULAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIodmFsdWUpIHsKICAgICAgcmV0dXJuIGZvcm1hdFRleHQodmFsdWUpOwogICAgfQogIH0sCiAgbnVtYmVyOiB7CiAgICBhbGlnbjogUklHSFRfQUxJR05NRU5ULAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIodmFsdWUpIHsKICAgICAgcmV0dXJuIGZvcm1hdE51bWJlcih2YWx1ZSk7CiAgICB9CiAgfSwKICBib29sZWFuOiB7CiAgICBhbGlnbjogTEVGVF9BTElHTk1FTlQsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSkgewogICAgICByZXR1cm4gZm9ybWF0Qm9vbGVhbih2YWx1ZSk7CiAgICB9CiAgfSwKICBkYXRlOiB7CiAgICBhbGlnbjogTEVGVF9BTElHTk1FTlQsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSkgewogICAgICByZXR1cm4gZm9ybWF0RGF0ZSh2YWx1ZSk7CiAgICB9CiAgfQp9Owp2YXIgREFUQV9UWVBFUyA9IE9iamVjdC5rZXlzKGRhdGFUeXBlc1Byb2ZpbGVzKTsKZXhwb3J0IGZ1bmN0aW9uIGdldEl0ZW1JZChpdGVtLCBpdGVtSWQpIHsKICBpZiAoaXRlbUlkKSB7CiAgICBpZiAoaXNGdW5jdGlvbihpdGVtSWQpKSB7CiAgICAgIHJldHVybiBpdGVtSWQoaXRlbSk7CiAgICB9IC8vIEB0cy1pZ25vcmUgbmV2ZXIgbWluZCBhYm91dCB0aGUgaW5kZXggc2lnbmF0dXJlCgoKICAgIHJldHVybiBpdGVtW2l0ZW1JZF07CiAgfQp9CgpmdW5jdGlvbiBnZXRSb3dQcm9wcyhpdGVtLCByb3dQcm9wcykgewogIGlmIChyb3dQcm9wcykgewogICAgaWYgKGlzRnVuY3Rpb24ocm93UHJvcHMpKSB7CiAgICAgIHJldHVybiByb3dQcm9wcyhpdGVtKTsKICAgIH0KCiAgICByZXR1cm4gcm93UHJvcHM7CiAgfQoKICByZXR1cm4ge307Cn0KCmZ1bmN0aW9uIGdldENlbGxQcm9wcyhpdGVtLCBjb2x1bW4sIGNlbGxQcm9wcykgewogIGlmIChjZWxsUHJvcHMpIHsKICAgIGlmIChpc0Z1bmN0aW9uKGNlbGxQcm9wcykpIHsKICAgICAgcmV0dXJuIGNlbGxQcm9wcyhpdGVtLCBjb2x1bW4pOwogICAgfQoKICAgIHJldHVybiBjZWxsUHJvcHM7CiAgfQoKICByZXR1cm4ge307Cn0KCmZ1bmN0aW9uIGdldENvbHVtbkZvb3Rlcihjb2x1bW4sIF9yZWYpIHsKICB2YXIgaXRlbXMgPSBfcmVmLml0ZW1zLAogICAgICBwYWdpbmF0aW9uID0gX3JlZi5wYWdpbmF0aW9uOwogIHZhciBfcmVmMiA9IGNvbHVtbiwKICAgICAgZm9vdGVyID0gX3JlZjIuZm9vdGVyOwoKICBpZiAoZm9vdGVyKSB7CiAgICBpZiAoaXNGdW5jdGlvbihmb290ZXIpKSB7CiAgICAgIHJldHVybiBmb290ZXIoewogICAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBmb290ZXI7CiAgfQoKICByZXR1cm4gdW5kZWZpbmVkOwp9CgpmdW5jdGlvbiBoYXNQYWdpbmF0aW9uKHgpIHsKICByZXR1cm4geC5oYXNPd25Qcm9wZXJ0eSgncGFnaW5hdGlvbicpICYmICEheC5wYWdpbmF0aW9uOwp9CgpleHBvcnQgdmFyIEV1aUJhc2ljVGFibGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoRXVpQmFzaWNUYWJsZSwgX0NvbXBvbmVudCk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRXVpQmFzaWNUYWJsZSk7CgogIF9jcmVhdGVDbGFzcyhFdWlCYXNpY1RhYmxlLCBudWxsLCBbewogICAga2V5OiAiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgaWYgKCFuZXh0UHJvcHMuc2VsZWN0aW9uKSB7CiAgICAgICAgLy8gbmV4dCBwcm9wcyBkb2Vzbid0IGhhdmUgYSBzZWxlY3Rpb24sIHJlc2V0IG91ciBzdGF0ZQogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzZWxlY3Rpb246IFtdCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGl0ZW1JZCA9IG5leHRQcm9wcy5pdGVtSWQ7CiAgICAgIHZhciBzZWxlY3Rpb24gPSBwcmV2U3RhdGUuc2VsZWN0aW9uLmZpbHRlcihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7CiAgICAgICAgcmV0dXJuIG5leHRQcm9wcy5pdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBnZXRJdGVtSWQoaXRlbSwgaXRlbUlkKSA9PT0gZ2V0SXRlbUlkKHNlbGVjdGVkSXRlbSwgaXRlbUlkKTsKICAgICAgICB9KSAhPT0gLTE7CiAgICAgIH0pOwoKICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggIT09IHByZXZTdGF0ZS5zZWxlY3Rpb24ubGVuZ3RoKSB7CiAgICAgICAgaWYgKG5leHRQcm9wcy5zZWxlY3Rpb24ub25TZWxlY3Rpb25DaGFuZ2UpIHsKICAgICAgICAgIG5leHRQcm9wcy5zZWxlY3Rpb24ub25TZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbgogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSAvLyB1c2VkIGZvciBtb3ZpbmcgaW4gJiBvdXQgb2YgYGxvYWRpbmdgIHN0YXRlCgogIH1dKTsKCiAgZnVuY3Rpb24gRXVpQmFzaWNUYWJsZShwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdWlCYXNpY1RhYmxlKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjbGVhbnVwcyIsIFtdKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0Ym9keSIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNldFRib2R5IiwgZnVuY3Rpb24gKHRib2R5KSB7CiAgICAgIC8vIHJlbW92ZSBsaXN0ZW5lcnMgZnJvbSBhbiBleGlzdGluZyBlbGVtZW50CiAgICAgIF90aGlzLnJlbW92ZUxvYWRpbmdMaXN0ZW5lcnMoKTsgLy8gdXBkYXRlIHRoZSByZWYKCgogICAgICBfdGhpcy50Ym9keSA9IHRib2R5OyAvLyBpZiBsb2FkaW5nLCBhZGQgbGlzdGVuZXJzCgogICAgICBpZiAoX3RoaXMucHJvcHMubG9hZGluZyA9PT0gdHJ1ZSAmJiB0Ym9keSkgewogICAgICAgIF90aGlzLmFkZExvYWRpbmdMaXN0ZW5lcnModGJvZHkpOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJhZGRMb2FkaW5nTGlzdGVuZXJzIiwgZnVuY3Rpb24gKHRib2R5KSB7CiAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIGxpc3RlbmVyKGV2ZW50KSB7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfTsKCiAgICAgIFsnbW91c2Vkb3duJywgJ21vdXNldXAnLCAnbW91c2VvdmVyJywgJ21vdXNlb3V0JywgJ21vdXNlZW50ZXInLCAnbW91c2VsZWF2ZScsICdjbGljaycsICdkYmxjbGljaycsICdrZXlkb3duJywgJ2tleXVwJywgJ2tleXByZXNzJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB0Ym9keS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgdHJ1ZSk7CgogICAgICAgIF90aGlzLmNsZWFudXBzLnB1c2goZnVuY3Rpb24gKCkgewogICAgICAgICAgdGJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIHRydWUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbW92ZUxvYWRpbmdMaXN0ZW5lcnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmNsZWFudXBzLmZvckVhY2goZnVuY3Rpb24gKGNsZWFudXApIHsKICAgICAgICByZXR1cm4gY2xlYW51cCgpOwogICAgICB9KTsKCiAgICAgIF90aGlzLmNsZWFudXBzLmxlbmd0aCA9IDA7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0YWJsZUlkIiwgaHRtbElkR2VuZXJhdG9yKCdfX3RhYmxlJykoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyU2VsZWN0QWxsIiwgZnVuY3Rpb24gKGlzTW9iaWxlKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgaXRlbXMgPSBfdGhpcyRwcm9wcy5pdGVtcywKICAgICAgICAgIHNlbGVjdGlvbiA9IF90aGlzJHByb3BzLnNlbGVjdGlvbjsKCiAgICAgIGlmICghc2VsZWN0aW9uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2VsZWN0YWJsZUl0ZW1zID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuICFzZWxlY3Rpb24uc2VsZWN0YWJsZSB8fCBzZWxlY3Rpb24uc2VsZWN0YWJsZShpdGVtKTsKICAgICAgfSk7CiAgICAgIHZhciBjaGVja2VkID0gX3RoaXMuc3RhdGUuc2VsZWN0aW9uICYmIHNlbGVjdGFibGVJdGVtcy5sZW5ndGggPiAwICYmIF90aGlzLnN0YXRlLnNlbGVjdGlvbi5sZW5ndGggPT09IHNlbGVjdGFibGVJdGVtcy5sZW5ndGg7CiAgICAgIHZhciBkaXNhYmxlZCA9IHNlbGVjdGFibGVJdGVtcy5sZW5ndGggPT09IDA7CgogICAgICB2YXIgb25DaGFuZ2UgPSBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkgewogICAgICAgICAgX3RoaXMuY2hhbmdlU2VsZWN0aW9uKHNlbGVjdGFibGVJdGVtcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmNoYW5nZVNlbGVjdGlvbihbXSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUkxOG4sIHsKICAgICAgICB0b2tlbjogImV1aUJhc2ljVGFibGUuc2VsZWN0QWxsUm93cyIsCiAgICAgICAgZGVmYXVsdDogIlNlbGVjdCBhbGwgcm93cyIKICAgICAgfSwgZnVuY3Rpb24gKHNlbGVjdEFsbFJvd3MpIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpQ2hlY2tib3gsIHsKICAgICAgICAgIGlkOiAiX3NlbGVjdGlvbl9jb2x1bW4tY2hlY2tib3hfIi5jb25jYXQoaHRtbElkR2VuZXJhdG9yKCkoKSksCiAgICAgICAgICB0eXBlOiBpc01vYmlsZSA/IHVuZGVmaW5lZCA6ICdpbkxpc3QnLAogICAgICAgICAgY2hlY2tlZDogY2hlY2tlZCwKICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICAgIG9uQ2hhbmdlOiBvbkNoYW5nZSAvLyBPbmx5IGFkZCBkYXRhLXRlc3Qtc3ViaiB0byBvbmUgb2YgdGhlIGNoZWNrYm94ZXMKICAgICAgICAgICwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6IGlzTW9iaWxlID8gdW5kZWZpbmVkIDogJ2NoZWNrYm94U2VsZWN0QWxsJywKICAgICAgICAgICJhcmlhLWxhYmVsIjogc2VsZWN0QWxsUm93cywKICAgICAgICAgIGxhYmVsOiBpc01vYmlsZSA/IHNlbGVjdEFsbFJvd3MgOiBudWxsCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVzb2x2ZUNvbHVtblNvcnREaXJlY3Rpb24iLCBmdW5jdGlvbiAoY29sdW1uKSB7CiAgICAgIHZhciBzb3J0aW5nID0gX3RoaXMucHJvcHMuc29ydGluZzsKICAgICAgdmFyIF9yZWYzID0gY29sdW1uLAogICAgICAgICAgc29ydGFibGUgPSBfcmVmMy5zb3J0YWJsZSwKICAgICAgICAgIGZpZWxkID0gX3JlZjMuZmllbGQsCiAgICAgICAgICBuYW1lID0gX3JlZjMubmFtZTsKCiAgICAgIGlmICghc29ydGluZyB8fCAhc29ydGluZy5zb3J0IHx8ICFzb3J0YWJsZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNvcnRpbmcuc29ydC5maWVsZCA9PT0gZmllbGQgfHwgc29ydGluZy5zb3J0LmZpZWxkID09PSBuYW1lKSB7CiAgICAgICAgcmV0dXJuIHNvcnRpbmcuc29ydC5kaXJlY3Rpb247CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlc29sdmVDb2x1bW5PblNvcnQiLCBmdW5jdGlvbiAoY29sdW1uKSB7CiAgICAgIHZhciBzb3J0aW5nID0gX3RoaXMucHJvcHMuc29ydGluZzsKICAgICAgdmFyIF9yZWY0ID0gY29sdW1uLAogICAgICAgICAgc29ydGFibGUgPSBfcmVmNC5zb3J0YWJsZSwKICAgICAgICAgIG5hbWUgPSBfcmVmNC5uYW1lOwoKICAgICAgaWYgKCFzb3J0aW5nIHx8ICFzb3J0YWJsZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFfdGhpcy5wcm9wcy5vbkNoYW5nZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQmFzaWNUYWJsZSBpcyBjb25maWd1cmVkIHRvIGJlIHNvcnRhYmxlIG9uIGNvbHVtbiBbIi5jb25jYXQobmFtZSwgIl0gYnV0XG4gICAgICAgICAgW29uQ2hhbmdlXSBpcyBub3QgY29uZmlndXJlZC4gVGhpcyBjYWxsYmFjayBtdXN0IGJlIGltcGxlbWVudGVkIHRvIGhhbmRsZSB0aGUgc29ydCByZXF1ZXN0cyIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMub25Db2x1bW5Tb3J0Q2hhbmdlKGNvbHVtbik7CiAgICAgIH07CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgLy8gdXNlZCBmb3IgY2hlY2tpbmcgaWYgIGluaXRpYWwgc2VsZWN0aW9uIGlzIHJlbmRlcmVkCiAgICAgIGluaXRpYWxTZWxlY3Rpb25SZW5kZXJlZDogZmFsc2UsCiAgICAgIHNlbGVjdGlvbjogW10KICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRXVpQmFzaWNUYWJsZSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMucHJvcHMubG9hZGluZyAmJiB0aGlzLnRib2R5KSB0aGlzLmFkZExvYWRpbmdMaXN0ZW5lcnModGhpcy50Ym9keSk7CiAgICAgIHRoaXMuZ2V0SW5pdGlhbFNlbGVjdGlvbigpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykgewogICAgICBpZiAocHJldlByb3BzLmxvYWRpbmcgIT09IHRoaXMucHJvcHMubG9hZGluZykgewogICAgICAgIGlmICh0aGlzLnByb3BzLmxvYWRpbmcgJiYgdGhpcy50Ym9keSkgewogICAgICAgICAgdGhpcy5hZGRMb2FkaW5nTGlzdGVuZXJzKHRoaXMudGJvZHkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUxvYWRpbmdMaXN0ZW5lcnMoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0SW5pdGlhbFNlbGVjdGlvbigpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5yZW1vdmVMb2FkaW5nTGlzdGVuZXJzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SW5pdGlhbFNlbGVjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFNlbGVjdGlvbigpIHsKICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0aW9uICYmIHRoaXMucHJvcHMuc2VsZWN0aW9uLmluaXRpYWxTZWxlY3RlZCAmJiAhdGhpcy5zdGF0ZS5pbml0aWFsU2VsZWN0aW9uUmVuZGVyZWQgJiYgdGhpcy5wcm9wcy5pdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBzZWxlY3Rpb246IHRoaXMucHJvcHMuc2VsZWN0aW9uLmluaXRpYWxTZWxlY3RlZAogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgaW5pdGlhbFNlbGVjdGlvblJlbmRlcmVkOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTZWxlY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdGlvbihuZXdTZWxlY3Rpb24pIHsKICAgICAgdGhpcy5jaGFuZ2VTZWxlY3Rpb24obmV3U2VsZWN0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJidWlsZENyaXRlcmlhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZENyaXRlcmlhKHByb3BzKSB7CiAgICAgIHZhciBjcml0ZXJpYSA9IHt9OwoKICAgICAgaWYgKGhhc1BhZ2luYXRpb24ocHJvcHMpKSB7CiAgICAgICAgY3JpdGVyaWEucGFnZSA9IHsKICAgICAgICAgIGluZGV4OiBwcm9wcy5wYWdpbmF0aW9uLnBhZ2VJbmRleCwKICAgICAgICAgIHNpemU6IHByb3BzLnBhZ2luYXRpb24ucGFnZVNpemUKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAocHJvcHMuc29ydGluZykgewogICAgICAgIGNyaXRlcmlhLnNvcnQgPSBwcm9wcy5zb3J0aW5nLnNvcnQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBjcml0ZXJpYTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGFuZ2VTZWxlY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pIHsKICAgICAgaWYgKCF0aGlzLnByb3BzLnNlbGVjdGlvbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24KICAgICAgfSk7CgogICAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3Rpb24ub25TZWxlY3Rpb25DaGFuZ2UpIHsKICAgICAgICB0aGlzLnByb3BzLnNlbGVjdGlvbi5vblNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xlYXJTZWxlY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkgewogICAgICB0aGlzLmNoYW5nZVNlbGVjdGlvbihbXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25QYWdlU2l6ZUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25QYWdlU2l6ZUNoYW5nZShzaXplKSB7CiAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgdmFyIGN1cnJlbnRDcml0ZXJpYSA9IHRoaXMuYnVpbGRDcml0ZXJpYSh0aGlzLnByb3BzKTsKCiAgICAgIHZhciBjcml0ZXJpYSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY3VycmVudENyaXRlcmlhKSwge30sIHsKICAgICAgICBwYWdlOiB7CiAgICAgICAgICBpbmRleDogMCwKICAgICAgICAgIC8vIHdoZW4gcGFnZSBzaXplIGNoYW5nZXMsIHdlIHRha2UgdGhlIHVzZXIgYmFjayB0byB0aGUgZmlyc3QgcGFnZQogICAgICAgICAgc2l6ZTogc2l6ZQogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAodGhpcy5wcm9wcy5vbkNoYW5nZSkgewogICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoY3JpdGVyaWEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib25QYWdlQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblBhZ2VDaGFuZ2UoaW5kZXgpIHsKICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpOwogICAgICB2YXIgY3VycmVudENyaXRlcmlhID0gdGhpcy5idWlsZENyaXRlcmlhKHRoaXMucHJvcHMpOwoKICAgICAgdmFyIGNyaXRlcmlhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjdXJyZW50Q3JpdGVyaWEpLCB7fSwgewogICAgICAgIHBhZ2U6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY3VycmVudENyaXRlcmlhLnBhZ2UpLCB7fSwgewogICAgICAgICAgaW5kZXg6IGluZGV4CiAgICAgICAgfSkKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5wcm9wcy5vbkNoYW5nZSkgewogICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoY3JpdGVyaWEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib25Db2x1bW5Tb3J0Q2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbHVtblNvcnRDaGFuZ2UoY29sdW1uKSB7CiAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgdmFyIGN1cnJlbnRDcml0ZXJpYSA9IHRoaXMuYnVpbGRDcml0ZXJpYSh0aGlzLnByb3BzKTsKICAgICAgdmFyIGRpcmVjdGlvbiA9IFNvcnREaXJlY3Rpb24uQVNDOwoKICAgICAgaWYgKGN1cnJlbnRDcml0ZXJpYSAmJiBjdXJyZW50Q3JpdGVyaWEuc29ydCAmJiAoY3VycmVudENyaXRlcmlhLnNvcnQuZmllbGQgPT09IGNvbHVtbi5maWVsZCB8fCBjdXJyZW50Q3JpdGVyaWEuc29ydC5maWVsZCA9PT0gY29sdW1uLm5hbWUpKSB7CiAgICAgICAgZGlyZWN0aW9uID0gU29ydERpcmVjdGlvbi5yZXZlcnNlKGN1cnJlbnRDcml0ZXJpYS5zb3J0LmRpcmVjdGlvbik7CiAgICAgIH0KCiAgICAgIHZhciBjcml0ZXJpYSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY3VycmVudENyaXRlcmlhKSwge30sIHsKICAgICAgICAvLyByZXNldHRpbmcgdGhlIHBhZ2UgaWYgdGhlIGNyaXRlcmlhIGhhcyBvbmUKICAgICAgICBwYWdlOiAhY3VycmVudENyaXRlcmlhLnBhZ2UgPyB1bmRlZmluZWQgOiB7CiAgICAgICAgICBpbmRleDogMCwKICAgICAgICAgIHNpemU6IGN1cnJlbnRDcml0ZXJpYS5wYWdlLnNpemUKICAgICAgICB9LAogICAgICAgIHNvcnQ6IHsKICAgICAgICAgIGZpZWxkOiBjb2x1bW4uZmllbGQgfHwgY29sdW1uLm5hbWUsCiAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvbgogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAodGhpcy5wcm9wcy5vbkNoYW5nZSkgewogICAgICAgIC8vIEB0cy1pZ25vcmUgY29tcGxleCByZWxhdGlvbnNoaXAgYmV0d2VlbiBwYWdpbmF0aW9uJ3MgZXhpc3RlbmNlIGFuZCBjcml0ZXJpYSwgdGhlIGNvZGUgbG9naWMgZW5zdXJlcyB0aGlzIGlzIGNvcnJlY3RseSBtYWludGFpbmVkCiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZShjcml0ZXJpYSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBjbGFzc05hbWUgPSBfdGhpcyRwcm9wczIuY2xhc3NOYW1lLAogICAgICAgICAgbG9hZGluZyA9IF90aGlzJHByb3BzMi5sb2FkaW5nLAogICAgICAgICAgaXRlbXMgPSBfdGhpcyRwcm9wczIuaXRlbXMsCiAgICAgICAgICBpdGVtSWQgPSBfdGhpcyRwcm9wczIuaXRlbUlkLAogICAgICAgICAgY29sdW1ucyA9IF90aGlzJHByb3BzMi5jb2x1bW5zLAogICAgICAgICAgcGFnaW5hdGlvbiA9IF90aGlzJHByb3BzMi5wYWdpbmF0aW9uLAogICAgICAgICAgc29ydGluZyA9IF90aGlzJHByb3BzMi5zb3J0aW5nLAogICAgICAgICAgc2VsZWN0aW9uID0gX3RoaXMkcHJvcHMyLnNlbGVjdGlvbiwKICAgICAgICAgIG9uQ2hhbmdlID0gX3RoaXMkcHJvcHMyLm9uQ2hhbmdlLAogICAgICAgICAgZXJyb3IgPSBfdGhpcyRwcm9wczIuZXJyb3IsCiAgICAgICAgICBub0l0ZW1zTWVzc2FnZSA9IF90aGlzJHByb3BzMi5ub0l0ZW1zTWVzc2FnZSwKICAgICAgICAgIGNvbXByZXNzZWQgPSBfdGhpcyRwcm9wczIuY29tcHJlc3NlZCwKICAgICAgICAgIGl0ZW1JZFRvRXhwYW5kZWRSb3dNYXAgPSBfdGhpcyRwcm9wczIuaXRlbUlkVG9FeHBhbmRlZFJvd01hcCwKICAgICAgICAgIHJlc3BvbnNpdmUgPSBfdGhpcyRwcm9wczIucmVzcG9uc2l2ZSwKICAgICAgICAgIGlzU2VsZWN0YWJsZSA9IF90aGlzJHByb3BzMi5pc1NlbGVjdGFibGUsCiAgICAgICAgICBpc0V4cGFuZGFibGUgPSBfdGhpcyRwcm9wczIuaXNFeHBhbmRhYmxlLAogICAgICAgICAgaGFzQWN0aW9ucyA9IF90aGlzJHByb3BzMi5oYXNBY3Rpb25zLAogICAgICAgICAgcm93UHJvcHMgPSBfdGhpcyRwcm9wczIucm93UHJvcHMsCiAgICAgICAgICBjZWxsUHJvcHMgPSBfdGhpcyRwcm9wczIuY2VsbFByb3BzLAogICAgICAgICAgdGFibGVDYXB0aW9uID0gX3RoaXMkcHJvcHMyLnRhYmxlQ2FwdGlvbiwKICAgICAgICAgIHJvd0hlYWRlciA9IF90aGlzJHByb3BzMi5yb3dIZWFkZXIsCiAgICAgICAgICB0YWJsZUxheW91dCA9IF90aGlzJHByb3BzMi50YWJsZUxheW91dCwKICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3RoaXMkcHJvcHMyLCBbImNsYXNzTmFtZSIsICJsb2FkaW5nIiwgIml0ZW1zIiwgIml0ZW1JZCIsICJjb2x1bW5zIiwgInBhZ2luYXRpb24iLCAic29ydGluZyIsICJzZWxlY3Rpb24iLCAib25DaGFuZ2UiLCAiZXJyb3IiLCAibm9JdGVtc01lc3NhZ2UiLCAiY29tcHJlc3NlZCIsICJpdGVtSWRUb0V4cGFuZGVkUm93TWFwIiwgInJlc3BvbnNpdmUiLCAiaXNTZWxlY3RhYmxlIiwgImlzRXhwYW5kYWJsZSIsICJoYXNBY3Rpb25zIiwgInJvd1Byb3BzIiwgImNlbGxQcm9wcyIsICJ0YWJsZUNhcHRpb24iLCAicm93SGVhZGVyIiwgInRhYmxlTGF5b3V0Il0pOwoKICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWVzKCdldWlCYXNpY1RhYmxlJywgewogICAgICAgICdldWlCYXNpY1RhYmxlLWxvYWRpbmcnOiBsb2FkaW5nCiAgICAgIH0sIGNsYXNzTmFtZSk7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMucmVuZGVyVGFibGUoKTsKICAgICAgdmFyIHBhZ2luYXRpb25CYXIgPSB0aGlzLnJlbmRlclBhZ2luYXRpb25CYXIoKTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBfZXh0ZW5kcyh7CiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc2VzCiAgICAgIH0sIHJlc3QpLCB0YWJsZSwgcGFnaW5hdGlvbkJhcik7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyVGFibGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRhYmxlKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcywKICAgICAgICAgIGNvbXByZXNzZWQgPSBfdGhpcyRwcm9wczMuY29tcHJlc3NlZCwKICAgICAgICAgIHJlc3BvbnNpdmUgPSBfdGhpcyRwcm9wczMucmVzcG9uc2l2ZSwKICAgICAgICAgIHRhYmxlTGF5b3V0ID0gX3RoaXMkcHJvcHMzLnRhYmxlTGF5b3V0OwogICAgICB2YXIgbW9iaWxlSGVhZGVyID0gcmVzcG9uc2l2ZSA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlSGVhZGVyTW9iaWxlLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlGbGV4R3JvdXAsIHsKICAgICAgICByZXNwb25zaXZlOiBmYWxzZSwKICAgICAgICBqdXN0aWZ5Q29udGVudDogInNwYWNlQmV0d2VlbiIsCiAgICAgICAgYWxpZ25JdGVtczogImJhc2VsaW5lIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIHRoaXMucmVuZGVyU2VsZWN0QWxsKHRydWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCB0aGlzLnJlbmRlclRhYmxlTW9iaWxlU29ydCgpKSkpIDogdW5kZWZpbmVkOwogICAgICB2YXIgY2FwdGlvbiA9IHRoaXMucmVuZGVyVGFibGVDYXB0aW9uKCk7CiAgICAgIHZhciBoZWFkID0gdGhpcy5yZW5kZXJUYWJsZUhlYWQoKTsKICAgICAgdmFyIGJvZHkgPSB0aGlzLnJlbmRlclRhYmxlQm9keSgpOwogICAgICB2YXIgZm9vdGVyID0gdGhpcy5yZW5kZXJUYWJsZUZvb3RlcigpOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIG1vYmlsZUhlYWRlciwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpVGFibGUsIHsKICAgICAgICBpZDogdGhpcy50YWJsZUlkLAogICAgICAgIHRhYmxlTGF5b3V0OiB0YWJsZUxheW91dCwKICAgICAgICByZXNwb25zaXZlOiByZXNwb25zaXZlLAogICAgICAgIGNvbXByZXNzZWQ6IGNvbXByZXNzZWQKICAgICAgfSwgY2FwdGlvbiwgaGVhZCwgYm9keSwgZm9vdGVyKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyVGFibGVNb2JpbGVTb3J0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUYWJsZU1vYmlsZVNvcnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzNCA9IHRoaXMucHJvcHMsCiAgICAgICAgICBjb2x1bW5zID0gX3RoaXMkcHJvcHM0LmNvbHVtbnMsCiAgICAgICAgICBzb3J0aW5nID0gX3RoaXMkcHJvcHM0LnNvcnRpbmc7CiAgICAgIHZhciBpdGVtcyA9IFtdOwoKICAgICAgaWYgKCFzb3J0aW5nKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uLCBpbmRleCkgewogICAgICAgIGlmIChjb2x1bW4uZmllbGQgJiYgc29ydGluZy5zb3J0ICYmICEhc29ydGluZy5lbmFibGVBbGxDb2x1bW5zICYmIGNvbHVtbi5zb3J0YWJsZSA9PSBudWxsKSB7CiAgICAgICAgICBjb2x1bW4gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNvbHVtbiksIHt9LCB7CiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICghY29sdW1uLnNvcnRhYmxlIHx8IGNvbHVtbi5oaWRlRm9yTW9iaWxlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgc29ydERpcmVjdGlvbiA9IF90aGlzMi5yZXNvbHZlQ29sdW1uU29ydERpcmVjdGlvbihjb2x1bW4pOwoKICAgICAgICBpdGVtcy5wdXNoKHsKICAgICAgICAgIG5hbWU6IGNvbHVtbi5uYW1lLAogICAgICAgICAga2V5OiAiX2RhdGFfc18iLmNvbmNhdChjb2x1bW4uZmllbGQsICJfIikuY29uY2F0KGluZGV4KSwKICAgICAgICAgIG9uU29ydDogX3RoaXMyLnJlc29sdmVDb2x1bW5PblNvcnQoY29sdW1uKSwKICAgICAgICAgIGlzU29ydGVkOiAhIXNvcnREaXJlY3Rpb24sCiAgICAgICAgICBpc1NvcnRBc2NlbmRpbmc6IHNvcnREaXJlY3Rpb24gPyBTb3J0RGlyZWN0aW9uLmlzQXNjKHNvcnREaXJlY3Rpb24pIDogdW5kZWZpbmVkCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gaXRlbXMubGVuZ3RoID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpVGFibGVTb3J0TW9iaWxlLCB7CiAgICAgICAgaXRlbXM6IGl0ZW1zCiAgICAgIH0pIDogbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJUYWJsZUNhcHRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRhYmxlQ2FwdGlvbigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsCiAgICAgICAgICBpdGVtcyA9IF90aGlzJHByb3BzNS5pdGVtcywKICAgICAgICAgIHBhZ2luYXRpb24gPSBfdGhpcyRwcm9wczUucGFnaW5hdGlvbiwKICAgICAgICAgIHRhYmxlQ2FwdGlvbiA9IF90aGlzJHByb3BzNS50YWJsZUNhcHRpb247CiAgICAgIHZhciBjYXB0aW9uRWxlbWVudDsKCiAgICAgIGlmICh0YWJsZUNhcHRpb24pIHsKICAgICAgICBpZiAocGFnaW5hdGlvbikgewogICAgICAgICAgY2FwdGlvbkVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlJMThuLCB7CiAgICAgICAgICAgIHRva2VuOiAiZXVpQmFzaWNUYWJsZS50YWJsZUNhcHRpb25XaXRoUGFnaW5hdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHQ6ICJ7dGFibGVDYXB0aW9ufTsgUGFnZSB7cGFnZX0gb2Yge3BhZ2VDb3VudH0uIiwKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgdGFibGVDYXB0aW9uOiB0YWJsZUNhcHRpb24sCiAgICAgICAgICAgICAgcGFnZTogcGFnaW5hdGlvbi5wYWdlSW5kZXggKyAxLAogICAgICAgICAgICAgIHBhZ2VDb3VudDogTWF0aC5jZWlsKHBhZ2luYXRpb24udG90YWxJdGVtQ291bnQgLyBwYWdpbmF0aW9uLnBhZ2VTaXplKQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FwdGlvbkVsZW1lbnQgPSB0YWJsZUNhcHRpb247CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChwYWdpbmF0aW9uKSB7CiAgICAgICAgICBpZiAocGFnaW5hdGlvbi50b3RhbEl0ZW1Db3VudCA+IDApIHsKICAgICAgICAgICAgY2FwdGlvbkVsZW1lbnQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlJMThuLCB7CiAgICAgICAgICAgICAgdG9rZW46ICJldWlCYXNpY1RhYmxlLnRhYmxlQXV0b0NhcHRpb25XaXRoUGFnaW5hdGlvbiIsCiAgICAgICAgICAgICAgZGVmYXVsdDogIlRoaXMgdGFibGUgY29udGFpbnMge2l0ZW1Db3VudH0gcm93cyBvdXQgb2Yge3RvdGFsSXRlbUNvdW50fSByb3dzOyBQYWdlIHtwYWdlfSBvZiB7cGFnZUNvdW50fS4iLAogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgdG90YWxJdGVtQ291bnQ6IHBhZ2luYXRpb24udG90YWxJdGVtQ291bnQsCiAgICAgICAgICAgICAgICBpdGVtQ291bnQ6IGl0ZW1zLmxlbmd0aCwKICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2luYXRpb24ucGFnZUluZGV4ICsgMSwKICAgICAgICAgICAgICAgIHBhZ2VDb3VudDogTWF0aC5jZWlsKHBhZ2luYXRpb24udG90YWxJdGVtQ291bnQgLyBwYWdpbmF0aW9uLnBhZ2VTaXplKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYXB0aW9uRWxlbWVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUkxOG4sIHsKICAgICAgICAgICAgICB0b2tlbjogImV1aUJhc2ljVGFibGUudGFibGVTaW1wbGVBdXRvQ2FwdGlvbldpdGhQYWdpbmF0aW9uIiwKICAgICAgICAgICAgICBkZWZhdWx0OiAiVGhpcyB0YWJsZSBjb250YWlucyB7aXRlbUNvdW50fSByb3dzOyBQYWdlIHtwYWdlfSBvZiB7cGFnZUNvdW50fS4iLAogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgaXRlbUNvdW50OiBpdGVtcy5sZW5ndGgsCiAgICAgICAgICAgICAgICBwYWdlOiBwYWdpbmF0aW9uLnBhZ2VJbmRleCArIDEsCiAgICAgICAgICAgICAgICBwYWdlQ291bnQ6IE1hdGguY2VpbChwYWdpbmF0aW9uLnRvdGFsSXRlbUNvdW50IC8gcGFnaW5hdGlvbi5wYWdlU2l6ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYXB0aW9uRWxlbWVudCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUkxOG4sIHsKICAgICAgICAgICAgdG9rZW46ICJldWlCYXNpY1RhYmxlLnRhYmxlQXV0b0NhcHRpb25XaXRob3V0UGFnaW5hdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHQ6ICJUaGlzIHRhYmxlIGNvbnRhaW5zIHtpdGVtQ291bnR9IHJvd3MuIiwKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgaXRlbUNvdW50OiBpdGVtcy5sZW5ndGgKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpU2NyZWVuUmVhZGVyT25seSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImNhcHRpb24iLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZXVpVGFibGVDYXB0aW9uIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlEZWxheVJlbmRlciwgbnVsbCwgY2FwdGlvbkVsZW1lbnQpKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyVGFibGVIZWFkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUYWJsZUhlYWQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzNiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBjb2x1bW5zID0gX3RoaXMkcHJvcHM2LmNvbHVtbnMsCiAgICAgICAgICBzZWxlY3Rpb24gPSBfdGhpcyRwcm9wczYuc2VsZWN0aW9uOwogICAgICB2YXIgaGVhZGVycyA9IFtdOwoKICAgICAgaWYgKHNlbGVjdGlvbikgewogICAgICAgIGhlYWRlcnMucHVzaCggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpVGFibGVIZWFkZXJDZWxsQ2hlY2tib3gsIHsKICAgICAgICAgIGtleTogIl9zZWxlY3Rpb25fY29sdW1uX2giCiAgICAgICAgfSwgdGhpcy5yZW5kZXJTZWxlY3RBbGwoZmFsc2UpKSk7CiAgICAgIH0KCiAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uLCBpbmRleCkgewogICAgICAgIHZhciBfcmVmNSA9IGNvbHVtbiwKICAgICAgICAgICAgZmllbGQgPSBfcmVmNS5maWVsZCwKICAgICAgICAgICAgd2lkdGggPSBfcmVmNS53aWR0aCwKICAgICAgICAgICAgbmFtZSA9IF9yZWY1Lm5hbWUsCiAgICAgICAgICAgIGFsaWduID0gX3JlZjUuYWxpZ24sCiAgICAgICAgICAgIGRhdGFUeXBlID0gX3JlZjUuZGF0YVR5cGUsCiAgICAgICAgICAgIHNvcnRhYmxlID0gX3JlZjUuc29ydGFibGUsCiAgICAgICAgICAgIG1vYmlsZU9wdGlvbnMgPSBfcmVmNS5tb2JpbGVPcHRpb25zLAogICAgICAgICAgICBpc01vYmlsZUhlYWRlciA9IF9yZWY1LmlzTW9iaWxlSGVhZGVyLAogICAgICAgICAgICBoaWRlRm9yTW9iaWxlID0gX3JlZjUuaGlkZUZvck1vYmlsZSwKICAgICAgICAgICAgcmVhZE9ubHkgPSBfcmVmNS5yZWFkT25seSwKICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBfcmVmNS5kZXNjcmlwdGlvbjsKCiAgICAgICAgdmFyIGNvbHVtbkFsaWduID0gYWxpZ24gfHwgX3RoaXMzLmdldEFsaWduRm9yRGF0YVR5cGUoZGF0YVR5cGUpOyAvLyBhY3Rpb25zIGNvbHVtbgoKCiAgICAgICAgaWYgKGNvbHVtbi5hY3Rpb25zKSB7CiAgICAgICAgICBoZWFkZXJzLnB1c2goIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlSGVhZGVyQ2VsbCwgewogICAgICAgICAgICBrZXk6ICJfYWN0aW9uc19oXyIuY29uY2F0KGluZGV4KSwKICAgICAgICAgICAgYWxpZ246ICJyaWdodCIsCiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCwKICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLAogICAgICAgICAgICBtb2JpbGVPcHRpb25zOiBtb2JpbGVPcHRpb25zCiAgICAgICAgICB9LCBuYW1lKSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBjb21wdXRlZCBjb2x1bW4KCgogICAgICAgIGlmICghY29sdW1uLmZpZWxkKSB7CiAgICAgICAgICB2YXIgX3NvcnRpbmcgPSB7fTsgLy8gY29tcHV0ZWQgY29sdW1ucyBhcmUgb25seSBzb3J0YWJsZSBpZiB0aGVpciBgc29ydGFibGVgIGlzIGEgZnVuY3Rpb24KCiAgICAgICAgICBpZiAoX3RoaXMzLnByb3BzLnNvcnRpbmcgJiYgdHlwZW9mIHNvcnRhYmxlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHZhciBzb3J0RGlyZWN0aW9uID0gX3RoaXMzLnJlc29sdmVDb2x1bW5Tb3J0RGlyZWN0aW9uKGNvbHVtbik7CgogICAgICAgICAgICBfc29ydGluZy5pc1NvcnRlZCA9ICEhc29ydERpcmVjdGlvbjsKICAgICAgICAgICAgX3NvcnRpbmcuaXNTb3J0QXNjZW5kaW5nID0gc29ydERpcmVjdGlvbiA/IFNvcnREaXJlY3Rpb24uaXNBc2Moc29ydERpcmVjdGlvbikgOiB1bmRlZmluZWQ7CiAgICAgICAgICAgIF9zb3J0aW5nLm9uU29ydCA9IF90aGlzMy5yZXNvbHZlQ29sdW1uT25Tb3J0KGNvbHVtbik7CiAgICAgICAgICAgIF9zb3J0aW5nLnJlYWRPbmx5ID0gX3RoaXMzLnByb3BzLnNvcnRpbmcucmVhZE9ubHkgfHwgcmVhZE9ubHk7CiAgICAgICAgICB9CgogICAgICAgICAgaGVhZGVycy5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZUhlYWRlckNlbGwsIF9leHRlbmRzKHsKICAgICAgICAgICAga2V5OiAiX2NvbXB1dGVkX2NvbHVtbl9oXyIuY29uY2F0KGluZGV4KSwKICAgICAgICAgICAgYWxpZ246IGNvbHVtbkFsaWduLAogICAgICAgICAgICB3aWR0aDogd2lkdGgsCiAgICAgICAgICAgIG1vYmlsZU9wdGlvbnM6IG1vYmlsZU9wdGlvbnMsCiAgICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJ0YWJsZUhlYWRlckNlbGxfIi5jb25jYXQobmFtZSwgIl8iKS5jb25jYXQoaW5kZXgpLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgICAgIH0sIF9zb3J0aW5nKSwgbmFtZSkpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gZmllbGQgZGF0YSBjb2x1bW4KCgogICAgICAgIHZhciBzb3J0aW5nID0ge307CgogICAgICAgIGlmIChfdGhpczMucHJvcHMuc29ydGluZykgewogICAgICAgICAgaWYgKF90aGlzMy5wcm9wcy5zb3J0aW5nLnNvcnQgJiYgISFfdGhpczMucHJvcHMuc29ydGluZy5lbmFibGVBbGxDb2x1bW5zICYmIGNvbHVtbi5zb3J0YWJsZSA9PSBudWxsKSB7CiAgICAgICAgICAgIGNvbHVtbiA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29sdW1uKSwge30sIHsKICAgICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgX3JlZjYgPSBjb2x1bW4sCiAgICAgICAgICAgICAgX3NvcnRhYmxlID0gX3JlZjYuc29ydGFibGU7CgogICAgICAgICAgaWYgKF9zb3J0YWJsZSkgewogICAgICAgICAgICB2YXIgX3NvcnREaXJlY3Rpb24gPSBfdGhpczMucmVzb2x2ZUNvbHVtblNvcnREaXJlY3Rpb24oY29sdW1uKTsKCiAgICAgICAgICAgIHNvcnRpbmcuaXNTb3J0ZWQgPSAhIV9zb3J0RGlyZWN0aW9uOwogICAgICAgICAgICBzb3J0aW5nLmlzU29ydEFzY2VuZGluZyA9IF9zb3J0RGlyZWN0aW9uID8gU29ydERpcmVjdGlvbi5pc0FzYyhfc29ydERpcmVjdGlvbikgOiB1bmRlZmluZWQ7CiAgICAgICAgICAgIHNvcnRpbmcub25Tb3J0ID0gX3RoaXMzLnJlc29sdmVDb2x1bW5PblNvcnQoY29sdW1uKTsKICAgICAgICAgICAgc29ydGluZy5yZWFkT25seSA9IF90aGlzMy5wcm9wcy5zb3J0aW5nLnJlYWRPbmx5IHx8IHJlYWRPbmx5OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZUhlYWRlckNlbGwsIF9leHRlbmRzKHsKICAgICAgICAgIGtleTogIl9kYXRhX2hfIi5jb25jYXQoZmllbGQsICJfIikuY29uY2F0KGluZGV4KSwKICAgICAgICAgIGFsaWduOiBjb2x1bW5BbGlnbiwKICAgICAgICAgIHdpZHRoOiB3aWR0aCwKICAgICAgICAgIGlzTW9iaWxlSGVhZGVyOiBpc01vYmlsZUhlYWRlciwKICAgICAgICAgIGhpZGVGb3JNb2JpbGU6IGhpZGVGb3JNb2JpbGUsCiAgICAgICAgICBtb2JpbGVPcHRpb25zOiBtb2JpbGVPcHRpb25zLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInRhYmxlSGVhZGVyQ2VsbF8iLmNvbmNhdChmaWVsZCwgIl8iKS5jb25jYXQoaW5kZXgpLAogICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgICAgfSwgc29ydGluZyksIG5hbWUpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZUhlYWRlciwgbnVsbCwgaGVhZGVycyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyVGFibGVGb290ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRhYmxlRm9vdGVyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHM3ID0gdGhpcy5wcm9wcywKICAgICAgICAgIGl0ZW1zID0gX3RoaXMkcHJvcHM3Lml0ZW1zLAogICAgICAgICAgY29sdW1ucyA9IF90aGlzJHByb3BzNy5jb2x1bW5zLAogICAgICAgICAgcGFnaW5hdGlvbiA9IF90aGlzJHByb3BzNy5wYWdpbmF0aW9uLAogICAgICAgICAgc2VsZWN0aW9uID0gX3RoaXMkcHJvcHM3LnNlbGVjdGlvbjsKICAgICAgdmFyIGZvb3RlcnMgPSBbXTsKICAgICAgdmFyIGhhc0RlZmluZWRGb290ZXIgPSBmYWxzZTsKCiAgICAgIGlmIChzZWxlY3Rpb24pIHsKICAgICAgICAvLyBDcmVhdGUgYW4gZW1wdHkgY2VsbCB0byBjb21wZW5zYXRlIGZvciBhZGRpdGlvbmFsIHNlbGVjdGlvbiBjb2x1bW4KICAgICAgICBmb290ZXJzLnB1c2goIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlRm9vdGVyQ2VsbCwgewogICAgICAgICAga2V5OiAiX3NlbGVjdGlvbl9jb2x1bW5fZiIKICAgICAgICB9LCB1bmRlZmluZWQpKTsKICAgICAgfQoKICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHsKICAgICAgICB2YXIgZm9vdGVyID0gZ2V0Q29sdW1uRm9vdGVyKGNvbHVtbiwgewogICAgICAgICAgaXRlbXM6IGl0ZW1zLAogICAgICAgICAgcGFnaW5hdGlvbjogcGFnaW5hdGlvbgogICAgICAgIH0pOwogICAgICAgIHZhciBfcmVmNyA9IGNvbHVtbiwKICAgICAgICAgICAgbW9iaWxlT3B0aW9ucyA9IF9yZWY3Lm1vYmlsZU9wdGlvbnMsCiAgICAgICAgICAgIGlzTW9iaWxlSGVhZGVyID0gX3JlZjcuaXNNb2JpbGVIZWFkZXIsCiAgICAgICAgICAgIGZpZWxkID0gX3JlZjcuZmllbGQsCiAgICAgICAgICAgIGFsaWduID0gX3JlZjcuYWxpZ247CgogICAgICAgIGlmIChtb2JpbGVPcHRpb25zICYmIG1vYmlsZU9wdGlvbnMub25seSB8fCBpc01vYmlsZUhlYWRlcikgewogICAgICAgICAgcmV0dXJuOyAvLyBleGNsdWRlIGNvbHVtbnMgdGhhdCBvbmx5IGV4aXN0IGZvciBtb2JpbGUgaGVhZGVycwogICAgICAgIH0KCiAgICAgICAgaWYgKGZvb3RlcikgewogICAgICAgICAgZm9vdGVycy5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZUZvb3RlckNlbGwsIHsKICAgICAgICAgICAga2V5OiAiZm9vdGVyXyIuY29uY2F0KGZpZWxkLCAiXyIpLmNvbmNhdChmb290ZXJzLmxlbmd0aCAtIDEpLAogICAgICAgICAgICBhbGlnbjogYWxpZ24KICAgICAgICAgIH0sIGZvb3RlcikpOwogICAgICAgICAgaGFzRGVmaW5lZEZvb3RlciA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEZvb3RlciBpcyB1bmRlZmluZWQsIHNvIGNyZWF0ZSBhbiBlbXB0eSBjZWxsIHRvIHByZXNlcnZlIGxheW91dAogICAgICAgICAgZm9vdGVycy5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZUZvb3RlckNlbGwsIHsKICAgICAgICAgICAga2V5OiAiZm9vdGVyX2VtcHR5XyIuY29uY2F0KGZvb3RlcnMubGVuZ3RoIC0gMSksCiAgICAgICAgICAgIGFsaWduOiBhbGlnbgogICAgICAgICAgfSwgdW5kZWZpbmVkKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGZvb3RlcnMubGVuZ3RoICYmIGhhc0RlZmluZWRGb290ZXIgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZUZvb3RlciwgbnVsbCwgZm9vdGVycykgOiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlclRhYmxlQm9keSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGVCb2R5KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnByb3BzLmVycm9yKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRXJyb3JCb2R5KHRoaXMucHJvcHMuZXJyb3IpOwogICAgICB9CgogICAgICB2YXIgaXRlbXMgPSB0aGlzLnByb3BzLml0ZW1zOwoKICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiB0aGlzLnJlbmRlckVtcHR5Qm9keSgpOwogICAgICB9CgogICAgICB2YXIgcm93cyA9IGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAvLyBpZiB0aGVyZSdzIHBhZ2luYXRpb24gdGhlIGl0ZW0ncyBpbmRleCBtdXN0IGJlIGFkanVzdGVkIHRvIHRoZSB3aGVyZSBpdCBpcyBpbiB0aGUgd2hvbGUgZGF0YXNldAogICAgICAgIHZhciB0YWJsZUl0ZW1JbmRleCA9IGhhc1BhZ2luYXRpb24oX3RoaXM0LnByb3BzKSA/IF90aGlzNC5wcm9wcy5wYWdpbmF0aW9uLnBhZ2VJbmRleCAqIF90aGlzNC5wcm9wcy5wYWdpbmF0aW9uLnBhZ2VTaXplICsgaW5kZXggOiBpbmRleDsKICAgICAgICByZXR1cm4gX3RoaXM0LnJlbmRlckl0ZW1Sb3coaXRlbSwgdGFibGVJdGVtSW5kZXgpOwogICAgICB9KTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlQm9keSwgewogICAgICAgIGJvZHlSZWY6IHRoaXMuc2V0VGJvZHkKICAgICAgfSwgcm93cyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyRXJyb3JCb2R5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFcnJvckJvZHkoZXJyb3IpIHsKICAgICAgdmFyIGNvbFNwYW4gPSB0aGlzLnByb3BzLmNvbHVtbnMubGVuZ3RoICsgKHRoaXMucHJvcHMuc2VsZWN0aW9uID8gMSA6IDApOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpVGFibGVCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZVJvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpVGFibGVSb3dDZWxsLCB7CiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIGNvbFNwYW46IGNvbFNwYW4sCiAgICAgICAgaXNNb2JpbGVGdWxsV2lkdGg6IHRydWUKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpSWNvbiwgewogICAgICAgIHR5cGU6ICJtaW51c0luQ2lyY2xlIiwKICAgICAgICBjb2xvcjogImRhbmdlciIKICAgICAgfSksICIgIiwgZXJyb3IpKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyRW1wdHlCb2R5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFbXB0eUJvZHkoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczggPSB0aGlzLnByb3BzLAogICAgICAgICAgY29sdW1ucyA9IF90aGlzJHByb3BzOC5jb2x1bW5zLAogICAgICAgICAgc2VsZWN0aW9uID0gX3RoaXMkcHJvcHM4LnNlbGVjdGlvbiwKICAgICAgICAgIG5vSXRlbXNNZXNzYWdlID0gX3RoaXMkcHJvcHM4Lm5vSXRlbXNNZXNzYWdlOwogICAgICB2YXIgY29sU3BhbiA9IGNvbHVtbnMubGVuZ3RoICsgKHNlbGVjdGlvbiA/IDEgOiAwKTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpVGFibGVSb3csIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlUm93Q2VsbCwgewogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICBjb2xTcGFuOiBjb2xTcGFuLAogICAgICAgIGlzTW9iaWxlRnVsbFdpZHRoOiB0cnVlCiAgICAgIH0sIG5vSXRlbXNNZXNzYWdlKSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckl0ZW1Sb3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckl0ZW1Sb3coaXRlbSwgcm93SW5kZXgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkcHJvcHM5ID0gdGhpcy5wcm9wcywKICAgICAgICAgIGNvbHVtbnMgPSBfdGhpcyRwcm9wczkuY29sdW1ucywKICAgICAgICAgIHNlbGVjdGlvbiA9IF90aGlzJHByb3BzOS5zZWxlY3Rpb24sCiAgICAgICAgICBpc1NlbGVjdGFibGUgPSBfdGhpcyRwcm9wczkuaXNTZWxlY3RhYmxlLAogICAgICAgICAgaGFzQWN0aW9ucyA9IF90aGlzJHByb3BzOS5oYXNBY3Rpb25zLAogICAgICAgICAgcm93SGVhZGVyID0gX3RoaXMkcHJvcHM5LnJvd0hlYWRlciwKICAgICAgICAgIF90aGlzJHByb3BzOSRpdGVtSWRUbyA9IF90aGlzJHByb3BzOS5pdGVtSWRUb0V4cGFuZGVkUm93TWFwLAogICAgICAgICAgaXRlbUlkVG9FeHBhbmRlZFJvd01hcCA9IF90aGlzJHByb3BzOSRpdGVtSWRUbyA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyRwcm9wczkkaXRlbUlkVG8sCiAgICAgICAgICBpc0V4cGFuZGFibGUgPSBfdGhpcyRwcm9wczkuaXNFeHBhbmRhYmxlOwogICAgICB2YXIgY2VsbHMgPSBbXTsKICAgICAgdmFyIGl0ZW1JZENhbGxiYWNrID0gdGhpcy5wcm9wcy5pdGVtSWQ7CiAgICAgIHZhciBpdGVtSWQgPSBnZXRJdGVtSWQoaXRlbSwgaXRlbUlkQ2FsbGJhY2spICE9IG51bGwgPyBnZXRJdGVtSWQoaXRlbSwgaXRlbUlkQ2FsbGJhY2spIDogcm93SW5kZXg7CiAgICAgIHZhciBzZWxlY3RlZCA9ICFzZWxlY3Rpb24gPyBmYWxzZSA6IHRoaXMuc3RhdGUuc2VsZWN0aW9uICYmICEhdGhpcy5zdGF0ZS5zZWxlY3Rpb24uZmluZChmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7CiAgICAgICAgcmV0dXJuIGdldEl0ZW1JZChzZWxlY3RlZEl0ZW0sIGl0ZW1JZENhbGxiYWNrKSA9PT0gaXRlbUlkOwogICAgICB9KTsKICAgICAgdmFyIGNhbGN1bGF0ZWRIYXNTZWxlY3Rpb247CgogICAgICBpZiAoc2VsZWN0aW9uKSB7CiAgICAgICAgY2VsbHMucHVzaCh0aGlzLnJlbmRlckl0ZW1TZWxlY3Rpb25DZWxsKGl0ZW1JZCwgaXRlbSwgc2VsZWN0ZWQpKTsKICAgICAgICBjYWxjdWxhdGVkSGFzU2VsZWN0aW9uID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIGNhbGN1bGF0ZWRIYXNBY3Rpb25zOwogICAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbiwgY29sdW1uSW5kZXgpIHsKICAgICAgICBpZiAoY29sdW1uLmFjdGlvbnMpIHsKICAgICAgICAgIGNlbGxzLnB1c2goX3RoaXM1LnJlbmRlckl0ZW1BY3Rpb25zQ2VsbChpdGVtSWQsIGl0ZW0sIGNvbHVtbiwgY29sdW1uSW5kZXgpKTsKICAgICAgICAgIGNhbGN1bGF0ZWRIYXNBY3Rpb25zID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGNvbHVtbi5maWVsZCkgewogICAgICAgICAgdmFyIGZpZWxkRGF0YUNvbHVtbiA9IGNvbHVtbjsKICAgICAgICAgIGNlbGxzLnB1c2goX3RoaXM1LnJlbmRlckl0ZW1GaWVsZERhdGFDZWxsKGl0ZW1JZCwgaXRlbSwgY29sdW1uLCBjb2x1bW5JbmRleCwgZmllbGREYXRhQ29sdW1uLmZpZWxkID09PSByb3dIZWFkZXIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2VsbHMucHVzaChfdGhpczUucmVuZGVySXRlbUNvbXB1dGVkQ2VsbChpdGVtSWQsIGl0ZW0sIGNvbHVtbiwgY29sdW1uSW5kZXgpKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBPY2N1cHkgZnVsbCB3aWR0aCBvZiB0YWJsZSwgdGFraW5nIGNoZWNrYm94ICYgbW9iaWxlIG9ubHkgY29sdW1ucyBpbnRvIGFjY291bnQuCgogICAgICB2YXIgZXhwYW5kZWRSb3dDb2xTcGFuID0gc2VsZWN0aW9uID8gY29sdW1ucy5sZW5ndGggKyAxIDogY29sdW1ucy5sZW5ndGg7CiAgICAgIHZhciBtb2JpbGVPbmx5Q29scyA9IGNvbHVtbnMucmVkdWNlKGZ1bmN0aW9uIChudW0sIGNvbHVtbikgewogICAgICAgIGlmIChjb2x1bW4ubW9iaWxlT3B0aW9ucyAmJiBjb2x1bW4ubW9iaWxlT3B0aW9ucy5vbmx5KSB7CiAgICAgICAgICByZXR1cm4gbnVtICsgMTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjb2x1bW4uaXNNb2JpbGVIZWFkZXIgPyBudW0gKyAxIDogbnVtICsgMDsgLy8gQldDIG9ubHkKICAgICAgfSwgMCk7CiAgICAgIGV4cGFuZGVkUm93Q29sU3BhbiA9IGV4cGFuZGVkUm93Q29sU3BhbiAtIG1vYmlsZU9ubHlDb2xzOyAvLyBXZSdsbCB1c2UgdGhlIElEIHRvIGFzc29jaWF0ZSB0aGUgZXhwYW5kZWQgcm93IHdpdGggdGhlIG9yaWdpbmFsLgoKICAgICAgdmFyIGhhc0V4cGFuZGVkUm93ID0gaXRlbUlkVG9FeHBhbmRlZFJvd01hcC5oYXNPd25Qcm9wZXJ0eShpdGVtSWQpOwogICAgICB2YXIgZXhwYW5kZWRSb3dJZCA9IGhhc0V4cGFuZGVkUm93ID8gInJvd18iLmNvbmNhdChpdGVtSWQsICJfZXhwYW5zaW9uIikgOiB1bmRlZmluZWQ7CiAgICAgIHZhciBleHBhbmRlZFJvdyA9IGhhc0V4cGFuZGVkUm93ID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpVGFibGVSb3csIHsKICAgICAgICBpZDogZXhwYW5kZWRSb3dJZCwKICAgICAgICBpc0V4cGFuZGVkUm93OiB0cnVlLAogICAgICAgIGlzU2VsZWN0YWJsZTogaXNTZWxlY3RhYmxlCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlUm93Q2VsbCwgewogICAgICAgIGNvbFNwYW46IGV4cGFuZGVkUm93Q29sU3BhbiwKICAgICAgICB0ZXh0T25seTogZmFsc2UKICAgICAgfSwgaXRlbUlkVG9FeHBhbmRlZFJvd01hcFtpdGVtSWRdKSkgOiB1bmRlZmluZWQ7CiAgICAgIHZhciByb3dQcm9wc0NhbGxiYWNrID0gdGhpcy5wcm9wcy5yb3dQcm9wczsKICAgICAgdmFyIHJvd1Byb3BzID0gZ2V0Um93UHJvcHMoaXRlbSwgcm93UHJvcHNDYWxsYmFjayk7CiAgICAgIHZhciByb3cgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlUYWJsZVJvdywgX2V4dGVuZHMoewogICAgICAgICJhcmlhLW93bnMiOiBleHBhbmRlZFJvd0lkLAogICAgICAgIGlzU2VsZWN0YWJsZTogaXNTZWxlY3RhYmxlID09IG51bGwgPyBjYWxjdWxhdGVkSGFzU2VsZWN0aW9uIDogaXNTZWxlY3RhYmxlLAogICAgICAgIGlzU2VsZWN0ZWQ6IHNlbGVjdGVkLAogICAgICAgIGhhc0FjdGlvbnM6IGhhc0FjdGlvbnMgPT0gbnVsbCA/IGNhbGN1bGF0ZWRIYXNBY3Rpb25zIDogaGFzQWN0aW9ucywKICAgICAgICBpc0V4cGFuZGFibGU6IGlzRXhwYW5kYWJsZQogICAgICB9LCByb3dQcm9wcyksIGNlbGxzKTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCB7CiAgICAgICAga2V5OiAicm93XyIuY29uY2F0KGl0ZW1JZCkKICAgICAgfSwgcm93UHJvcHMub25DbGljayA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUtleWJvYXJkQWNjZXNzaWJsZSwgbnVsbCwgcm93KSA6IHJvdywgZXhwYW5kZWRSb3cpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckl0ZW1TZWxlY3Rpb25DZWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJJdGVtU2VsZWN0aW9uQ2VsbChpdGVtSWQsIGl0ZW0sIHNlbGVjdGVkKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIHNlbGVjdGlvbiA9IHRoaXMucHJvcHMuc2VsZWN0aW9uOwogICAgICB2YXIga2V5ID0gIl9zZWxlY3Rpb25fY29sdW1uXyIuY29uY2F0KGl0ZW1JZCk7CiAgICAgIHZhciBjaGVja2VkID0gc2VsZWN0ZWQ7CiAgICAgIHZhciBkaXNhYmxlZCA9IHNlbGVjdGlvbi5zZWxlY3RhYmxlICYmICFzZWxlY3Rpb24uc2VsZWN0YWJsZShpdGVtKTsKICAgICAgdmFyIHRpdGxlID0gc2VsZWN0aW9uLnNlbGVjdGFibGVNZXNzYWdlICYmIHNlbGVjdGlvbi5zZWxlY3RhYmxlTWVzc2FnZSghZGlzYWJsZWQsIGl0ZW0pOwoKICAgICAgdmFyIG9uQ2hhbmdlID0gZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICAgIF90aGlzNi5jaGFuZ2VTZWxlY3Rpb24oW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfdGhpczYuc3RhdGUuc2VsZWN0aW9uKSwgW2l0ZW1dKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBpdGVtSWRDYWxsYmFjayA9IF90aGlzNi5wcm9wcy5pdGVtSWQ7CgogICAgICAgICAgX3RoaXM2LmNoYW5nZVNlbGVjdGlvbihfdGhpczYuc3RhdGUuc2VsZWN0aW9uLnJlZHVjZShmdW5jdGlvbiAoc2VsZWN0aW9uLCBzZWxlY3RlZEl0ZW0pIHsKICAgICAgICAgICAgaWYgKGdldEl0ZW1JZChzZWxlY3RlZEl0ZW0sIGl0ZW1JZENhbGxiYWNrKSAhPT0gaXRlbUlkKSB7CiAgICAgICAgICAgICAgc2VsZWN0aW9uLnB1c2goc2VsZWN0ZWRJdGVtKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbjsKICAgICAgICAgIH0sIFtdKSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlUm93Q2VsbENoZWNrYm94LCB7CiAgICAgICAga2V5OiBrZXkKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpSTE4biwgewogICAgICAgIHRva2VuOiAiZXVpQmFzaWNUYWJsZS5zZWxlY3RUaGlzUm93IiwKICAgICAgICBkZWZhdWx0OiAiU2VsZWN0IHRoaXMgcm93IgogICAgICB9LCBmdW5jdGlvbiAoc2VsZWN0VGhpc1JvdykgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlDaGVja2JveCwgewogICAgICAgICAgaWQ6ICIiLmNvbmNhdChrZXksICItY2hlY2tib3giKSwKICAgICAgICAgIHR5cGU6ICJpbkxpc3QiLAogICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgY2hlY2tlZDogY2hlY2tlZCwKICAgICAgICAgIG9uQ2hhbmdlOiBvbkNoYW5nZSwKICAgICAgICAgIHRpdGxlOiB0aXRsZSB8fCBzZWxlY3RUaGlzUm93LAogICAgICAgICAgImFyaWEtbGFiZWwiOiB0aXRsZSB8fCBzZWxlY3RUaGlzUm93LAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImNoZWNrYm94U2VsZWN0Um93LSIuY29uY2F0KGl0ZW1JZCkKICAgICAgICB9KTsKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckl0ZW1BY3Rpb25zQ2VsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySXRlbUFjdGlvbnNDZWxsKGl0ZW1JZCwgaXRlbSwgY29sdW1uLCBjb2x1bW5JbmRleCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBhY3Rpb25FbmFibGVkID0gZnVuY3Rpb24gYWN0aW9uRW5hYmxlZChhY3Rpb24pIHsKICAgICAgICByZXR1cm4gX3RoaXM3LnN0YXRlLnNlbGVjdGlvbi5sZW5ndGggPT09IDAgJiYgKCFhY3Rpb24uZW5hYmxlZCB8fCBhY3Rpb24uZW5hYmxlZChpdGVtKSk7CiAgICAgIH07CgogICAgICB2YXIgYWN0dWFsQWN0aW9ucyA9IGNvbHVtbi5hY3Rpb25zLmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgcmV0dXJuICFhY3Rpb24uYXZhaWxhYmxlIHx8IGFjdGlvbi5hdmFpbGFibGUoaXRlbSk7CiAgICAgIH0pOwoKICAgICAgaWYgKGFjdHVhbEFjdGlvbnMubGVuZ3RoID4gMikgewogICAgICAgIC8vIGlmIGFueSBvZiB0aGUgYWN0aW9ucyBgaXNQcmltYXJ5YCwgYWRkIHRoZW0gaW5saW5lIGFzIHdlbGwsIGJ1dCBvbmx5IHRoZSBmaXJzdCAyCiAgICAgICAgdmFyIHByaW1hcnlBY3Rpb25zID0gYWN0dWFsQWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKG8pIHsKICAgICAgICAgIHJldHVybiBvLmlzUHJpbWFyeTsKICAgICAgICB9KTsKICAgICAgICBhY3R1YWxBY3Rpb25zID0gcHJpbWFyeUFjdGlvbnMuc2xpY2UoMCwgMik7IC8vIGlmIHdlIGhhdmUgbW9yZSB0aGFuIDEgYWN0aW9uLCB3ZSBkb24ndCBzaG93IHRoZW0gYWxsIGluIHRoZSBjZWxsLCBpbnN0ZWFkIHdlCiAgICAgICAgLy8gcHV0IHRoZW0gYWxsIGluIGEgcG9wb3ZlciB0b29sLiBUaGlzIGVmZmVjdGl2ZWx5IG1lYW5zIHdlIGNhbiBvbmx5IGhhdmUgYSBtYXhpbXVtCiAgICAgICAgLy8gb2Ygb25lIHRvb2wgcGVyIHJvdyAoaXQncyBlaXRoZXIgYW5kIG5vcm1hbCBhY3Rpb24sIG9yIGl0J3MgYSBwb3BvdmVyIHRoYXQgc2hvd3MgbXVsdGlwbGUgYWN0aW9ucykKICAgICAgICAvLwogICAgICAgIC8vIGhlcmUgd2UgY3JlYXRlIGEgc2luZ2xlIGN1c3RvbSBhY3Rpb24gdGhhdCB0cmlnZ2VycyB0aGUgcG9wb3ZlciB3aXRoIGFsbCB0aGUgY29uZmlndXJlZCBhY3Rpb25zCgogICAgICAgIGFjdHVhbEFjdGlvbnMucHVzaCh7CiAgICAgICAgICBuYW1lOiAnQWxsIGFjdGlvbnMnLAogICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29sbGFwc2VkSXRlbUFjdGlvbnMsIHsKICAgICAgICAgICAgICBhY3Rpb25zOiBjb2x1bW4uYWN0aW9ucywKICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW1JZCwKICAgICAgICAgICAgICBpdGVtOiBpdGVtLAogICAgICAgICAgICAgIGFjdGlvbkVuYWJsZWQ6IGFjdGlvbkVuYWJsZWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciB0b29scyA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV4cGFuZGVkSXRlbUFjdGlvbnMsIHsKICAgICAgICBhY3Rpb25zOiBhY3R1YWxBY3Rpb25zLAogICAgICAgIGl0ZW1JZDogaXRlbUlkLAogICAgICAgIGl0ZW06IGl0ZW0sCiAgICAgICAgYWN0aW9uRW5hYmxlZDogYWN0aW9uRW5hYmxlZAogICAgICB9KTsKICAgICAgdmFyIGtleSA9ICJyZWNvcmRfYWN0aW9uc18iLmNvbmNhdChpdGVtSWQsICJfIikuY29uY2F0KGNvbHVtbkluZGV4KTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlUm93Q2VsbCwgewogICAgICAgIHNob3dPbkhvdmVyOiB0cnVlLAogICAgICAgIGtleToga2V5LAogICAgICAgIGFsaWduOiAicmlnaHQiLAogICAgICAgIHRleHRPbmx5OiBmYWxzZSwKICAgICAgICBoYXNBY3Rpb25zOiB0cnVlCiAgICAgIH0sIHRvb2xzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJJdGVtRmllbGREYXRhQ2VsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySXRlbUZpZWxkRGF0YUNlbGwoaXRlbUlkLCBpdGVtLCBjb2x1bW4sIGNvbHVtbkluZGV4LCBzZXRTY29wZVJvdykgewogICAgICB2YXIgZmllbGQgPSBjb2x1bW4uZmllbGQsCiAgICAgICAgICByZW5kZXIgPSBjb2x1bW4ucmVuZGVyLAogICAgICAgICAgZGF0YVR5cGUgPSBjb2x1bW4uZGF0YVR5cGU7CiAgICAgIHZhciBrZXkgPSAiX2RhdGFfY29sdW1uXyIuY29uY2F0KGZpZWxkLCAiXyIpLmNvbmNhdChpdGVtSWQsICJfIikuY29uY2F0KGNvbHVtbkluZGV4KTsKICAgICAgdmFyIGNvbnRlbnRSZW5kZXJlciA9IHJlbmRlciB8fCB0aGlzLmdldFJlbmRlcmVyRm9yRGF0YVR5cGUoZGF0YVR5cGUpOwogICAgICB2YXIgdmFsdWUgPSBnZXQoaXRlbSwgZmllbGQpOwogICAgICB2YXIgY29udGVudCA9IGNvbnRlbnRSZW5kZXJlcih2YWx1ZSwgaXRlbSk7CiAgICAgIHJldHVybiB0aGlzLnJlbmRlckl0ZW1DZWxsKGl0ZW0sIGNvbHVtbiwga2V5LCBjb250ZW50LCBzZXRTY29wZVJvdyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVySXRlbUNvbXB1dGVkQ2VsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySXRlbUNvbXB1dGVkQ2VsbChpdGVtSWQsIGl0ZW0sIGNvbHVtbiwgY29sdW1uSW5kZXgpIHsKICAgICAgdmFyIHJlbmRlciA9IGNvbHVtbi5yZW5kZXI7CiAgICAgIHZhciBrZXkgPSAiX2NvbXB1dGVkX2NvbHVtbl8iLmNvbmNhdChpdGVtSWQsICJfIikuY29uY2F0KGNvbHVtbkluZGV4KTsKICAgICAgdmFyIGNvbnRlbnRSZW5kZXJlciA9IHJlbmRlciB8fCB0aGlzLmdldFJlbmRlcmVyRm9yRGF0YVR5cGUoKTsKICAgICAgdmFyIGNvbnRlbnQgPSBjb250ZW50UmVuZGVyZXIoaXRlbSk7CiAgICAgIHJldHVybiB0aGlzLnJlbmRlckl0ZW1DZWxsKGl0ZW0sIGNvbHVtbiwga2V5LCBjb250ZW50LCBmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVySXRlbUNlbGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckl0ZW1DZWxsKGl0ZW0sIGNvbHVtbiwga2V5LCBjb250ZW50LCBzZXRTY29wZVJvdykgewogICAgICB2YXIgX3JlZjggPSBjb2x1bW4sCiAgICAgICAgICBhbGlnbiA9IF9yZWY4LmFsaWduLAogICAgICAgICAgcmVuZGVyID0gX3JlZjgucmVuZGVyLAogICAgICAgICAgZGF0YVR5cGUgPSBfcmVmOC5kYXRhVHlwZSwKICAgICAgICAgIGlzRXhwYW5kZXIgPSBfcmVmOC5pc0V4cGFuZGVyLAogICAgICAgICAgdGV4dE9ubHkgPSBfcmVmOC50ZXh0T25seSwKICAgICAgICAgIG5hbWUgPSBfcmVmOC5uYW1lLAogICAgICAgICAgZmllbGQgPSBfcmVmOC5maWVsZCwKICAgICAgICAgIGRlc2NyaXB0aW9uID0gX3JlZjguZGVzY3JpcHRpb24sCiAgICAgICAgICBzb3J0YWJsZSA9IF9yZWY4LnNvcnRhYmxlLAogICAgICAgICAgZm9vdGVyID0gX3JlZjguZm9vdGVyLAogICAgICAgICAgbW9iaWxlT3B0aW9ucyA9IF9yZWY4Lm1vYmlsZU9wdGlvbnMsCiAgICAgICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWY4LCBbImFsaWduIiwgInJlbmRlciIsICJkYXRhVHlwZSIsICJpc0V4cGFuZGVyIiwgInRleHRPbmx5IiwgIm5hbWUiLCAiZmllbGQiLCAiZGVzY3JpcHRpb24iLCAic29ydGFibGUiLCAiZm9vdGVyIiwgIm1vYmlsZU9wdGlvbnMiXSk7CgogICAgICB2YXIgY29sdW1uQWxpZ24gPSBhbGlnbiB8fCB0aGlzLmdldEFsaWduRm9yRGF0YVR5cGUoZGF0YVR5cGUpOwogICAgICB2YXIgY2VsbFByb3BzQ2FsbGJhY2sgPSB0aGlzLnByb3BzLmNlbGxQcm9wczsKICAgICAgdmFyIGNlbGxQcm9wcyA9IGdldENlbGxQcm9wcyhpdGVtLCBjb2x1bW4sIGNlbGxQcm9wc0NhbGxiYWNrKTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVRhYmxlUm93Q2VsbCwgX2V4dGVuZHMoewogICAgICAgIGtleToga2V5LAogICAgICAgIGFsaWduOiBjb2x1bW5BbGlnbiwKICAgICAgICBpc0V4cGFuZGVyOiBpc0V4cGFuZGVyLAogICAgICAgIHRleHRPbmx5OiB0ZXh0T25seSB8fCAhcmVuZGVyLAogICAgICAgIHNldFNjb3BlUm93OiBzZXRTY29wZVJvdywKICAgICAgICBtb2JpbGVPcHRpb25zOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1vYmlsZU9wdGlvbnMpLCB7fSwgewogICAgICAgICAgcmVuZGVyOiBtb2JpbGVPcHRpb25zICYmIG1vYmlsZU9wdGlvbnMucmVuZGVyICYmIG1vYmlsZU9wdGlvbnMucmVuZGVyKGl0ZW0pLAogICAgICAgICAgaGVhZGVyOiBtb2JpbGVPcHRpb25zICYmIG1vYmlsZU9wdGlvbnMuaGVhZGVyID09PSBmYWxzZSA/IGZhbHNlIDogbmFtZQogICAgICAgIH0pCiAgICAgIH0sIGNlbGxQcm9wcywgcmVzdCksIGNvbnRlbnQpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFJlbmRlcmVyRm9yRGF0YVR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlbmRlcmVyRm9yRGF0YVR5cGUoKSB7CiAgICAgIHZhciBkYXRhVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2F1dG8nOwogICAgICB2YXIgcHJvZmlsZSA9IGRhdGFUeXBlc1Byb2ZpbGVzW2RhdGFUeXBlXTsKCiAgICAgIGlmICghcHJvZmlsZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5rbm93biBkYXRhVHlwZSBbIi5jb25jYXQoZGF0YVR5cGUsICJdLiBUaGUgc3VwcG9ydGVkIGRhdGEgdHlwZXMgYXJlIFsiKS5jb25jYXQoREFUQV9UWVBFUy5qb2luKCcsICcpLCAiXSIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHByb2ZpbGUucmVuZGVyOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEFsaWduRm9yRGF0YVR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsaWduRm9yRGF0YVR5cGUoKSB7CiAgICAgIHZhciBkYXRhVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2F1dG8nOwogICAgICB2YXIgcHJvZmlsZSA9IGRhdGFUeXBlc1Byb2ZpbGVzW2RhdGFUeXBlXTsKCiAgICAgIGlmICghcHJvZmlsZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5rbm93biBkYXRhVHlwZSBbIi5jb25jYXQoZGF0YVR5cGUsICJdLiBUaGUgc3VwcG9ydGVkIGRhdGEgdHlwZXMgYXJlIFsiKS5jb25jYXQoREFUQV9UWVBFUy5qb2luKCcsICcpLCAiXSIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHByb2ZpbGUuYWxpZ247CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyUGFnaW5hdGlvbkJhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUGFnaW5hdGlvbkJhcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMTAgPSB0aGlzLnByb3BzLAogICAgICAgICAgZXJyb3IgPSBfdGhpcyRwcm9wczEwLmVycm9yLAogICAgICAgICAgcGFnaW5hdGlvbiA9IF90aGlzJHByb3BzMTAucGFnaW5hdGlvbiwKICAgICAgICAgIHRhYmxlQ2FwdGlvbiA9IF90aGlzJHByb3BzMTAudGFibGVDYXB0aW9uLAogICAgICAgICAgb25DaGFuZ2UgPSBfdGhpcyRwcm9wczEwLm9uQ2hhbmdlOwoKICAgICAgaWYgKCFlcnJvciAmJiBwYWdpbmF0aW9uICYmIHBhZ2luYXRpb24udG90YWxJdGVtQ291bnQgPiAwKSB7CiAgICAgICAgaWYgKCFvbkNoYW5nZSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUaGUgQmFzaWMgVGFibGUgaXMgY29uZmlndXJlZCB3aXRoIHBhZ2luYXRpb24gYnV0IFtvbkNoYW5nZV0gaXNcbiAgICAgICAgbm90IGNvbmZpZ3VyZWQuIFRoaXMgY2FsbGJhY2sgbXVzdCBiZSBpbXBsZW1lbnRlZCB0byBoYW5kbGUgcGFnaW5hdGlvbiBjaGFuZ2VzIik7CiAgICAgICAgfQoKICAgICAgICB2YXIgYXJpYUxhYmVsID0gdW5kZWZpbmVkOwoKICAgICAgICBpZiAodGFibGVDYXB0aW9uKSB7CiAgICAgICAgICBhcmlhTGFiZWwgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlJMThuLCB7CiAgICAgICAgICAgIHRva2VuOiAiZXVpQmFzaWNUYWJsZS50YWJsZVBhZ2luYXRpb24iLAogICAgICAgICAgICBkZWZhdWx0OiAiUGFnaW5hdGlvbiBmb3IgcHJlY2VkaW5nIHRhYmxlOiB7dGFibGVDYXB0aW9ufSIsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIHRhYmxlQ2FwdGlvbjogdGFibGVDYXB0aW9uCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhZ2luYXRpb25CYXIsIHsKICAgICAgICAgICJhcmlhLWNvbnRyb2xzIjogdGhpcy50YWJsZUlkLAogICAgICAgICAgcGFnaW5hdGlvbjogcGFnaW5hdGlvbiwKICAgICAgICAgIG9uUGFnZVNpemVDaGFuZ2U6IHRoaXMub25QYWdlU2l6ZUNoYW5nZS5iaW5kKHRoaXMpLAogICAgICAgICAgb25QYWdlQ2hhbmdlOiB0aGlzLm9uUGFnZUNoYW5nZS5iaW5kKHRoaXMpLAogICAgICAgICAgImFyaWEtbGFiZWwiOiBhcmlhTGFiZWwKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIEV1aUJhc2ljVGFibGU7Cn0oQ29tcG9uZW50KTsKCl9kZWZpbmVQcm9wZXJ0eShFdWlCYXNpY1RhYmxlLCAiZGVmYXVsdFByb3BzIiwgewogIHJlc3BvbnNpdmU6IHRydWUsCiAgdGFibGVMYXlvdXQ6ICdmaXhlZCcsCiAgbm9JdGVtc01lc3NhZ2U6ICdObyBpdGVtcyBmb3VuZCcKfSk7CgpFdWlCYXNpY1RhYmxlLnByb3BUeXBlcyA9IHsKICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsCiAgImFyaWEtbGFiZWwiOiBQcm9wVHlwZXMuc3RyaW5nLAogICJkYXRhLXRlc3Qtc3ViaiI6IFByb3BUeXBlcy5zdHJpbmcsCgogIC8qKgogICAgICogRGVzY3JpYmVzIGhvdyB0byBleHRyYWN0IGEgdW5pcXVlIElEIGZyb20gZWFjaCBpdGVtLCB1c2VkIGZvciBzZWxlY3Rpb25zICYgZXhwYW5kZWQgcm93cwogICAgICovCgogIC8qKgogICAgICogRGVzY3JpYmVzIGhvdyB0byBleHRyYWN0IGEgdW5pcXVlIElEIGZyb20gZWFjaCBpdGVtLCB1c2VkIGZvciBzZWxlY3Rpb25zICYgZXhwYW5kZWQgcm93cwogICAgICovCiAgaXRlbUlkOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZF0pLAoKICAvKioKICAgICAqIFJvdyBleHBhbnNpb24gdXNlcyB0aGUgaXRlbUlkIHByb3AgdG8gaWRlbnRpZnkgZWFjaCByb3cKICAgICAqLwoKICAvKioKICAgICAqIFJvdyBleHBhbnNpb24gdXNlcyB0aGUgaXRlbUlkIHByb3AgdG8gaWRlbnRpZnkgZWFjaCByb3cKICAgICAqLwogIGl0ZW1JZFRvRXhwYW5kZWRSb3dNYXA6IFByb3BUeXBlcy5zaGFwZSh7fSksCgogIC8qKgogICAgICogQSBsaXN0IG9mIG9iamVjdHMgdG8gd2hvIGluIHRoZSB0YWJsZSAtIGFuIGl0ZW0gcGVyIHJvdwogICAgICovCgogIC8qKgogICAgICogQSBsaXN0IG9mIG9iamVjdHMgdG8gd2hvIGluIHRoZSB0YWJsZSAtIGFuIGl0ZW0gcGVyIHJvdwogICAgICovCiAgaXRlbXM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCksCgogIC8qKgogICAgICogQXBwbGllZCB0byBgRXVpVGFibGVSb3dDZWxsYAogICAgICovCgogIC8qKgogICAgICogQXBwbGllZCB0byBgRXVpVGFibGVSb3dDZWxsYAogICAgICovCiAgY2VsbFByb3BzOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsIFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRdKSwKCiAgLyoqCiAgICAgKiBBbiBhcnJheSBvZiBvbmUgb2YgdGhlIG9iamVjdHM6ICNFdWlUYWJsZUZpZWxkRGF0YUNvbHVtblR5cGUsICNFdWlUYWJsZUNvbXB1dGVkQ29sdW1uVHlwZSBvciAjRXVpVGFibGVBY3Rpb25zQ29sdW1uVHlwZS4KICAgICAqLwoKICAvKioKICAgICAqIEFuIGFycmF5IG9mIG9uZSBvZiB0aGUgb2JqZWN0czogI0V1aVRhYmxlRmllbGREYXRhQ29sdW1uVHlwZSwgI0V1aVRhYmxlQ29tcHV0ZWRDb2x1bW5UeXBlIG9yICNFdWlUYWJsZUFjdGlvbnNDb2x1bW5UeXBlLgogICAgICovCiAgY29sdW1uczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnNoYXBlKHsKICAgIC8qKgogICAgICAgKiBBIGZpZWxkIG9mIHRoZSBpdGVtIChtYXkgYmUgYSBuZXN0ZWQgZmllbGQpCiAgICAgICAqLwogICAgZmllbGQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXSkuaXNSZXF1aXJlZCwKICAgIC8vIHN1cHBvcnRzIG91dGVyLmlubmVyIGtleSBwYXRocwoKICAgIC8qKgogICAgICAgKiBUaGUgZGlzcGxheSBuYW1lIG9mIHRoZSBjb2x1bW4KICAgICAgICovCiAgICBuYW1lOiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkLAoKICAgIC8qKgogICAgICAgKiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb2x1bW4gKHdpbGwgYmUgcHJlc2VudGVkIGFzIGEgdGl0bGUgb3ZlciB0aGUgY29sdW1uIGhlYWRlcikKICAgICAgICovCiAgICBkZXNjcmlwdGlvbjogUHJvcFR5cGVzLnN0cmluZywKCiAgICAvKioKICAgICAgICogRGVzY3JpYmVzIHRoZSBkYXRhIHR5cGVzIG9mIHRoZSBkaXNwbGF5ZWQgdmFsdWUgKHNlcnZlcyBhcyBhIHJlbmRlcmluZyBoaW50IGZvciB0aGUgdGFibGUpCiAgICAgICAqLwogICAgZGF0YVR5cGU6IFByb3BUeXBlcy5vbmVPZihbImF1dG8iLCAic3RyaW5nIiwgIm51bWJlciIsICJib29sZWFuIiwgImRhdGUiXSksCgogICAgLyoqCiAgICAgICAqIEEgQ1NTIHdpZHRoIHByb3BlcnR5LiBIaW50cyBmb3IgdGhlIHJlcXVpcmVkIHdpZHRoIG9mIHRoZSBjb2x1bW4gKGUuZy4gIjMwJSIsICIxMDBweCIsIGV0Yy4uKQogICAgICAgKi8KICAgIHdpZHRoOiBQcm9wVHlwZXMuc3RyaW5nLAoKICAgIC8qKgogICAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIHVzZXIgY2FuIHNvcnQgb24gdGhpcyBjb2x1bW4uIElmIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgdmFsdWUgdG8gc29ydCBhZ2FpbnN0CiAgICAgICAqLwogICAgc29ydGFibGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRdKSwKICAgIGlzRXhwYW5kZXI6IFByb3BUeXBlcy5ib29sLAogICAgdGV4dE9ubHk6IFByb3BUeXBlcy5ib29sLAoKICAgIC8qKgogICAgICAgKiBEZWZpbmVzIHRoZSBob3Jpem9udGFsIGFsaWdubWVudCBvZiB0aGUgY29sdW1uCiAgICAgICAqLwogICAgYWxpZ246IFByb3BUeXBlcy5vbmVPZihbImxlZnQiLCAicmlnaHQiLCAiY2VudGVyIl0pLAoKICAgIC8qKgogICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIGNvbHVtbiBzaG91bGQgdHJ1bmNhdGUgaXRzIGNvbnRlbnQgd2hlbiBpdCBkb2Vzbid0IGZpdAogICAgICAgKi8KICAgIHRydW5jYXRlVGV4dDogUHJvcFR5cGVzLmJvb2wsCiAgICBpc01vYmlsZUhlYWRlcjogUHJvcFR5cGVzLmJvb2wsCiAgICBtb2JpbGVPcHRpb25zOiBQcm9wVHlwZXMuc2hhcGUoewogICAgICBzaG93OiBQcm9wVHlwZXMuYm9vbCwKICAgICAgb25seTogUHJvcFR5cGVzLmJvb2wsCiAgICAgIHJlbmRlcjogUHJvcFR5cGVzLmZ1bmMsCiAgICAgIGhlYWRlcjogUHJvcFR5cGVzLmJvb2wKICAgIH0pLAogICAgaGlkZUZvck1vYmlsZTogUHJvcFR5cGVzLmJvb2wsCgogICAgLyoqCiAgICAgICAqIERlc2NyaWJlIGEgY3VzdG9tIHJlbmRlcmVyIGZ1bmN0aW9uIGZvciB0aGUgY29udGVudAogICAgICAgKi8KICAgIHJlbmRlcjogUHJvcFR5cGVzLmZ1bmMsCgogICAgLyoqCiAgICAgICAqIENvbnRlbnQgdG8gZGlzcGxheSBpbiB0aGUgZm9vdGVyIGJlbmVhdGggdGhpcyBjb2x1bW4KICAgICAgICovCiAgICBmb290ZXI6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmVsZW1lbnQuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZF0pLAoKICAgIC8qKgogICAgICAgKiBEaXNhYmxlcyB0aGUgdXNlcidzIGFiaWxpdHkgdG8gY2hhbmdlIHRoZSBzb3J0IGJ1dCBzdGlsbCBzaG93cyB0aGUgY3VycmVudCBkaXJlY3Rpb24KICAgICAgICovCiAgICByZWFkT25seTogUHJvcFR5cGVzLmJvb2wsCiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsCiAgICAiYXJpYS1sYWJlbCI6IFByb3BUeXBlcy5zdHJpbmcsCiAgICAiZGF0YS10ZXN0LXN1YmoiOiBQcm9wVHlwZXMuc3RyaW5nCiAgfSkuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLnNoYXBlKHsKICAgIC8qKgogICAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgY29tcHV0ZXMgdGhlIHZhbHVlIGZvciBlYWNoIGl0ZW0gYW5kIHJlbmRlcnMgaXQKICAgICAgICovCiAgICByZW5kZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCgogICAgLyoqCiAgICAgICAqIFRoZSBkaXNwbGF5IG5hbWUgb2YgdGhlIGNvbHVtbgogICAgICAgKi8KICAgIG5hbWU6IFByb3BUeXBlcy5ub2RlLAoKICAgIC8qKgogICAgICAgKiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb2x1bW4gKHdpbGwgYmUgcHJlc2VudGVkIGFzIGEgdGl0bGUgb3ZlciB0aGUgY29sdW1uIGhlYWRlcgogICAgICAgKi8KICAgIGRlc2NyaXB0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLAoKICAgIC8qKgogICAgICAgKiBJZiBwcm92aWRlZCwgYWxsb3dzIHRoaXMgY29sdW1uIHRvIGJlIHNvcnRlZCBvbi4gTXVzdCByZXR1cm4gdGhlIHZhbHVlIHRvIHNvcnQgYWdhaW5zdC4KICAgICAgICovCiAgICBzb3J0YWJsZTogUHJvcFR5cGVzLmZ1bmMsCgogICAgLyoqCiAgICAgICAqIEEgQ1NTIHdpZHRoIHByb3BlcnR5LiBIaW50cyBmb3IgdGhlIHJlcXVpcmVkIHdpZHRoIG9mIHRoZSBjb2x1bW4KICAgICAgICovCiAgICB3aWR0aDogUHJvcFR5cGVzLnN0cmluZywKCiAgICAvKioKICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBjb2x1bW4gc2hvdWxkIHRydW5jYXRlIGl0cyBjb250ZW50IHdoZW4gaXQgZG9lc24ndCBmaXQKICAgICAgICovCiAgICB0cnVuY2F0ZVRleHQ6IFByb3BUeXBlcy5ib29sLAogICAgaXNFeHBhbmRlcjogUHJvcFR5cGVzLmJvb2wsCiAgICBhbGlnbjogUHJvcFR5cGVzLm9uZU9mKFsibGVmdCIsICJyaWdodCIsICJjZW50ZXIiXSksCgogICAgLyoqCiAgICAgICAqIERpc2FibGVzIHRoZSB1c2VyJ3MgYWJpbGl0eSB0byBjaGFuZ2UgdGhlIHNvcnQgYnV0IHN0aWxsIHNob3dzIHRoZSBjdXJyZW50IGRpcmVjdGlvbgogICAgICAgKi8KICAgIHJlYWRPbmx5OiBQcm9wVHlwZXMuYm9vbCwKICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZywKICAgICJhcmlhLWxhYmVsIjogUHJvcFR5cGVzLnN0cmluZywKICAgICJkYXRhLXRlc3Qtc3ViaiI6IFByb3BUeXBlcy5zdHJpbmcKICB9KS5pc1JlcXVpcmVkLCBQcm9wVHlwZXMuc2hhcGUoewogICAgLyoqCiAgICAgICAqIEFuIGFycmF5IG9mIG9uZSBvZiB0aGUgb2JqZWN0czogI0RlZmF1bHRJdGVtQWN0aW9uIG9yICNDdXN0b21JdGVtQWN0aW9uCiAgICAgICAqLwogICAgYWN0aW9uczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnNoYXBlKHsKICAgICAgLyoqCiAgICAgICAgICogVGhlIHR5cGUgb2YgYWN0aW9uCiAgICAgICAgICovCiAgICAgIHR5cGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5vbmVPZihbImJ1dHRvbiJdKSwgUHJvcFR5cGVzLm9uZU9mKFsiaWNvbiJdKS5pc1JlcXVpcmVkXSksCgogICAgICAvKioKICAgICAgICAgKiBEZWZpbmVzIHRoZSBjb2xvciBvZiB0aGUgYnV0dG9uCiAgICAgICAgICovCiAgICAgIGNvbG9yOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMub25lT2YoWyJwcmltYXJ5IiwgImRhbmdlciIsICJ0ZXh0IiwgImdob3N0IiwgInN1Y2Nlc3MiLCAid2FybmluZyJdKS5pc1JlcXVpcmVkLCBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXSksIFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5vbmVPZihbImFjY2VudCIsICJkYW5nZXIiLCAiZ2hvc3QiLCAicHJpbWFyeSIsICJzdWJkdWVkIiwgInN1Y2Nlc3MiLCAidGV4dCIsICJ3YXJuaW5nIl0pLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRdKV0pLAoKICAgICAgLyoqCiAgICAgICAgICogVGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgYWN0aW9uICh3aWxsIGJlIHRoZSBidXR0b24gY2FwdGlvbikKICAgICAgICAgKi8KCiAgICAgIC8qKgogICAgICAgICAqIFRoZSBkaXNwbGF5IG5hbWUgb2YgdGhlIGFjdGlvbiAod2lsbCBiZSB0aGUgYnV0dG9uIGNhcHRpb24pCiAgICAgICAgICovCiAgICAgIG5hbWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRdKS5pc1JlcXVpcmVkLAoKICAgICAgLyoqCiAgICAgICAgICogRGVzY3JpYmVzIHRoZSBhY3Rpb24gKHdpbGwgYmUgdGhlIGJ1dHRvbiB0aXRsZSkKICAgICAgICAgKi8KCiAgICAgIC8qKgogICAgICAgICAqIERlc2NyaWJlcyB0aGUgYWN0aW9uICh3aWxsIGJlIHRoZSBidXR0b24gdGl0bGUpCiAgICAgICAgICovCiAgICAgIGRlc2NyaXB0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsCgogICAgICAvKioKICAgICAgICAgKiBBIGhhbmRsZXIgZnVuY3Rpb24gdG8gZXhlY3V0ZSB0aGUgYWN0aW9uCiAgICAgICAgICovCgogICAgICAvKioKICAgICAgICAgKiBBIGhhbmRsZXIgZnVuY3Rpb24gdG8gZXhlY3V0ZSB0aGUgYWN0aW9uCiAgICAgICAgICovCiAgICAgIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLAogICAgICBocmVmOiBQcm9wVHlwZXMuc3RyaW5nLAogICAgICB0YXJnZXQ6IFByb3BUeXBlcy5zdHJpbmcsCgogICAgICAvKioKICAgICAgICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBhY3Rpb24gaXMgYXZhaWxhYmxlCiAgICAgICAgICovCgogICAgICAvKioKICAgICAgICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBhY3Rpb24gaXMgYXZhaWxhYmxlCiAgICAgICAgICovCiAgICAgIGF2YWlsYWJsZTogUHJvcFR5cGVzLmZ1bmMsCgogICAgICAvKioKICAgICAgICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBhY3Rpb24gaXMgZW5hYmxlZAogICAgICAgICAqLwoKICAgICAgLyoqCiAgICAgICAgICogQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGRldGVybWluZXMgd2hldGhlciB0aGUgYWN0aW9uIGlzIGVuYWJsZWQKICAgICAgICAgKi8KICAgICAgZW5hYmxlZDogUHJvcFR5cGVzLmZ1bmMsCiAgICAgIGlzUHJpbWFyeTogUHJvcFR5cGVzLmJvb2wsCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6IFByb3BUeXBlcy5zdHJpbmcsCgogICAgICAvKioKICAgICAgICAgKiBBc3NvY2lhdGVzIGFuIGljb24gd2l0aCB0aGUgYnV0dG9uCiAgICAgICAgICovCiAgICAgIGljb246IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5vbmVPZihbImFjY2Vzc2liaWxpdHkiLCAiYWRkRGF0YUFwcCIsICJhZHZhbmNlZFNldHRpbmdzQXBwIiwgImFnZ3JlZ2F0ZSIsICJhbGVydCIsICJhbmFseXplRXZlbnQiLCAiYW5ub3RhdGlvbiIsICJhcG1BcHAiLCAiYXBtVHJhY2UiLCAiYXBwcyIsICJhcHBTZWFyY2hBcHAiLCAiYXJyb3dEb3duIiwgImFycm93TGVmdCIsICJhcnJvd1JpZ2h0IiwgImFycm93VXAiLCAiYXN0ZXJpc2siLCAiYXVkaXRiZWF0QXBwIiwgImJlYWtlciIsICJiZWxsIiwgImJlbGxTbGFzaCIsICJib2x0IiwgImJveGVzSG9yaXpvbnRhbCIsICJib3hlc1ZlcnRpY2FsIiwgImJyYW5jaCIsICJicm9vbSIsICJicnVzaCIsICJidWciLCAiYnVsbHNleWUiLCAiY2FsZW5kYXIiLCAiY2FudmFzQXBwIiwgImNvZGVBcHAiLCAiY2hlY2siLCAiY2hlY2tJbkNpcmNsZUZpbGxlZCIsICJjaGVlciIsICJjbGFzc2lmaWNhdGlvbkpvYiIsICJjbG9jayIsICJjbG91ZERyaXp6bGUiLCAiY2xvdWRTdG9ybXkiLCAiY2xvdWRTdW5ueSIsICJjb2xvciIsICJjb21wdXRlIiwgImNvbnNvbGUiLCAiY29uc29sZUFwcCIsICJjb250aW51aXR5QWJvdmUiLCAiY29udGludWl0eUFib3ZlQmVsb3ciLCAiY29udGludWl0eUJlbG93IiwgImNvbnRpbnVpdHlXaXRoaW4iLCAiY29udHJvbHNIb3Jpem9udGFsIiwgImNvbnRyb2xzVmVydGljYWwiLCAiY29weSIsICJjb3B5Q2xpcGJvYXJkIiwgImNyZWF0ZUFkdmFuY2VkSm9iIiwgImNyZWF0ZU11bHRpTWV0cmljSm9iIiwgImNyZWF0ZVBvcHVsYXRpb25Kb2IiLCAiY3JlYXRlU2luZ2xlTWV0cmljSm9iIiwgImNyb3NzIiwgImNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uQXBwIiwgImNyb3NzaGFpcnMiLCAiY3Jvc3NJbkFDaXJjbGVGaWxsZWQiLCAiY3VycmVuY3kiLCAiY3V0IiwgImRhc2hib2FyZEFwcCIsICJkYXRhYmFzZSIsICJkYXRhVmlzdWFsaXplciIsICJkZXZUb29sc0FwcCIsICJkaXNjb3ZlckFwcCIsICJkb2N1bWVudCIsICJkb2N1bWVudGF0aW9uIiwgImRvY3VtZW50RWRpdCIsICJkb2N1bWVudHMiLCAiZG90IiwgImRvd25sb2FkIiwgImVkaXRvckFsaWduQ2VudGVyIiwgImVkaXRvckFsaWduTGVmdCIsICJlZGl0b3JBbGlnblJpZ2h0IiwgImVkaXRvckJvbGQiLCAiZWRpdG9yQ29kZUJsb2NrIiwgImVkaXRvckNvbW1lbnQiLCAiZWRpdG9yRGlzdHJpYnV0ZUhvcml6b250YWwiLCAiZWRpdG9yRGlzdHJpYnV0ZVZlcnRpY2FsIiwgImVkaXRvckhlYWRpbmciLCAiZWRpdG9ySXRhbGljIiwgImVkaXRvckl0ZW1BbGlnbkxlZnQiLCAiZWRpdG9ySXRlbUFsaWduQm90dG9tIiwgImVkaXRvckl0ZW1BbGlnbkNlbnRlciIsICJlZGl0b3JJdGVtQWxpZ25NaWRkbGUiLCAiZWRpdG9ySXRlbUFsaWduUmlnaHQiLCAiZWRpdG9ySXRlbUFsaWduVG9wIiwgImVkaXRvckxpbmsiLCAiZWRpdG9yT3JkZXJlZExpc3QiLCAiZWRpdG9yUG9zaXRpb25Cb3R0b21MZWZ0IiwgImVkaXRvclBvc2l0aW9uQm90dG9tUmlnaHQiLCAiZWRpdG9yUG9zaXRpb25Ub3BMZWZ0IiwgImVkaXRvclBvc2l0aW9uVG9wUmlnaHQiLCAiZWRpdG9yUmVkbyIsICJlZGl0b3JTdHJpa2UiLCAiZWRpdG9yVGFibGUiLCAiZWRpdG9yVW5kZXJsaW5lIiwgImVkaXRvclVuZG8iLCAiZWRpdG9yVW5vcmRlcmVkTGlzdCIsICJlbWFpbCIsICJlbXB0eSIsICJlbXNBcHAiLCAiZXFsIiwgImVyYXNlciIsICJleGl0IiwgImV4cGFuZCIsICJleHBhbmRNaW5pIiwgImV4cG9ydEFjdGlvbiIsICJleWUiLCAiZXllQ2xvc2VkIiwgImZhY2VIYXBweSIsICJmYWNlTmV1dHJhbCIsICJmYWNlU2FkIiwgImZpbGViZWF0QXBwIiwgImZpbHRlciIsICJmbGFnIiwgImZvbGQiLCAiZm9sZGVyQ2hlY2siLCAiZm9sZGVyQ2xvc2VkIiwgImZvbGRlckV4Y2xhbWF0aW9uIiwgImZvbGRlck9wZW4iLCAiZnJhbWVOZXh0IiwgImZyYW1lUHJldmlvdXMiLCAiZnVsbFNjcmVlbiIsICJmdWxsU2NyZWVuRXhpdCIsICJmdW5jdGlvbiIsICJnZWFyIiwgImdpc0FwcCIsICJnbGFzc2VzIiwgImdsb2JlIiwgImdyYWIiLCAiZ3JhYkhvcml6b250YWwiLCAiZ3JhcGhBcHAiLCAiZ3JpZCIsICJncm9rQXBwIiwgImhlYXJ0IiwgImhlYXJ0YmVhdEFwcCIsICJoZWF0bWFwIiwgImhlbHAiLCAiaG9tZSIsICJpSW5DaXJjbGUiLCAiaW1hZ2UiLCAiaW1wb3J0QWN0aW9uIiwgImluZGV4Q2xvc2UiLCAiaW5kZXhFZGl0IiwgImluZGV4Rmx1c2giLCAiaW5kZXhNYW5hZ2VtZW50QXBwIiwgImluZGV4TWFwcGluZyIsICJpbmRleE9wZW4iLCAiaW5kZXhQYXR0ZXJuQXBwIiwgImluZGV4Um9sbHVwQXBwIiwgImluZGV4UnVudGltZSIsICJpbmRleFNldHRpbmdzIiwgImlucHV0T3V0cHV0IiwgImluc3BlY3QiLCAiaW52ZXJ0IiwgImlwIiwgImtleWJvYXJkU2hvcnRjdXQiLCAia3FsRmllbGQiLCAia3FsRnVuY3Rpb24iLCAia3FsT3BlcmFuZCIsICJrcWxTZWxlY3RvciIsICJrcWxWYWx1ZSIsICJsYXllcnMiLCAibGVuc0FwcCIsICJsaW5rIiwgImxpc3QiLCAibGlzdEFkZCIsICJsb2NrIiwgImxvY2tPcGVuIiwgImxvZ3NBcHAiLCAibG9nb0Flcm9zcGlrZSIsICJsb2dvQXBhY2hlIiwgImxvZ29BcHBTZWFyY2giLCAibG9nb0FXUyIsICJsb2dvQVdTTW9ubyIsICJsb2dvQXp1cmUiLCAibG9nb0F6dXJlTW9ubyIsICJsb2dvQmVhdHMiLCAibG9nb0J1c2luZXNzQW5hbHl0aWNzIiwgImxvZ29DZXBoIiwgImxvZ29DbG91ZCIsICJsb2dvQ2xvdWRFbnRlcnByaXNlIiwgImxvZ29Db2RlIiwgImxvZ29Db2Rlc2FuZGJveCIsICJsb2dvQ291Y2hiYXNlIiwgImxvZ29Eb2NrZXIiLCAibG9nb0Ryb3B3aXphcmQiLCAibG9nb0VsYXN0aWMiLCAibG9nb0VsYXN0aWNzZWFyY2giLCAibG9nb0VsYXN0aWNTdGFjayIsICJsb2dvRW50ZXJwcmlzZVNlYXJjaCIsICJsb2dvRXRjZCIsICJsb2dvR0NQIiwgImxvZ29HQ1BNb25vIiwgImxvZ29HaXRodWIiLCAibG9nb0dtYWlsIiwgImxvZ29Hb2xhbmciLCAibG9nb0dvb2dsZUciLCAibG9nb0hBcHJveHkiLCAibG9nb0lCTSIsICJsb2dvSUJNTW9ubyIsICJsb2dvS2Fma2EiLCAibG9nb0tpYmFuYSIsICJsb2dvS3ViZXJuZXRlcyIsICJsb2dvTG9nZ2luZyIsICJsb2dvTG9nc3Rhc2giLCAibG9nb01hcHMiLCAibG9nb01lbWNhY2hlZCIsICJsb2dvTWV0cmljcyIsICJsb2dvTW9uZ29kYiIsICJsb2dvTXlTUUwiLCAibG9nb05naW54IiwgImxvZ29PYnNlcnZhYmlsaXR5IiwgImxvZ29Pc3F1ZXJ5IiwgImxvZ29QaHAiLCAibG9nb1Bvc3RncmVzIiwgImxvZ29Qcm9tZXRoZXVzIiwgImxvZ29SYWJiaXRtcSIsICJsb2dvUmVkaXMiLCAibG9nb1NlY3VyaXR5IiwgImxvZ29TaXRlU2VhcmNoIiwgImxvZ29Ta2V0Y2giLCAibG9nb1NsYWNrIiwgImxvZ29VcHRpbWUiLCAibG9nb1dlYmhvb2siLCAibG9nb1dpbmRvd3MiLCAibG9nb1dvcmtwbGFjZVNlYXJjaCIsICJsb2dzdGFzaEZpbHRlciIsICJsb2dzdGFzaElmIiwgImxvZ3N0YXNoSW5wdXQiLCAibG9nc3Rhc2hPdXRwdXQiLCAibG9nc3Rhc2hRdWV1ZSIsICJtYWNoaW5lTGVhcm5pbmdBcHAiLCAibWFnbmV0IiwgIm1hZ25pZnlXaXRoTWludXMiLCAibWFnbmlmeVdpdGhQbHVzIiwgIm1hbmFnZW1lbnRBcHAiLCAibWFwTWFya2VyIiwgIm1lbW9yeSIsICJtZW51IiwgIm1lbnVEb3duIiwgIm1lbnVMZWZ0IiwgIm1lbnVSaWdodCIsICJtZW51VXAiLCAibWVyZ2UiLCAibWV0cmljYmVhdEFwcCIsICJtZXRyaWNzQXBwIiwgIm1pbmltaXplIiwgIm1pbnVzIiwgIm1pbnVzSW5DaXJjbGUiLCAibWludXNJbkNpcmNsZUZpbGxlZCIsICJtb2JpbGUiLCAibW9uaXRvcmluZ0FwcCIsICJtb29uIiwgIm5lc3RlZCIsICJub2RlIiwgIm5vdGVib29rQXBwIiwgIm51bWJlciIsICJvZmZsaW5lIiwgIm9ubGluZSIsICJvdXRsaWVyRGV0ZWN0aW9uSm9iIiwgInBhY2thZ2UiLCAicGFja2V0YmVhdEFwcCIsICJwYWdlU2VsZWN0IiwgInBhZ2VzU2VsZWN0IiwgInBhcnRpYWwiLCAicGFwZXJDbGlwIiwgInBhdXNlIiwgInBlbmNpbCIsICJwZXJjZW50IiwgInBpbiIsICJwaW5GaWxsZWQiLCAicGlwZWxpbmVBcHAiLCAicGxheSIsICJwbGF5RmlsbGVkIiwgInBsdXMiLCAicGx1c0luQ2lyY2xlIiwgInBsdXNJbkNpcmNsZUZpbGxlZCIsICJwb3BvdXQiLCAicHVzaCIsICJxdWVzdGlvbkluQ2lyY2xlIiwgInF1b3RlIiwgInJlY2VudGx5Vmlld2VkQXBwIiwgInJlZnJlc2giLCAicmVncmVzc2lvbkpvYiIsICJyZXBvcnRlciIsICJyZXBvcnRpbmdBcHAiLCAicmV0dXJuS2V5IiwgInNhdmUiLCAic2F2ZWRPYmplY3RzQXBwIiwgInNjYWxlIiwgInNlYXJjaCIsICJzZWFyY2hQcm9maWxlckFwcCIsICJzZWN1cml0eUFuYWx5dGljc0FwcCIsICJzZWN1cml0eUFwcCIsICJzZWN1cml0eVNpZ25hbCIsICJzZWN1cml0eVNpZ25hbERldGVjdGVkIiwgInNlY3VyaXR5U2lnbmFsUmVzb2x2ZWQiLCAic2hhcmQiLCAic2hhcmUiLCAic25vd2ZsYWtlIiwgInNvcnRhYmxlIiwgInNvcnREb3duIiwgInNvcnRMZWZ0IiwgInNvcnRSaWdodCIsICJzb3J0VXAiLCAic3BhY2VzQXBwIiwgInNxbEFwcCIsICJzdGFyRW1wdHkiLCAic3RhckVtcHR5U3BhY2UiLCAic3RhckZpbGxlZCIsICJzdGFyRmlsbGVkU3BhY2UiLCAic3Rhck1pbnVzRW1wdHkiLCAic3Rhck1pbnVzRmlsbGVkIiwgInN0YXJQbHVzRW1wdHkiLCAic3RhclBsdXNGaWxsZWQiLCAic3RhdHMiLCAic3RvcCIsICJzdG9wRmlsbGVkIiwgInN0b3BTbGFzaCIsICJzdG9yYWdlIiwgInN0cmluZyIsICJzdWJtb2R1bGUiLCAic3dhdGNoSW5wdXQiLCAic3ltbGluayIsICJ0YWJsZU9mQ29udGVudHMiLCAidGFibGVEZW5zaXR5RXhwYW5kZWQiLCAidGFibGVEZW5zaXR5Q29tcGFjdCIsICJ0YWJsZURlbnNpdHlOb3JtYWwiLCAidGFnIiwgInRlYXIiLCAidGVtcGVyYXR1cmUiLCAidGltZWxpbmUiLCAidGltZWxpb25BcHAiLCAidGltZXNsaWRlciIsICJ0cmFpbmluZyIsICJ0cmFzaCIsICJ1cGdyYWRlQXNzaXN0YW50QXBwIiwgInVwdGltZUFwcCIsICJ1bmZvbGQiLCAidW5saW5rIiwgInVzZXIiLCAidXNlcnMiLCAidXNlcnNSb2xlc0FwcCIsICJ2ZWN0b3IiLCAidmlkZW9QbGF5ZXIiLCAidmlzQXJlYSIsICJ2aXNBcmVhU3RhY2tlZCIsICJ2aXNCYXJIb3Jpem9udGFsIiwgInZpc0Jhckhvcml6b250YWxTdGFja2VkIiwgInZpc0JhclZlcnRpY2FsIiwgInZpc0JhclZlcnRpY2FsU3RhY2tlZCIsICJ2aXNHYXVnZSIsICJ2aXNHb2FsIiwgInZpc0xpbmUiLCAidmlzTWFwQ29vcmRpbmF0ZSIsICJ2aXNNYXBSZWdpb24iLCAidmlzTWV0cmljIiwgInZpc1BpZSIsICJ2aXNUYWJsZSIsICJ2aXNUYWdDbG91ZCIsICJ2aXNUZXh0IiwgInZpc1RpbWVsaW9uIiwgInZpc3VhbGl6ZUFwcCIsICJ2aXNWZWdhIiwgInZpc1Zpc3VhbEJ1aWxkZXIiLCAid2F0Y2hlc0FwcCIsICJ3b3JkV3JhcCIsICJ3b3JkV3JhcERpc2FibGVkIiwgIndvcmtwbGFjZVNlYXJjaEFwcCIsICJ3cmVuY2giLCAidG9rZW5DbGFzcyIsICJ0b2tlblByb3BlcnR5IiwgInRva2VuRW51bSIsICJ0b2tlblZhcmlhYmxlIiwgInRva2VuTWV0aG9kIiwgInRva2VuQW5ub3RhdGlvbiIsICJ0b2tlbkV4Y2VwdGlvbiIsICJ0b2tlbkludGVyZmFjZSIsICJ0b2tlblBhcmFtZXRlciIsICJ0b2tlbkZpZWxkIiwgInRva2VuRWxlbWVudCIsICJ0b2tlbkZ1bmN0aW9uIiwgInRva2VuQm9vbGVhbiIsICJ0b2tlblN0cmluZyIsICJ0b2tlbkFycmF5IiwgInRva2VuTnVtYmVyIiwgInRva2VuQ29uc3RhbnQiLCAidG9rZW5PYmplY3QiLCAidG9rZW5FdmVudCIsICJ0b2tlbktleSIsICJ0b2tlbk51bGwiLCAidG9rZW5TdHJ1Y3QiLCAidG9rZW5QYWNrYWdlIiwgInRva2VuT3BlcmF0b3IiLCAidG9rZW5FbnVtTWVtYmVyIiwgInRva2VuUmVwbyIsICJ0b2tlblN5bWJvbCIsICJ0b2tlbkZpbGUiLCAidG9rZW5Nb2R1bGUiLCAidG9rZW5OYW1lc3BhY2UiLCAidG9rZW5EYXRlIiwgInRva2VuSVAiLCAidG9rZW5OZXN0ZWQiLCAidG9rZW5BbGlhcyIsICJ0b2tlblNoYXBlIiwgInRva2VuR2VvIiwgInRva2VuUmFuZ2UiLCAidG9rZW5CaW5hcnkiLCAidG9rZW5Kb2luIiwgInRva2VuUGVyY29sYXRvciIsICJ0b2tlbkZsYXR0ZW5lZCIsICJ0b2tlblJhbmtGZWF0dXJlIiwgInRva2VuUmFua0ZlYXR1cmVzIiwgInRva2VuS2V5d29yZCIsICJ0b2tlbkNvbXBsZXRpb25TdWdnZXN0ZXIiLCAidG9rZW5EZW5zZVZlY3RvciIsICJ0b2tlblRleHQiLCAidG9rZW5Ub2tlbkNvdW50IiwgInRva2VuU2VhcmNoVHlwZSIsICJ0b2tlbkhpc3RvZ3JhbSJdKS5pc1JlcXVpcmVkLCBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXSkKICAgIH0pLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5zaGFwZSh7CiAgICAgIC8qKgogICAgICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IHJlbmRlcnMgdGhlIGFjdGlvbi4gTm90ZSB0aGF0IHRoZSByZXR1cm5lZCBub2RlIGlzIGV4cGVjdGVkIHRvIGhhdmUgYG9uRm9jdXNgIGFuZCBgb25CbHVyYCBmdW5jdGlvbnMKICAgICAgICAgKi8KICAgICAgcmVuZGVyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLAoKICAgICAgLyoqCiAgICAgICAgICogQSBjYWxsYmFjayB0aGF0IGRlZmluZXMgd2hldGhlciB0aGUgYWN0aW9uIGlzIGF2YWlsYWJsZQogICAgICAgICAqLwogICAgICBhdmFpbGFibGU6IFByb3BUeXBlcy5mdW5jLAoKICAgICAgLyoqCiAgICAgICAgICogQSBjYWxsYmFjayB0aGF0IGRlZmluZXMgd2hldGhlciB0aGUgYWN0aW9uIGlzIGVuYWJsZWQKICAgICAgICAgKi8KICAgICAgZW5hYmxlZDogUHJvcFR5cGVzLmZ1bmMsCiAgICAgIGlzUHJpbWFyeTogUHJvcFR5cGVzLmJvb2wKICAgIH0pLmlzUmVxdWlyZWRdKS5pc1JlcXVpcmVkKS5pc1JlcXVpcmVkLAoKICAgIC8qKgogICAgICAgKiBUaGUgZGlzcGxheSBuYW1lIG9mIHRoZSBjb2x1bW4KICAgICAgICovCiAgICBuYW1lOiBQcm9wVHlwZXMubm9kZSwKCiAgICAvKioKICAgICAgICogQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29sdW1uICh3aWxsIGJlIHByZXNlbnRlZCBhcyBhIHRpdGxlIG92ZXIgdGhlIGNvbHVtbiBoZWFkZXIKICAgICAgICovCiAgICBkZXNjcmlwdGlvbjogUHJvcFR5cGVzLnN0cmluZywKCiAgICAvKioKICAgICAgICogQSBDU1Mgd2lkdGggcHJvcGVydHkuIEhpbnRzIGZvciB0aGUgcmVxdWlyZWQgd2lkdGggb2YgdGhlIGNvbHVtbgogICAgICAgKi8KICAgIHdpZHRoOiBQcm9wVHlwZXMuc3RyaW5nCiAgfSkuaXNSZXF1aXJlZF0pLmlzUmVxdWlyZWQpLAoKICAvKioKICAgICAqIEVycm9yIG1lc3NhZ2UgdG8gZGlzcGxheQogICAgICovCgogIC8qKgogICAgICogRXJyb3IgbWVzc2FnZSB0byBkaXNwbGF5CiAgICAgKi8KICBlcnJvcjogUHJvcFR5cGVzLnN0cmluZywKCiAgLyoqCiAgICAgKiBEZXNjcmliZXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRhYmxlLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgY2FwdGlvbiB3aWxsIGJlICJUaGlzIHRhYmxlIGNvbnRhaW5zIHtpdGVtQ291bnR9IHJvd3MuIgogICAgICovCgogIC8qKgogICAgICogRGVzY3JpYmVzIHRoZSBjb250ZW50IG9mIHRoZSB0YWJsZS4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGNhcHRpb24gd2lsbCBiZSAiVGhpcyB0YWJsZSBjb250YWlucyB7aXRlbUNvdW50fSByb3dzLiIKICAgICAqLwogIHRhYmxlQ2FwdGlvbjogUHJvcFR5cGVzLnN0cmluZywKCiAgLyoqCiAgICAgKiBJbmRpY2F0ZXMgd2hpY2ggY29sdW1uIHNob3VsZCBiZSB1c2VkIGFzIHRoZSBpZGVudGlmeWluZyBjZWxsIGluIGVhY2ggcm93LiBTaG91bGQgbWF0Y2ggYSAiZmllbGQiIHByb3AgaW4gRmllbGREYXRhQ29sdW1uCiAgICAgKi8KCiAgLyoqCiAgICAgKiBJbmRpY2F0ZXMgd2hpY2ggY29sdW1uIHNob3VsZCBiZSB1c2VkIGFzIHRoZSBpZGVudGlmeWluZyBjZWxsIGluIGVhY2ggcm93LiBTaG91bGQgbWF0Y2ggYSAiZmllbGQiIHByb3AgaW4gRmllbGREYXRhQ29sdW1uCiAgICAgKi8KICByb3dIZWFkZXI6IFByb3BUeXBlcy5zdHJpbmcsCiAgaGFzQWN0aW9uczogUHJvcFR5cGVzLmJvb2wsCiAgaXNFeHBhbmRhYmxlOiBQcm9wVHlwZXMuYm9vbCwKICBpc1NlbGVjdGFibGU6IFByb3BUeXBlcy5ib29sLAoKICAvKioKICAgICAqIFByb3ZpZGVzIGFuIGluZmluaXRlIGxvYWRpbmcgaW5kaWNhdG9yCiAgICAgKi8KCiAgLyoqCiAgICAgKiBQcm92aWRlcyBhbiBpbmZpbml0ZSBsb2FkaW5nIGluZGljYXRvcgogICAgICovCiAgbG9hZGluZzogUHJvcFR5cGVzLmJvb2wsCgogIC8qKgogICAgICogTWVzc2FnZSB0byBkaXNwbGF5IGlmIHRhYmxlIGlzIGVtcHR5CiAgICAgKi8KCiAgLyoqCiAgICAgKiBNZXNzYWdlIHRvIGRpc3BsYXkgaWYgdGFibGUgaXMgZW1wdHkKICAgICAqLwogIG5vSXRlbXNNZXNzYWdlOiBQcm9wVHlwZXMubm9kZSwKCiAgLyoqCiAgICAgKiBDYWxsZWQgd2hlbmV2ZXIgcGFnaW5hdGlvbiBvciBzb3J0aW5nIGNoYW5nZXMgKHRoaXMgcHJvcGVydHkgaXMgcmVxdWlyZWQgd2hlbiBlaXRoZXIgcGFnaW5hdGlvbiBvciBzb3J0aW5nIGlzIGNvbmZpZ3VyZWQpLiBTZWUgI0NyaXRlcmlhIG9yICNDcml0ZXJpYVdpdGhQYWdpbmF0aW9uCiAgICAgKi8KICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsCgogIC8qKgogICAgICogQ29uZmlndXJlcyAjUGFnaW5hdGlvbgogICAgICovCiAgcGFnaW5hdGlvbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm9uZU9mKFt1bmRlZmluZWRdKSwgUHJvcFR5cGVzLnNoYXBlKHsKICAgIC8qKgogICAgICAgKiBUaGUgY3VycmVudCBwYWdlICh6ZXJvLWJhc2VkKSBpbmRleAogICAgICAgKi8KICAgIHBhZ2VJbmRleDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLAoKICAgIC8qKgogICAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdGhhdCBjYW4gYmUgc2hvd24gaW4gYSBzaW5nbGUgcGFnZQogICAgICAgKi8KICAgIHBhZ2VTaXplOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsCgogICAgLyoqCiAgICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgaXRlbXMgdGhlIHBhZ2UgaXMgInNsaWNlZCIgb2YKICAgICAgICovCiAgICB0b3RhbEl0ZW1Db3VudDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLAoKICAgIC8qKgogICAgICAgKiBDb25maWd1cmVzIHRoZSBwYWdlIHNpemUgZHJvcGRvd24gb3B0aW9ucwogICAgICAgKi8KICAgIHBhZ2VTaXplT3B0aW9uczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkKSwKCiAgICAvKioKICAgICAgICogSGlkZXMgdGhlIHBhZ2Ugc2l6ZSBkcm9wZG93bgogICAgICAgKi8KICAgIGhpZGVQZXJQYWdlT3B0aW9uczogUHJvcFR5cGVzLmJvb2wKICB9KV0pLAoKICAvKioKICAgICAqIElmIHRydWUsIHdpbGwgY29udmVydCB0YWJsZSB0byBjYXJkcyBpbiBtb2JpbGUgdmlldwogICAgICovCgogIC8qKgogICAgICogSWYgdHJ1ZSwgd2lsbCBjb252ZXJ0IHRhYmxlIHRvIGNhcmRzIGluIG1vYmlsZSB2aWV3CiAgICAgKi8KICByZXNwb25zaXZlOiBQcm9wVHlwZXMuYm9vbCwKCiAgLyoqCiAgICAgKiBBcHBsaWVkIHRvIGBFdWlUYWJsZVJvd2AKICAgICAqLwoKICAvKioKICAgICAqIEFwcGxpZWQgdG8gYEV1aVRhYmxlUm93YAogICAgICovCiAgcm93UHJvcHM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZF0pLAoKICAvKioKICAgICAqIENvbmZpZ3VyZXMgI0V1aVRhYmxlU2VsZWN0aW9uVHlwZQogICAgICovCgogIC8qKgogICAgICogQ29uZmlndXJlcyAjRXVpVGFibGVTZWxlY3Rpb25UeXBlCiAgICAgKi8KICBzZWxlY3Rpb246IFByb3BUeXBlcy5zaGFwZSh7CiAgICAvKioKICAgICAgICogQSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyIHRoZSBpdGVtIHNlbGVjdGlvbiBjaGFuZ2VzCiAgICAgICAqLwogICAgb25TZWxlY3Rpb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLAoKICAgIC8qKgogICAgICAgKiBBIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHBlciBpdGVtIHRvIGluZGljYXRlIHdoZXRoZXIgaXQgaXMgc2VsZWN0YWJsZQogICAgICAgKi8KICAgIHNlbGVjdGFibGU6IFByb3BUeXBlcy5mdW5jLAoKICAgIC8qKgogICAgICAgKiBBIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHBlciBpdGVtIHRvIHJldHJpZXZlIGEgbWVzc2FnZSBmb3IgaXRzIHNlbGVjdGFibGUgc3RhdGUuV2UgZGlzcGxheSB0aGVzZSBtZXNzYWdlcyBhcyBhIHRvb2x0aXAgb24gYW4gdW5zZWxlY3RhYmxlIGNoZWNrYm94CiAgICAgICAqLwogICAgc2VsZWN0YWJsZU1lc3NhZ2U6IFByb3BUeXBlcy5mdW5jLAogICAgaW5pdGlhbFNlbGVjdGVkOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQpCiAgfSksCgogIC8qKgogICAgICogQ29uZmlndXJlcyAjRXVpVGFibGVTb3J0aW5nVHlwZQogICAgICovCgogIC8qKgogICAgICogQ29uZmlndXJlcyAjRXVpVGFibGVTb3J0aW5nVHlwZQogICAgICovCiAgc29ydGluZzogUHJvcFR5cGVzLnNoYXBlKHsKICAgIC8qKgogICAgICAgKiBJbmRpY2F0ZXMgdGhlIHByb3BlcnR5L2ZpZWxkIHRvIHNvcnQgb24KICAgICAgICovCiAgICBzb3J0OiBQcm9wVHlwZXMuc2hhcGUoewogICAgICBmaWVsZDogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLAogICAgICBkaXJlY3Rpb246IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkXSkuaXNSZXF1aXJlZAogICAgfSksCgogICAgLyoqCiAgICAgICAqIEVuYWJsZXMvZGlzYWJsZXMgdW5zb3J0aW5nIG9mIHRhYmxlIGNvbHVtbnMuIFN1cHBvcnRlZCBieSBFdWlJbk1lbW9yeVRhYmxlLgogICAgICAgKi8KICAgIGFsbG93TmV1dHJhbFNvcnQ6IFByb3BUeXBlcy5ib29sLAoKICAgIC8qKgogICAgICAgKiBFbmFibGVzIHRoZSBkZWZhdWx0IHNvcnRpbmcgYWJpbGl0eSBmb3IgZWFjaCBjb2x1bW4uCiAgICAgICAqLwogICAgZW5hYmxlQWxsQ29sdW1uczogUHJvcFR5cGVzLmJvb2wsCgogICAgLyoqCiAgICAgICAqIERpc2FibGVzIHRoZSB1c2VyJ3MgYWJpbGl0eSB0byBjaGFuZ2UgdGhlIHNvcnQgYnV0IHN0aWxsIHNob3dzIHRoZSBjdXJyZW50IGRpcmVjdGlvbgogICAgICAgKi8KICAgIHJlYWRPbmx5OiBQcm9wVHlwZXMuYm9vbAogIH0pLAoKICAvKioKICAgICAqIFNldHMgdGhlIHRhYmxlLWxheW91dCBDU1MgcHJvcGVydHkuIE5vdGUgdGhhdCBhdXRvIHRhYmxlTGF5b3V0IHByZXZlbnRzIHRydW5jYXRlVGV4dCBmcm9tIHdvcmtpbmcgcHJvcGVybHkuCiAgICAgKi8KCiAgLyoqCiAgICAgKiBTZXRzIHRoZSB0YWJsZS1sYXlvdXQgQ1NTIHByb3BlcnR5LiBOb3RlIHRoYXQgYXV0byB0YWJsZUxheW91dCBwcmV2ZW50cyB0cnVuY2F0ZVRleHQgZnJvbSB3b3JraW5nIHByb3Blcmx5LgogICAgICovCiAgdGFibGVMYXlvdXQ6IFByb3BUeXBlcy5vbmVPZihbImZpeGVkIiwgImF1dG8iXSksCgogIC8qKgogICAgICogQXBwbGllZCB0byB0YWJsZSBjZWxscyA9PiBBbnkgY2VsbCB1c2luZyByZW5kZXIgZnVuY3Rpb24gd2lsbCBzZXQgdGhpcyB0byBiZSBmYWxzZSwgbGVhZGluZyB0byB1bm5lY2Vzc2FyeSB3b3JkIGJyZWFrcy4gQXBwbHkgdGV4dE9ubHk6IHRydWUgaW4gb3JkZXIgdG8gZW5zdXJlIGl0IGJyZWFrcyBwcm9wZXJseQogICAgICovCgogIC8qKgogICAgICogQXBwbGllZCB0byB0YWJsZSBjZWxscyA9PiBBbnkgY2VsbCB1c2luZyByZW5kZXIgZnVuY3Rpb24gd2lsbCBzZXQgdGhpcyB0byBiZSBmYWxzZSwgbGVhZGluZyB0byB1bm5lY2Vzc2FyeSB3b3JkIGJyZWFrcy4gQXBwbHkgdGV4dE9ubHk6IHRydWUgaW4gb3JkZXIgdG8gZW5zdXJlIGl0IGJyZWFrcyBwcm9wZXJseQogICAgICovCiAgdGV4dE9ubHk6IFByb3BUeXBlcy5ib29sCn07Cgp0cnkgewogIEV1aUJhc2ljVGFibGUuX19kb2NnZW5JbmZvID0gewogICAgZGVzY3JpcHRpb246ICcnLAogICAgZGlzcGxheU5hbWU6ICdFdWlCYXNpY1RhYmxlJywKICAgIG1ldGhvZHM6IFtdLAogICAgcHJvcHM6IHsKICAgICAgY2xhc3NOYW1lOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnY2xhc3NOYW1lJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvbW1vbi50cycsCiAgICAgICAgICBuYW1lOiAnQ29tbW9uUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdhcmlhLWxhYmVsJzogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0RlZmluZXMgYSBzdHJpbmcgdmFsdWUgdGhhdCBsYWJlbHMgdGhlIGN1cnJlbnQgZWxlbWVudC5cbicgKyAnQHNlZSBhcmlhLWxhYmVsbGVkYnkuJywKICAgICAgICBuYW1lOiAnYXJpYS1sYWJlbCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb21tb24udHMnLAogICAgICAgICAgbmFtZTogJ0NvbW1vblByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9LAogICAgICAnZGF0YS10ZXN0LXN1YmonOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZGF0YS10ZXN0LXN1YmonLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvY29tbW9uLnRzJywKICAgICAgICAgIG5hbWU6ICdDb21tb25Qcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nJwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXRlbUlkOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnRGVzY3JpYmVzIGhvdyB0byBleHRyYWN0IGEgdW5pcXVlIElEIGZyb20gZWFjaCBpdGVtLCB1c2VkIGZvciBzZWxlY3Rpb25zICYgZXhwYW5kZWQgcm93cycsCiAgICAgICAgbmFtZTogJ2l0ZW1JZCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9iYXNpY190YWJsZS9iYXNpY190YWJsZS50c3gnLAogICAgICAgICAgbmFtZTogJ0Jhc2ljVGFibGVQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnSXRlbUlkPFQ+JwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXRlbUlkVG9FeHBhbmRlZFJvd01hcDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ1JvdyBleHBhbnNpb24gdXNlcyB0aGUgaXRlbUlkIHByb3AgdG8gaWRlbnRpZnkgZWFjaCByb3cnLAogICAgICAgIG5hbWU6ICdpdGVtSWRUb0V4cGFuZGVkUm93TWFwJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Jhc2ljX3RhYmxlL2Jhc2ljX3RhYmxlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnQmFzaWNUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdJdGVtSWRUb0V4cGFuZGVkUm93TWFwJwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXRlbXM6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICdBIGxpc3Qgb2Ygb2JqZWN0cyB0byB3aG8gaW4gdGhlIHRhYmxlIC0gYW4gaXRlbSBwZXIgcm93JywKICAgICAgICBuYW1lOiAnaXRlbXMnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvYmFzaWNfdGFibGUvYmFzaWNfdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdCYXNpY1RhYmxlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnVFtdJwogICAgICAgIH0KICAgICAgfSwKICAgICAgY2VsbFByb3BzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQXBwbGllZCB0byBgRXVpVGFibGVSb3dDZWxsYCcsCiAgICAgICAgbmFtZTogJ2NlbGxQcm9wcycsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9iYXNpY190YWJsZS9iYXNpY190YWJsZS50c3gnLAogICAgICAgICAgbmFtZTogJ0Jhc2ljVGFibGVQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnb2JqZWN0IHwgQ2VsbFByb3BzQ2FsbGJhY2s8VD4nCiAgICAgICAgfQogICAgICB9LAogICAgICBjb2x1bW5zOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQW4gYXJyYXkgb2Ygb25lIG9mIHRoZSBvYmplY3RzOiAjRXVpVGFibGVGaWVsZERhdGFDb2x1bW5UeXBlLCAjRXVpVGFibGVDb21wdXRlZENvbHVtblR5cGUgb3IgI0V1aVRhYmxlQWN0aW9uc0NvbHVtblR5cGUuJywKICAgICAgICBuYW1lOiAnY29sdW1ucycsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9iYXNpY190YWJsZS9iYXNpY190YWJsZS50c3gnLAogICAgICAgICAgbmFtZTogJ0Jhc2ljVGFibGVQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdFdWlCYXNpY1RhYmxlQ29sdW1uPFQ+W10nCiAgICAgICAgfQogICAgICB9LAogICAgICBlcnJvcjogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0Vycm9yIG1lc3NhZ2UgdG8gZGlzcGxheScsCiAgICAgICAgbmFtZTogJ2Vycm9yJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Jhc2ljX3RhYmxlL2Jhc2ljX3RhYmxlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnQmFzaWNUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9LAogICAgICB0YWJsZUNhcHRpb246IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICdEZXNjcmliZXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRhYmxlLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgY2FwdGlvbiB3aWxsIGJlICJUaGlzIHRhYmxlIGNvbnRhaW5zIHtpdGVtQ291bnR9IHJvd3MuIicsCiAgICAgICAgbmFtZTogJ3RhYmxlQ2FwdGlvbicsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9iYXNpY190YWJsZS9iYXNpY190YWJsZS50c3gnLAogICAgICAgICAgbmFtZTogJ0Jhc2ljVGFibGVQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nJwogICAgICAgIH0KICAgICAgfSwKICAgICAgcm93SGVhZGVyOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnSW5kaWNhdGVzIHdoaWNoIGNvbHVtbiBzaG91bGQgYmUgdXNlZCBhcyB0aGUgaWRlbnRpZnlpbmcgY2VsbCBpbiBlYWNoIHJvdy4gU2hvdWxkIG1hdGNoIGEgImZpZWxkIiBwcm9wIGluIEZpZWxkRGF0YUNvbHVtbicsCiAgICAgICAgbmFtZTogJ3Jvd0hlYWRlcicsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9iYXNpY190YWJsZS9iYXNpY190YWJsZS50c3gnLAogICAgICAgICAgbmFtZTogJ0Jhc2ljVGFibGVQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nJwogICAgICAgIH0KICAgICAgfSwKICAgICAgaGFzQWN0aW9uczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2hhc0FjdGlvbnMnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvYmFzaWNfdGFibGUvYmFzaWNfdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdCYXNpY1RhYmxlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2Jvb2xlYW4nCiAgICAgICAgfQogICAgICB9LAogICAgICBpc0V4cGFuZGFibGU6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdpc0V4cGFuZGFibGUnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvYmFzaWNfdGFibGUvYmFzaWNfdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdCYXNpY1RhYmxlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2Jvb2xlYW4nCiAgICAgICAgfQogICAgICB9LAogICAgICBpc1NlbGVjdGFibGU6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdpc1NlbGVjdGFibGUnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvYmFzaWNfdGFibGUvYmFzaWNfdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdCYXNpY1RhYmxlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2Jvb2xlYW4nCiAgICAgICAgfQogICAgICB9LAogICAgICBsb2FkaW5nOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnUHJvdmlkZXMgYW4gaW5maW5pdGUgbG9hZGluZyBpbmRpY2F0b3InLAogICAgICAgIG5hbWU6ICdsb2FkaW5nJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Jhc2ljX3RhYmxlL2Jhc2ljX3RhYmxlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnQmFzaWNUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgbm9JdGVtc01lc3NhZ2U6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiAnTm8gaXRlbXMgZm91bmQnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJ01lc3NhZ2UgdG8gZGlzcGxheSBpZiB0YWJsZSBpcyBlbXB0eScsCiAgICAgICAgbmFtZTogJ25vSXRlbXNNZXNzYWdlJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Jhc2ljX3RhYmxlL2Jhc2ljX3RhYmxlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnQmFzaWNUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdSZWFjdE5vZGUnCiAgICAgICAgfQogICAgICB9LAogICAgICBvbkNoYW5nZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0NhbGxlZCB3aGVuZXZlciBwYWdpbmF0aW9uIG9yIHNvcnRpbmcgY2hhbmdlcyAodGhpcyBwcm9wZXJ0eSBpcyByZXF1aXJlZCB3aGVuIGVpdGhlciBwYWdpbmF0aW9uIG9yIHNvcnRpbmcgaXMgY29uZmlndXJlZCkuIFNlZSAjQ3JpdGVyaWEgb3IgI0NyaXRlcmlhV2l0aFBhZ2luYXRpb24nLAogICAgICAgIG5hbWU6ICdvbkNoYW5nZScsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9iYXNpY190YWJsZS9iYXNpY190YWJsZS50c3gnLAogICAgICAgICAgbmFtZTogJ0Jhc2ljVGFibGVQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKChjcml0ZXJpYTogQ3JpdGVyaWE8VD4pID0+IHZvaWQpIHwgKChjcml0ZXJpYTogQ3JpdGVyaWFXaXRoUGFnaW5hdGlvbjxUPikgPT4gdm9pZCknCiAgICAgICAgfQogICAgICB9LAogICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQ29uZmlndXJlcyAjUGFnaW5hdGlvbicsCiAgICAgICAgbmFtZTogJ3BhZ2luYXRpb24nLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvYmFzaWNfdGFibGUvYmFzaWNfdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdCYXNpY1RhYmxlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ1BhZ2luYXRpb24nCiAgICAgICAgfQogICAgICB9LAogICAgICByZXNwb25zaXZlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogJ3RydWUnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJ0lmIHRydWUsIHdpbGwgY29udmVydCB0YWJsZSB0byBjYXJkcyBpbiBtb2JpbGUgdmlldycsCiAgICAgICAgbmFtZTogJ3Jlc3BvbnNpdmUnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvYmFzaWNfdGFibGUvYmFzaWNfdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdCYXNpY1RhYmxlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2Jvb2xlYW4nCiAgICAgICAgfQogICAgICB9LAogICAgICByb3dQcm9wczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0FwcGxpZWQgdG8gYEV1aVRhYmxlUm93YCcsCiAgICAgICAgbmFtZTogJ3Jvd1Byb3BzJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Jhc2ljX3RhYmxlL2Jhc2ljX3RhYmxlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnQmFzaWNUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdvYmplY3QgfCBSb3dQcm9wc0NhbGxiYWNrPFQ+JwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2VsZWN0aW9uOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQ29uZmlndXJlcyAjRXVpVGFibGVTZWxlY3Rpb25UeXBlJywKICAgICAgICBuYW1lOiAnc2VsZWN0aW9uJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Jhc2ljX3RhYmxlL2Jhc2ljX3RhYmxlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnQmFzaWNUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdFdWlUYWJsZVNlbGVjdGlvblR5cGU8VD4nCiAgICAgICAgfQogICAgICB9LAogICAgICBzb3J0aW5nOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQ29uZmlndXJlcyAjRXVpVGFibGVTb3J0aW5nVHlwZScsCiAgICAgICAgbmFtZTogJ3NvcnRpbmcnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvYmFzaWNfdGFibGUvYmFzaWNfdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdCYXNpY1RhYmxlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ0V1aVRhYmxlU29ydGluZ1R5cGU8VD4nCiAgICAgICAgfQogICAgICB9LAogICAgICB0YWJsZUxheW91dDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6ICdmaXhlZCcKICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uOiAnU2V0cyB0aGUgdGFibGUtbGF5b3V0IENTUyBwcm9wZXJ0eS4gTm90ZSB0aGF0IGF1dG8gdGFibGVMYXlvdXQgcHJldmVudHMgdHJ1bmNhdGVUZXh0IGZyb20gd29ya2luZyBwcm9wZXJseS4nLAogICAgICAgIG5hbWU6ICd0YWJsZUxheW91dCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9iYXNpY190YWJsZS9iYXNpY190YWJsZS50c3gnLAogICAgICAgICAgbmFtZTogJ0Jhc2ljVGFibGVQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnZW51bScsCiAgICAgICAgICByYXc6ICciYXV0byIgfCAiZml4ZWQiJywKICAgICAgICAgIHZhbHVlOiBbewogICAgICAgICAgICB2YWx1ZTogJyJhdXRvIicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdmFsdWU6ICciZml4ZWQiJwogICAgICAgICAgfV0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRleHRPbmx5OiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQXBwbGllZCB0byB0YWJsZSBjZWxscyA9PiBBbnkgY2VsbCB1c2luZyByZW5kZXIgZnVuY3Rpb24gd2lsbCBzZXQgdGhpcyB0byBiZSBmYWxzZSwgbGVhZGluZyB0byB1bm5lY2Vzc2FyeSB3b3JkIGJyZWFrcy4gQXBwbHkgdGV4dE9ubHk6IHRydWUgaW4gb3JkZXIgdG8gZW5zdXJlIGl0IGJyZWFrcyBwcm9wZXJseScsCiAgICAgICAgbmFtZTogJ3RleHRPbmx5JywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Jhc2ljX3RhYmxlL2Jhc2ljX3RhYmxlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnQmFzaWNUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgY29tcHJlc3NlZDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2NvbXByZXNzZWQnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvdGFibGUvdGFibGUudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlUYWJsZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGV4dGVuZGVkSW50ZXJmYWNlczogWydDb21tb25Qcm9wcycsICdIVE1MQXR0cmlidXRlcycsICdBcmlhQXR0cmlidXRlcycsICdET01BdHRyaWJ1dGVzJywgJ0Jhc2ljVGFibGVQcm9wcycsICdUYWJsZUhUTUxBdHRyaWJ1dGVzJywgJ0V1aVRhYmxlUHJvcHMnXQogIH07Cn0gY2F0Y2ggKGUpIHt9"},{"version":3,"sources":["D:/work/eui/src/components/basic_table/basic_table.tsx"],"names":["React","Component","Fragment","classNames","formatAuto","formatBoolean","formatDate","formatNumber","formatText","LEFT_ALIGNMENT","RIGHT_ALIGNMENT","SortDirection","isFunction","get","EuiFlexGroup","EuiFlexItem","EuiCheckbox","EuiTable","EuiTableBody","EuiTableFooter","EuiTableFooterCell","EuiTableHeader","EuiTableHeaderCell","EuiTableHeaderCellCheckbox","EuiTableHeaderMobile","EuiTableRow","EuiTableRowCell","EuiTableRowCellCheckbox","EuiTableSortMobile","CollapsedItemActions","ExpandedItemActions","PaginationBar","EuiIcon","EuiKeyboardAccessible","EuiScreenReaderOnly","EuiI18n","EuiDelayRender","htmlIdGenerator","dataTypesProfiles","auto","align","render","value","string","number","boolean","date","DATA_TYPES","Object","keys","getItemId","item","itemId","getRowProps","rowProps","getCellProps","column","cellProps","getColumnFooter","items","pagination","footer","undefined","hasPagination","x","hasOwnProperty","EuiBasicTable","nextProps","prevState","selection","filter","selectedItem","findIndex","length","onSelectionChange","props","tbody","removeLoadingListeners","loading","addLoadingListeners","listener","event","stopPropagation","preventDefault","forEach","addEventListener","cleanups","push","removeEventListener","cleanup","isMobile","selectableItems","selectable","checked","state","disabled","onChange","target","changeSelection","selectAllRows","sorting","sortable","field","name","sort","direction","Error","onColumnSortChange","initialSelectionRendered","getInitialSelection","prevProps","initialSelected","setState","newSelection","criteria","page","index","pageIndex","size","pageSize","clearSelection","currentCriteria","buildCriteria","ASC","reverse","className","columns","error","noItemsMessage","compressed","itemIdToExpandedRowMap","responsive","isSelectable","isExpandable","hasActions","tableCaption","rowHeader","tableLayout","rest","classes","table","renderTable","paginationBar","renderPaginationBar","mobileHeader","renderSelectAll","renderTableMobileSort","caption","renderTableCaption","head","renderTableHead","body","renderTableBody","renderTableFooter","tableId","enableAllColumns","hideForMobile","sortDirection","resolveColumnSortDirection","key","onSort","resolveColumnOnSort","isSorted","isSortAscending","isAsc","captionElement","pageCount","Math","ceil","totalItemCount","itemCount","headers","width","dataType","mobileOptions","isMobileHeader","readOnly","description","columnAlign","getAlignForDataType","actions","footers","hasDefinedFooter","only","renderErrorBody","renderEmptyBody","rows","map","tableItemIndex","renderItemRow","setTbody","colSpan","rowIndex","cells","itemIdCallback","selected","find","calculatedHasSelection","renderItemSelectionCell","calculatedHasActions","columnIndex","renderItemActionsCell","fieldDataColumn","renderItemFieldDataCell","renderItemComputedCell","expandedRowColSpan","mobileOnlyCols","reduce","num","hasExpandedRow","expandedRowId","expandedRow","rowPropsCallback","row","onClick","title","selectableMessage","selectThisRow","actionEnabled","action","enabled","actualActions","available","primaryActions","o","isPrimary","slice","tools","setScopeRow","contentRenderer","getRendererForDataType","content","renderItemCell","isExpander","textOnly","cellPropsCallback","header","profile","join","ariaLabel","onPageSizeChange","bind","onPageChange"],"mappings":"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AFO;AAGpBT,EAAAA,cAAc,EAAE;AAHI,C;;;;;;;;AAjUxB;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;AADA;AACA;;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;;AADA;AACA;;;;AADA;AACA;;;;;;;;;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;;AADA;AACA;;;;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;;AADA;AACA;;;AADA;AACA;;;AADA;AACA;;;;;;;AADA;AACA;;;;AADA;AACA;;;;AADA;AACA;;;;;AADA;AACA;;;AADA;AACA;;;;AADA;AACA;;;AADA;AACA","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from \"prop-types\";\nimport classNames from 'classnames';\nimport { formatAuto, formatBoolean, formatDate, formatNumber, formatText, LEFT_ALIGNMENT, RIGHT_ALIGNMENT, SortDirection } from '../../services';\nimport { isFunction } from '../../services/predicate';\nimport { get } from '../../services/objects';\nimport { EuiFlexGroup, EuiFlexItem } from '../flex';\nimport { EuiCheckbox } from '../form';\nimport { EuiTable, EuiTableBody, EuiTableFooter, EuiTableFooterCell, EuiTableHeader, EuiTableHeaderCell, EuiTableHeaderCellCheckbox, EuiTableHeaderMobile, EuiTableRow, EuiTableRowCell, EuiTableRowCellCheckbox, EuiTableSortMobile } from '../table';\nimport { CollapsedItemActions } from './collapsed_item_actions';\nimport { ExpandedItemActions } from './expanded_item_actions';\nimport { PaginationBar } from './pagination_bar';\nimport { EuiIcon } from '../icon';\nimport { EuiKeyboardAccessible, EuiScreenReaderOnly } from '../accessibility';\nimport { EuiI18n } from '../i18n';\nimport { EuiDelayRender } from '../delay_render';\nimport { htmlIdGenerator } from '../../services/accessibility';\nvar dataTypesProfiles = {\n  auto: {\n    align: LEFT_ALIGNMENT,\n    render: function render(value) {\n      return formatAuto(value);\n    }\n  },\n  string: {\n    align: LEFT_ALIGNMENT,\n    render: function render(value) {\n      return formatText(value);\n    }\n  },\n  number: {\n    align: RIGHT_ALIGNMENT,\n    render: function render(value) {\n      return formatNumber(value);\n    }\n  },\n  boolean: {\n    align: LEFT_ALIGNMENT,\n    render: function render(value) {\n      return formatBoolean(value);\n    }\n  },\n  date: {\n    align: LEFT_ALIGNMENT,\n    render: function render(value) {\n      return formatDate(value);\n    }\n  }\n};\nvar DATA_TYPES = Object.keys(dataTypesProfiles);\nexport function getItemId(item, itemId) {\n  if (itemId) {\n    if (isFunction(itemId)) {\n      return itemId(item);\n    } // @ts-ignore never mind about the index signature\n\n\n    return item[itemId];\n  }\n}\n\nfunction getRowProps(item, rowProps) {\n  if (rowProps) {\n    if (isFunction(rowProps)) {\n      return rowProps(item);\n    }\n\n    return rowProps;\n  }\n\n  return {};\n}\n\nfunction getCellProps(item, column, cellProps) {\n  if (cellProps) {\n    if (isFunction(cellProps)) {\n      return cellProps(item, column);\n    }\n\n    return cellProps;\n  }\n\n  return {};\n}\n\nfunction getColumnFooter(column, _ref) {\n  var items = _ref.items,\n      pagination = _ref.pagination;\n  var _ref2 = column,\n      footer = _ref2.footer;\n\n  if (footer) {\n    if (isFunction(footer)) {\n      return footer({\n        items: items,\n        pagination: pagination\n      });\n    }\n\n    return footer;\n  }\n\n  return undefined;\n}\n\nfunction hasPagination(x) {\n  return x.hasOwnProperty('pagination') && !!x.pagination;\n}\n\nexport class EuiBasicTable extends Component {\n  static defaultProps = {\n    responsive: true,\n    tableLayout: 'fixed',\n    noItemsMessage: 'No items found'\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!nextProps.selection) {\n      // next props doesn't have a selection, reset our state\n      return {\n        selection: []\n      };\n    }\n\n    const {\n      itemId\n    } = nextProps;\n    const selection = prevState.selection.filter(selectedItem => nextProps.items.findIndex(item => getItemId(item, itemId) === getItemId(selectedItem, itemId)) !== -1);\n\n    if (selection.length !== prevState.selection.length) {\n      if (nextProps.selection.onSelectionChange) {\n        nextProps.selection.onSelectionChange(selection);\n      }\n\n      return {\n        selection\n      };\n    }\n\n    return null;\n  } // used for moving in & out of `loading` state\n\n\n  cleanups = [];\n  tbody = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      // used for checking if  initial selection is rendered\n      initialSelectionRendered: false,\n      selection: []\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.loading && this.tbody) this.addLoadingListeners(this.tbody);\n    this.getInitialSelection();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.loading !== this.props.loading) {\n      if (this.props.loading && this.tbody) {\n        this.addLoadingListeners(this.tbody);\n      } else {\n        this.removeLoadingListeners();\n      }\n    }\n\n    this.getInitialSelection();\n  }\n\n  componentWillUnmount() {\n    this.removeLoadingListeners();\n  }\n\n  getInitialSelection() {\n    if (this.props.selection && this.props.selection.initialSelected && !this.state.initialSelectionRendered && this.props.items.length > 0) {\n      this.setState({\n        selection: this.props.selection.initialSelected\n      });\n      this.setState({\n        initialSelectionRendered: true\n      });\n    }\n  }\n\n  setSelection(newSelection) {\n    this.changeSelection(newSelection);\n  }\n\n  setTbody = tbody => {\n    // remove listeners from an existing element\n    this.removeLoadingListeners(); // update the ref\n\n    this.tbody = tbody; // if loading, add listeners\n\n    if (this.props.loading === true && tbody) {\n      this.addLoadingListeners(tbody);\n    }\n  };\n  addLoadingListeners = tbody => {\n    const listener = event => {\n      event.stopPropagation();\n      event.preventDefault();\n    };\n\n    ['mousedown', 'mouseup', 'mouseover', 'mouseout', 'mouseenter', 'mouseleave', 'click', 'dblclick', 'keydown', 'keyup', 'keypress'].forEach(event => {\n      tbody.addEventListener(event, listener, true);\n      this.cleanups.push(() => {\n        tbody.removeEventListener(event, listener, true);\n      });\n    });\n  };\n  removeLoadingListeners = () => {\n    this.cleanups.forEach(cleanup => cleanup());\n    this.cleanups.length = 0;\n  };\n\n  buildCriteria(props) {\n    const criteria = {};\n\n    if (hasPagination(props)) {\n      criteria.page = {\n        index: props.pagination.pageIndex,\n        size: props.pagination.pageSize\n      };\n    }\n\n    if (props.sorting) {\n      criteria.sort = props.sorting.sort;\n    }\n\n    return criteria;\n  }\n\n  changeSelection(selection) {\n    if (!this.props.selection) {\n      return;\n    }\n\n    this.setState({\n      selection\n    });\n\n    if (this.props.selection.onSelectionChange) {\n      this.props.selection.onSelectionChange(selection);\n    }\n  }\n\n  clearSelection() {\n    this.changeSelection([]);\n  }\n\n  onPageSizeChange(size) {\n    this.clearSelection();\n    const currentCriteria = this.buildCriteria(this.props);\n    const criteria = { ...currentCriteria,\n      page: {\n        index: 0,\n        // when page size changes, we take the user back to the first page\n        size\n      }\n    };\n\n    if (this.props.onChange) {\n      this.props.onChange(criteria);\n    }\n  }\n\n  onPageChange(index) {\n    this.clearSelection();\n    const currentCriteria = this.buildCriteria(this.props);\n    const criteria = { ...currentCriteria,\n      page: { ...currentCriteria.page,\n        index\n      }\n    };\n\n    if (this.props.onChange) {\n      this.props.onChange(criteria);\n    }\n  }\n\n  onColumnSortChange(column) {\n    this.clearSelection();\n    const currentCriteria = this.buildCriteria(this.props);\n    let direction = SortDirection.ASC;\n\n    if (currentCriteria && currentCriteria.sort && (currentCriteria.sort.field === column.field || currentCriteria.sort.field === column.name)) {\n      direction = SortDirection.reverse(currentCriteria.sort.direction);\n    }\n\n    const criteria = { ...currentCriteria,\n      // resetting the page if the criteria has one\n      page: !currentCriteria.page ? undefined : {\n        index: 0,\n        size: currentCriteria.page.size\n      },\n      sort: {\n        field: column.field || column.name,\n        direction\n      }\n    };\n\n    if (this.props.onChange) {\n      // @ts-ignore complex relationship between pagination's existence and criteria, the code logic ensures this is correctly maintained\n      this.props.onChange(criteria);\n    }\n  }\n\n  tableId = htmlIdGenerator('__table')();\n\n  render() {\n    const {\n      className,\n      loading,\n      items,\n      itemId,\n      columns,\n      pagination,\n      sorting,\n      selection,\n      onChange,\n      error,\n      noItemsMessage,\n      compressed,\n      itemIdToExpandedRowMap,\n      responsive,\n      isSelectable,\n      isExpandable,\n      hasActions,\n      rowProps,\n      cellProps,\n      tableCaption,\n      rowHeader,\n      tableLayout,\n      ...rest\n    } = this.props;\n    const classes = classNames('euiBasicTable', {\n      'euiBasicTable-loading': loading\n    }, className);\n    const table = this.renderTable();\n    const paginationBar = this.renderPaginationBar();\n    return <div className={classes} {...rest}>\n        {table}\n        {paginationBar}\n      </div>;\n  }\n\n  renderTable() {\n    const {\n      compressed,\n      responsive,\n      tableLayout\n    } = this.props;\n    const mobileHeader = responsive ? <EuiTableHeaderMobile>\n        <EuiFlexGroup responsive={false} justifyContent=\"spaceBetween\" alignItems=\"baseline\">\n          <EuiFlexItem grow={false}>{this.renderSelectAll(true)}</EuiFlexItem>\n          <EuiFlexItem grow={false}>{this.renderTableMobileSort()}</EuiFlexItem>\n        </EuiFlexGroup>\n      </EuiTableHeaderMobile> : undefined;\n    const caption = this.renderTableCaption();\n    const head = this.renderTableHead();\n    const body = this.renderTableBody();\n    const footer = this.renderTableFooter();\n    return <div>\n        {mobileHeader}\n        <EuiTable id={this.tableId} tableLayout={tableLayout} responsive={responsive} compressed={compressed}>\n          {caption}\n          {head}\n          {body}\n          {footer}\n        </EuiTable>\n      </div>;\n  }\n\n  renderTableMobileSort() {\n    const {\n      columns,\n      sorting\n    } = this.props;\n    const items = [];\n\n    if (!sorting) {\n      return null;\n    }\n\n    columns.forEach((column, index) => {\n      if (column.field && sorting.sort && !!sorting.enableAllColumns && column.sortable == null) {\n        column = { ...column,\n          sortable: true\n        };\n      }\n\n      if (!column.sortable || column.hideForMobile) {\n        return;\n      }\n\n      const sortDirection = this.resolveColumnSortDirection(column);\n      items.push({\n        name: column.name,\n        key: `_data_s_${column.field}_${index}`,\n        onSort: this.resolveColumnOnSort(column),\n        isSorted: !!sortDirection,\n        isSortAscending: sortDirection ? SortDirection.isAsc(sortDirection) : undefined\n      });\n    });\n    return items.length ? <EuiTableSortMobile items={items} /> : null;\n  }\n\n  renderTableCaption() {\n    const {\n      items,\n      pagination,\n      tableCaption\n    } = this.props;\n    let captionElement;\n\n    if (tableCaption) {\n      if (pagination) {\n        captionElement = <EuiI18n token=\"euiBasicTable.tableCaptionWithPagination\" default=\"{tableCaption}; Page {page} of {pageCount}.\" values={{\n          tableCaption,\n          page: pagination.pageIndex + 1,\n          pageCount: Math.ceil(pagination.totalItemCount / pagination.pageSize)\n        }} />;\n      } else {\n        captionElement = tableCaption;\n      }\n    } else {\n      if (pagination) {\n        if (pagination.totalItemCount > 0) {\n          captionElement = <EuiI18n token=\"euiBasicTable.tableAutoCaptionWithPagination\" default=\"This table contains {itemCount} rows out of {totalItemCount} rows; Page {page} of {pageCount}.\" values={{\n            totalItemCount: pagination.totalItemCount,\n            itemCount: items.length,\n            page: pagination.pageIndex + 1,\n            pageCount: Math.ceil(pagination.totalItemCount / pagination.pageSize)\n          }} />;\n        } else {\n          captionElement = <EuiI18n token=\"euiBasicTable.tableSimpleAutoCaptionWithPagination\" default=\"This table contains {itemCount} rows; Page {page} of {pageCount}.\" values={{\n            itemCount: items.length,\n            page: pagination.pageIndex + 1,\n            pageCount: Math.ceil(pagination.totalItemCount / pagination.pageSize)\n          }} />;\n        }\n      } else {\n        captionElement = <EuiI18n token=\"euiBasicTable.tableAutoCaptionWithoutPagination\" default=\"This table contains {itemCount} rows.\" values={{\n          itemCount: items.length\n        }} />;\n      }\n    }\n\n    return <EuiScreenReaderOnly>\n        <caption className=\"euiTableCaption\">\n          <EuiDelayRender>{captionElement}</EuiDelayRender>\n        </caption>\n      </EuiScreenReaderOnly>;\n  }\n\n  renderSelectAll = isMobile => {\n    const {\n      items,\n      selection\n    } = this.props;\n\n    if (!selection) {\n      return;\n    }\n\n    const selectableItems = items.filter(item => !selection.selectable || selection.selectable(item));\n    const checked = this.state.selection && selectableItems.length > 0 && this.state.selection.length === selectableItems.length;\n    const disabled = selectableItems.length === 0;\n\n    const onChange = event => {\n      if (event.target.checked) {\n        this.changeSelection(selectableItems);\n      } else {\n        this.changeSelection([]);\n      }\n    };\n\n    return <EuiI18n token=\"euiBasicTable.selectAllRows\" default=\"Select all rows\">\n        {selectAllRows => <EuiCheckbox id={`_selection_column-checkbox_${htmlIdGenerator()()}`} type={isMobile ? undefined : 'inList'} checked={checked} disabled={disabled} onChange={onChange} // Only add data-test-subj to one of the checkboxes\n      data-test-subj={isMobile ? undefined : 'checkboxSelectAll'} aria-label={selectAllRows} label={isMobile ? selectAllRows : null} />}\n      </EuiI18n>;\n  };\n\n  renderTableHead() {\n    const {\n      columns,\n      selection\n    } = this.props;\n    const headers = [];\n\n    if (selection) {\n      headers.push(<EuiTableHeaderCellCheckbox key=\"_selection_column_h\">\n          {this.renderSelectAll(false)}\n        </EuiTableHeaderCellCheckbox>);\n    }\n\n    columns.forEach((column, index) => {\n      const {\n        field,\n        width,\n        name,\n        align,\n        dataType,\n        sortable,\n        mobileOptions,\n        isMobileHeader,\n        hideForMobile,\n        readOnly,\n        description\n      } = column;\n      const columnAlign = align || this.getAlignForDataType(dataType); // actions column\n\n      if (column.actions) {\n        headers.push(<EuiTableHeaderCell key={`_actions_h_${index}`} align=\"right\" width={width} description={description} mobileOptions={mobileOptions}>\n            {name}\n          </EuiTableHeaderCell>);\n        return;\n      } // computed column\n\n\n      if (!column.field) {\n        const sorting = {}; // computed columns are only sortable if their `sortable` is a function\n\n        if (this.props.sorting && typeof sortable === 'function') {\n          const sortDirection = this.resolveColumnSortDirection(column);\n          sorting.isSorted = !!sortDirection;\n          sorting.isSortAscending = sortDirection ? SortDirection.isAsc(sortDirection) : undefined;\n          sorting.onSort = this.resolveColumnOnSort(column);\n          sorting.readOnly = this.props.sorting.readOnly || readOnly;\n        }\n\n        headers.push(<EuiTableHeaderCell key={`_computed_column_h_${index}`} align={columnAlign} width={width} mobileOptions={mobileOptions} data-test-subj={`tableHeaderCell_${name}_${index}`} description={description} {...sorting}>\n            {name}\n          </EuiTableHeaderCell>);\n        return;\n      } // field data column\n\n\n      const sorting = {};\n\n      if (this.props.sorting) {\n        if (this.props.sorting.sort && !!this.props.sorting.enableAllColumns && column.sortable == null) {\n          column = { ...column,\n            sortable: true\n          };\n        }\n\n        const {\n          sortable\n        } = column;\n\n        if (sortable) {\n          const sortDirection = this.resolveColumnSortDirection(column);\n          sorting.isSorted = !!sortDirection;\n          sorting.isSortAscending = sortDirection ? SortDirection.isAsc(sortDirection) : undefined;\n          sorting.onSort = this.resolveColumnOnSort(column);\n          sorting.readOnly = this.props.sorting.readOnly || readOnly;\n        }\n      }\n\n      headers.push(<EuiTableHeaderCell key={`_data_h_${field}_${index}`} align={columnAlign} width={width} isMobileHeader={isMobileHeader} hideForMobile={hideForMobile} mobileOptions={mobileOptions} data-test-subj={`tableHeaderCell_${field}_${index}`} description={description} {...sorting}>\n          {name}\n        </EuiTableHeaderCell>);\n    });\n    return <EuiTableHeader>{headers}</EuiTableHeader>;\n  }\n\n  renderTableFooter() {\n    const {\n      items,\n      columns,\n      pagination,\n      selection\n    } = this.props;\n    const footers = [];\n    let hasDefinedFooter = false;\n\n    if (selection) {\n      // Create an empty cell to compensate for additional selection column\n      footers.push(<EuiTableFooterCell key=\"_selection_column_f\">\n          {undefined}\n        </EuiTableFooterCell>);\n    }\n\n    columns.forEach(column => {\n      const footer = getColumnFooter(column, {\n        items,\n        pagination\n      });\n      const {\n        mobileOptions,\n        isMobileHeader,\n        field,\n        align\n      } = column;\n\n      if (mobileOptions && mobileOptions.only || isMobileHeader) {\n        return; // exclude columns that only exist for mobile headers\n      }\n\n      if (footer) {\n        footers.push(<EuiTableFooterCell key={`footer_${field}_${footers.length - 1}`} align={align}>\n            {footer}\n          </EuiTableFooterCell>);\n        hasDefinedFooter = true;\n      } else {\n        // Footer is undefined, so create an empty cell to preserve layout\n        footers.push(<EuiTableFooterCell key={`footer_empty_${footers.length - 1}`} align={align}>\n            {undefined}\n          </EuiTableFooterCell>);\n      }\n    });\n    return footers.length && hasDefinedFooter ? <EuiTableFooter>{footers}</EuiTableFooter> : null;\n  }\n\n  renderTableBody() {\n    if (this.props.error) {\n      return this.renderErrorBody(this.props.error);\n    }\n\n    const {\n      items\n    } = this.props;\n\n    if (items.length === 0) {\n      return this.renderEmptyBody();\n    }\n\n    const rows = items.map((item, index) => {\n      // if there's pagination the item's index must be adjusted to the where it is in the whole dataset\n      const tableItemIndex = hasPagination(this.props) ? this.props.pagination.pageIndex * this.props.pagination.pageSize + index : index;\n      return this.renderItemRow(item, tableItemIndex);\n    });\n    return <EuiTableBody bodyRef={this.setTbody}>{rows}</EuiTableBody>;\n  }\n\n  renderErrorBody(error) {\n    const colSpan = this.props.columns.length + (this.props.selection ? 1 : 0);\n    return <EuiTableBody>\n        <EuiTableRow>\n          <EuiTableRowCell align=\"center\" colSpan={colSpan} isMobileFullWidth={true}>\n            <EuiIcon type=\"minusInCircle\" color=\"danger\" /> {error}\n          </EuiTableRowCell>\n        </EuiTableRow>\n      </EuiTableBody>;\n  }\n\n  renderEmptyBody() {\n    const {\n      columns,\n      selection,\n      noItemsMessage\n    } = this.props;\n    const colSpan = columns.length + (selection ? 1 : 0);\n    return <EuiTableBody>\n        <EuiTableRow>\n          <EuiTableRowCell align=\"center\" colSpan={colSpan} isMobileFullWidth={true}>\n            {noItemsMessage}\n          </EuiTableRowCell>\n        </EuiTableRow>\n      </EuiTableBody>;\n  }\n\n  renderItemRow(item, rowIndex) {\n    const {\n      columns,\n      selection,\n      isSelectable,\n      hasActions,\n      rowHeader,\n      itemIdToExpandedRowMap = {},\n      isExpandable\n    } = this.props;\n    const cells = [];\n    const {\n      itemId: itemIdCallback\n    } = this.props;\n    const itemId = getItemId(item, itemIdCallback) != null ? getItemId(item, itemIdCallback) : rowIndex;\n    const selected = !selection ? false : this.state.selection && !!this.state.selection.find(selectedItem => getItemId(selectedItem, itemIdCallback) === itemId);\n    let calculatedHasSelection;\n\n    if (selection) {\n      cells.push(this.renderItemSelectionCell(itemId, item, selected));\n      calculatedHasSelection = true;\n    }\n\n    let calculatedHasActions;\n    columns.forEach((column, columnIndex) => {\n      if (column.actions) {\n        cells.push(this.renderItemActionsCell(itemId, item, column, columnIndex));\n        calculatedHasActions = true;\n      } else if (column.field) {\n        const fieldDataColumn = column;\n        cells.push(this.renderItemFieldDataCell(itemId, item, column, columnIndex, fieldDataColumn.field === rowHeader));\n      } else {\n        cells.push(this.renderItemComputedCell(itemId, item, column, columnIndex));\n      }\n    }); // Occupy full width of table, taking checkbox & mobile only columns into account.\n\n    let expandedRowColSpan = selection ? columns.length + 1 : columns.length;\n    const mobileOnlyCols = columns.reduce((num, column) => {\n      if (column.mobileOptions && column.mobileOptions.only) {\n        return num + 1;\n      }\n\n      return column.isMobileHeader ? num + 1 : num + 0; // BWC only\n    }, 0);\n    expandedRowColSpan = expandedRowColSpan - mobileOnlyCols; // We'll use the ID to associate the expanded row with the original.\n\n    const hasExpandedRow = itemIdToExpandedRowMap.hasOwnProperty(itemId);\n    const expandedRowId = hasExpandedRow ? `row_${itemId}_expansion` : undefined;\n    const expandedRow = hasExpandedRow ? <EuiTableRow id={expandedRowId} isExpandedRow={true} isSelectable={isSelectable}>\n        <EuiTableRowCell colSpan={expandedRowColSpan} textOnly={false}>\n          {itemIdToExpandedRowMap[itemId]}\n        </EuiTableRowCell>\n      </EuiTableRow> : undefined;\n    const {\n      rowProps: rowPropsCallback\n    } = this.props;\n    const rowProps = getRowProps(item, rowPropsCallback);\n    const row = <EuiTableRow aria-owns={expandedRowId} isSelectable={isSelectable == null ? calculatedHasSelection : isSelectable} isSelected={selected} hasActions={hasActions == null ? calculatedHasActions : hasActions} isExpandable={isExpandable} {...rowProps}>\n        {cells}\n      </EuiTableRow>;\n    return <Fragment key={`row_${itemId}`}>\n        {rowProps.onClick ? <EuiKeyboardAccessible>{row}</EuiKeyboardAccessible> : row}\n        {expandedRow}\n      </Fragment>;\n  }\n\n  renderItemSelectionCell(itemId, item, selected) {\n    const {\n      selection\n    } = this.props;\n    const key = `_selection_column_${itemId}`;\n    const checked = selected;\n    const disabled = selection.selectable && !selection.selectable(item);\n    const title = selection.selectableMessage && selection.selectableMessage(!disabled, item);\n\n    const onChange = event => {\n      if (event.target.checked) {\n        this.changeSelection([...this.state.selection, item]);\n      } else {\n        const {\n          itemId: itemIdCallback\n        } = this.props;\n        this.changeSelection(this.state.selection.reduce((selection, selectedItem) => {\n          if (getItemId(selectedItem, itemIdCallback) !== itemId) {\n            selection.push(selectedItem);\n          }\n\n          return selection;\n        }, []));\n      }\n    };\n\n    return <EuiTableRowCellCheckbox key={key}>\n        <EuiI18n token=\"euiBasicTable.selectThisRow\" default=\"Select this row\">\n          {selectThisRow => <EuiCheckbox id={`${key}-checkbox`} type=\"inList\" disabled={disabled} checked={checked} onChange={onChange} title={title || selectThisRow} aria-label={title || selectThisRow} data-test-subj={`checkboxSelectRow-${itemId}`} />}\n        </EuiI18n>\n      </EuiTableRowCellCheckbox>;\n  }\n\n  renderItemActionsCell(itemId, item, column, columnIndex) {\n    const actionEnabled = action => this.state.selection.length === 0 && (!action.enabled || action.enabled(item));\n\n    let actualActions = column.actions.filter(action => !action.available || action.available(item));\n\n    if (actualActions.length > 2) {\n      // if any of the actions `isPrimary`, add them inline as well, but only the first 2\n      const primaryActions = actualActions.filter(o => o.isPrimary);\n      actualActions = primaryActions.slice(0, 2); // if we have more than 1 action, we don't show them all in the cell, instead we\n      // put them all in a popover tool. This effectively means we can only have a maximum\n      // of one tool per row (it's either and normal action, or it's a popover that shows multiple actions)\n      //\n      // here we create a single custom action that triggers the popover with all the configured actions\n\n      actualActions.push({\n        name: 'All actions',\n        render: item => {\n          return <CollapsedItemActions actions={column.actions} itemId={itemId} item={item} actionEnabled={actionEnabled} />;\n        }\n      });\n    }\n\n    const tools = <ExpandedItemActions actions={actualActions} itemId={itemId} item={item} actionEnabled={actionEnabled} />;\n    const key = `record_actions_${itemId}_${columnIndex}`;\n    return <EuiTableRowCell showOnHover={true} key={key} align=\"right\" textOnly={false} hasActions={true}>\n        {tools}\n      </EuiTableRowCell>;\n  }\n\n  renderItemFieldDataCell(itemId, item, column, columnIndex, setScopeRow) {\n    const {\n      field,\n      render,\n      dataType\n    } = column;\n    const key = `_data_column_${field}_${itemId}_${columnIndex}`;\n    const contentRenderer = render || this.getRendererForDataType(dataType);\n    const value = get(item, field);\n    const content = contentRenderer(value, item);\n    return this.renderItemCell(item, column, key, content, setScopeRow);\n  }\n\n  renderItemComputedCell(itemId, item, column, columnIndex) {\n    const {\n      render\n    } = column;\n    const key = `_computed_column_${itemId}_${columnIndex}`;\n    const contentRenderer = render || this.getRendererForDataType();\n    const content = contentRenderer(item);\n    return this.renderItemCell(item, column, key, content, false);\n  }\n\n  renderItemCell(item, column, key, content, setScopeRow) {\n    const {\n      align,\n      render,\n      dataType,\n      isExpander,\n      textOnly,\n      name,\n      field,\n      description,\n      sortable,\n      footer,\n      mobileOptions,\n      ...rest\n    } = column;\n    const columnAlign = align || this.getAlignForDataType(dataType);\n    const {\n      cellProps: cellPropsCallback\n    } = this.props;\n    const cellProps = getCellProps(item, column, cellPropsCallback);\n    return <EuiTableRowCell key={key} align={columnAlign} isExpander={isExpander} textOnly={textOnly || !render} setScopeRow={setScopeRow} mobileOptions={{ ...mobileOptions,\n      render: mobileOptions && mobileOptions.render && mobileOptions.render(item),\n      header: mobileOptions && mobileOptions.header === false ? false : name\n    }} {...cellProps} {...rest}>\n        {content}\n      </EuiTableRowCell>;\n  }\n\n  resolveColumnSortDirection = column => {\n    const {\n      sorting\n    } = this.props;\n    const {\n      sortable,\n      field,\n      name\n    } = column;\n\n    if (!sorting || !sorting.sort || !sortable) {\n      return;\n    }\n\n    if (sorting.sort.field === field || sorting.sort.field === name) {\n      return sorting.sort.direction;\n    }\n  };\n  resolveColumnOnSort = column => {\n    const {\n      sorting\n    } = this.props;\n    const {\n      sortable,\n      name\n    } = column;\n\n    if (!sorting || !sortable) {\n      return;\n    }\n\n    if (!this.props.onChange) {\n      throw new Error(`BasicTable is configured to be sortable on column [${name}] but\n          [onChange] is not configured. This callback must be implemented to handle the sort requests`);\n    }\n\n    return () => this.onColumnSortChange(column);\n  };\n\n  getRendererForDataType(dataType = 'auto') {\n    const profile = dataTypesProfiles[dataType];\n\n    if (!profile) {\n      throw new Error(`Unknown dataType [${dataType}]. The supported data types are [${DATA_TYPES.join(', ')}]`);\n    }\n\n    return profile.render;\n  }\n\n  getAlignForDataType(dataType = 'auto') {\n    const profile = dataTypesProfiles[dataType];\n\n    if (!profile) {\n      throw new Error(`Unknown dataType [${dataType}]. The supported data types are [${DATA_TYPES.join(', ')}]`);\n    }\n\n    return profile.align;\n  }\n\n  renderPaginationBar() {\n    const {\n      error,\n      pagination,\n      tableCaption,\n      onChange\n    } = this.props;\n\n    if (!error && pagination && pagination.totalItemCount > 0) {\n      if (!onChange) {\n        throw new Error(`The Basic Table is configured with pagination but [onChange] is\n        not configured. This callback must be implemented to handle pagination changes`);\n      }\n\n      let ariaLabel = undefined;\n\n      if (tableCaption) {\n        ariaLabel = <EuiI18n token=\"euiBasicTable.tablePagination\" default=\"Pagination for preceding table: {tableCaption}\" values={{\n          tableCaption\n        }} />;\n      }\n\n      return <PaginationBar aria-controls={this.tableId} pagination={pagination} onPageSizeChange={this.onPageSizeChange.bind(this)} onPageChange={this.onPageChange.bind(this)} aria-label={ariaLabel} />;\n    }\n  }\n\n}\nEuiBasicTable.propTypes = {\n  className: PropTypes.string,\n  \"aria-label\": PropTypes.string,\n  \"data-test-subj\": PropTypes.string,\n\n  /**\n     * Describes how to extract a unique ID from each item, used for selections & expanded rows\n     */\n\n  /**\n     * Describes how to extract a unique ID from each item, used for selections & expanded rows\n     */\n  itemId: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.number.isRequired, PropTypes.func.isRequired]),\n\n  /**\n     * Row expansion uses the itemId prop to identify each row\n     */\n\n  /**\n     * Row expansion uses the itemId prop to identify each row\n     */\n  itemIdToExpandedRowMap: PropTypes.shape({}),\n\n  /**\n     * A list of objects to who in the table - an item per row\n     */\n\n  /**\n     * A list of objects to who in the table - an item per row\n     */\n  items: PropTypes.arrayOf(PropTypes.any.isRequired),\n\n  /**\n     * Applied to `EuiTableRowCell`\n     */\n\n  /**\n     * Applied to `EuiTableRowCell`\n     */\n  cellProps: PropTypes.oneOfType([PropTypes.any.isRequired, PropTypes.func.isRequired]),\n\n  /**\n     * An array of one of the objects: #EuiTableFieldDataColumnType, #EuiTableComputedColumnType or #EuiTableActionsColumnType.\n     */\n\n  /**\n     * An array of one of the objects: #EuiTableFieldDataColumnType, #EuiTableComputedColumnType or #EuiTableActionsColumnType.\n     */\n  columns: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.shape({\n    /**\n       * A field of the item (may be a nested field)\n       */\n    field: PropTypes.oneOfType([PropTypes.any.isRequired, PropTypes.string.isRequired]).isRequired,\n    // supports outer.inner key paths\n\n    /**\n       * The display name of the column\n       */\n    name: PropTypes.node.isRequired,\n\n    /**\n       * A description of the column (will be presented as a title over the column header)\n       */\n    description: PropTypes.string,\n\n    /**\n       * Describes the data types of the displayed value (serves as a rendering hint for the table)\n       */\n    dataType: PropTypes.oneOf([\"auto\", \"string\", \"number\", \"boolean\", \"date\"]),\n\n    /**\n       * A CSS width property. Hints for the required width of the column (e.g. \"30%\", \"100px\", etc..)\n       */\n    width: PropTypes.string,\n\n    /**\n       * Defines whether the user can sort on this column. If a function is provided, this function returns the value to sort against\n       */\n    sortable: PropTypes.oneOfType([PropTypes.bool.isRequired, PropTypes.func.isRequired]),\n    isExpander: PropTypes.bool,\n    textOnly: PropTypes.bool,\n\n    /**\n       * Defines the horizontal alignment of the column\n       */\n    align: PropTypes.oneOf([\"left\", \"right\", \"center\"]),\n\n    /**\n       * Indicates whether this column should truncate its content when it doesn't fit\n       */\n    truncateText: PropTypes.bool,\n    isMobileHeader: PropTypes.bool,\n    mobileOptions: PropTypes.shape({\n      show: PropTypes.bool,\n      only: PropTypes.bool,\n      render: PropTypes.func,\n      header: PropTypes.bool\n    }),\n    hideForMobile: PropTypes.bool,\n\n    /**\n       * Describe a custom renderer function for the content\n       */\n    render: PropTypes.func,\n\n    /**\n       * Content to display in the footer beneath this column\n       */\n    footer: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.element.isRequired, PropTypes.func.isRequired]),\n\n    /**\n       * Disables the user's ability to change the sort but still shows the current direction\n       */\n    readOnly: PropTypes.bool,\n    className: PropTypes.string,\n    \"aria-label\": PropTypes.string,\n    \"data-test-subj\": PropTypes.string\n  }).isRequired, PropTypes.shape({\n    /**\n       * A function that computes the value for each item and renders it\n       */\n    render: PropTypes.func.isRequired,\n\n    /**\n       * The display name of the column\n       */\n    name: PropTypes.node,\n\n    /**\n       * A description of the column (will be presented as a title over the column header\n       */\n    description: PropTypes.string,\n\n    /**\n       * If provided, allows this column to be sorted on. Must return the value to sort against.\n       */\n    sortable: PropTypes.func,\n\n    /**\n       * A CSS width property. Hints for the required width of the column\n       */\n    width: PropTypes.string,\n\n    /**\n       * Indicates whether this column should truncate its content when it doesn't fit\n       */\n    truncateText: PropTypes.bool,\n    isExpander: PropTypes.bool,\n    align: PropTypes.oneOf([\"left\", \"right\", \"center\"]),\n\n    /**\n       * Disables the user's ability to change the sort but still shows the current direction\n       */\n    readOnly: PropTypes.bool,\n    className: PropTypes.string,\n    \"aria-label\": PropTypes.string,\n    \"data-test-subj\": PropTypes.string\n  }).isRequired, PropTypes.shape({\n    /**\n       * An array of one of the objects: #DefaultItemAction or #CustomItemAction\n       */\n    actions: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.shape({\n      /**\n         * The type of action\n         */\n      type: PropTypes.oneOfType([PropTypes.oneOf([\"button\"]), PropTypes.oneOf([\"icon\"]).isRequired]),\n\n      /**\n         * Defines the color of the button\n         */\n      color: PropTypes.oneOfType([PropTypes.oneOfType([PropTypes.oneOf([\"primary\", \"danger\", \"text\", \"ghost\", \"success\", \"warning\"]).isRequired, PropTypes.func.isRequired]), PropTypes.oneOfType([PropTypes.oneOf([\"accent\", \"danger\", \"ghost\", \"primary\", \"subdued\", \"success\", \"text\", \"warning\"]).isRequired, PropTypes.func.isRequired])]),\n\n      /**\n         * The display name of the action (will be the button caption)\n         */\n\n      /**\n         * The display name of the action (will be the button caption)\n         */\n      name: PropTypes.oneOfType([PropTypes.node.isRequired, PropTypes.func.isRequired]).isRequired,\n\n      /**\n         * Describes the action (will be the button title)\n         */\n\n      /**\n         * Describes the action (will be the button title)\n         */\n      description: PropTypes.string.isRequired,\n\n      /**\n         * A handler function to execute the action\n         */\n\n      /**\n         * A handler function to execute the action\n         */\n      onClick: PropTypes.func,\n      href: PropTypes.string,\n      target: PropTypes.string,\n\n      /**\n         * A callback function that determines whether the action is available\n         */\n\n      /**\n         * A callback function that determines whether the action is available\n         */\n      available: PropTypes.func,\n\n      /**\n         * A callback function that determines whether the action is enabled\n         */\n\n      /**\n         * A callback function that determines whether the action is enabled\n         */\n      enabled: PropTypes.func,\n      isPrimary: PropTypes.bool,\n      \"data-test-subj\": PropTypes.string,\n\n      /**\n         * Associates an icon with the button\n         */\n      icon: PropTypes.oneOfType([PropTypes.oneOf([\"accessibility\", \"addDataApp\", \"advancedSettingsApp\", \"aggregate\", \"alert\", \"analyzeEvent\", \"annotation\", \"apmApp\", \"apmTrace\", \"apps\", \"appSearchApp\", \"arrowDown\", \"arrowLeft\", \"arrowRight\", \"arrowUp\", \"asterisk\", \"auditbeatApp\", \"beaker\", \"bell\", \"bellSlash\", \"bolt\", \"boxesHorizontal\", \"boxesVertical\", \"branch\", \"broom\", \"brush\", \"bug\", \"bullseye\", \"calendar\", \"canvasApp\", \"codeApp\", \"check\", \"checkInCircleFilled\", \"cheer\", \"classificationJob\", \"clock\", \"cloudDrizzle\", \"cloudStormy\", \"cloudSunny\", \"color\", \"compute\", \"console\", \"consoleApp\", \"continuityAbove\", \"continuityAboveBelow\", \"continuityBelow\", \"continuityWithin\", \"controlsHorizontal\", \"controlsVertical\", \"copy\", \"copyClipboard\", \"createAdvancedJob\", \"createMultiMetricJob\", \"createPopulationJob\", \"createSingleMetricJob\", \"cross\", \"crossClusterReplicationApp\", \"crosshairs\", \"crossInACircleFilled\", \"currency\", \"cut\", \"dashboardApp\", \"database\", \"dataVisualizer\", \"devToolsApp\", \"discoverApp\", \"document\", \"documentation\", \"documentEdit\", \"documents\", \"dot\", \"download\", \"editorAlignCenter\", \"editorAlignLeft\", \"editorAlignRight\", \"editorBold\", \"editorCodeBlock\", \"editorComment\", \"editorDistributeHorizontal\", \"editorDistributeVertical\", \"editorHeading\", \"editorItalic\", \"editorItemAlignLeft\", \"editorItemAlignBottom\", \"editorItemAlignCenter\", \"editorItemAlignMiddle\", \"editorItemAlignRight\", \"editorItemAlignTop\", \"editorLink\", \"editorOrderedList\", \"editorPositionBottomLeft\", \"editorPositionBottomRight\", \"editorPositionTopLeft\", \"editorPositionTopRight\", \"editorRedo\", \"editorStrike\", \"editorTable\", \"editorUnderline\", \"editorUndo\", \"editorUnorderedList\", \"email\", \"empty\", \"emsApp\", \"eql\", \"eraser\", \"exit\", \"expand\", \"expandMini\", \"exportAction\", \"eye\", \"eyeClosed\", \"faceHappy\", \"faceNeutral\", \"faceSad\", \"filebeatApp\", \"filter\", \"flag\", \"fold\", \"folderCheck\", \"folderClosed\", \"folderExclamation\", \"folderOpen\", \"frameNext\", \"framePrevious\", \"fullScreen\", \"fullScreenExit\", \"function\", \"gear\", \"gisApp\", \"glasses\", \"globe\", \"grab\", \"grabHorizontal\", \"graphApp\", \"grid\", \"grokApp\", \"heart\", \"heartbeatApp\", \"heatmap\", \"help\", \"home\", \"iInCircle\", \"image\", \"importAction\", \"indexClose\", \"indexEdit\", \"indexFlush\", \"indexManagementApp\", \"indexMapping\", \"indexOpen\", \"indexPatternApp\", \"indexRollupApp\", \"indexRuntime\", \"indexSettings\", \"inputOutput\", \"inspect\", \"invert\", \"ip\", \"keyboardShortcut\", \"kqlField\", \"kqlFunction\", \"kqlOperand\", \"kqlSelector\", \"kqlValue\", \"layers\", \"lensApp\", \"link\", \"list\", \"listAdd\", \"lock\", \"lockOpen\", \"logsApp\", \"logoAerospike\", \"logoApache\", \"logoAppSearch\", \"logoAWS\", \"logoAWSMono\", \"logoAzure\", \"logoAzureMono\", \"logoBeats\", \"logoBusinessAnalytics\", \"logoCeph\", \"logoCloud\", \"logoCloudEnterprise\", \"logoCode\", \"logoCodesandbox\", \"logoCouchbase\", \"logoDocker\", \"logoDropwizard\", \"logoElastic\", \"logoElasticsearch\", \"logoElasticStack\", \"logoEnterpriseSearch\", \"logoEtcd\", \"logoGCP\", \"logoGCPMono\", \"logoGithub\", \"logoGmail\", \"logoGolang\", \"logoGoogleG\", \"logoHAproxy\", \"logoIBM\", \"logoIBMMono\", \"logoKafka\", \"logoKibana\", \"logoKubernetes\", \"logoLogging\", \"logoLogstash\", \"logoMaps\", \"logoMemcached\", \"logoMetrics\", \"logoMongodb\", \"logoMySQL\", \"logoNginx\", \"logoObservability\", \"logoOsquery\", \"logoPhp\", \"logoPostgres\", \"logoPrometheus\", \"logoRabbitmq\", \"logoRedis\", \"logoSecurity\", \"logoSiteSearch\", \"logoSketch\", \"logoSlack\", \"logoUptime\", \"logoWebhook\", \"logoWindows\", \"logoWorkplaceSearch\", \"logstashFilter\", \"logstashIf\", \"logstashInput\", \"logstashOutput\", \"logstashQueue\", \"machineLearningApp\", \"magnet\", \"magnifyWithMinus\", \"magnifyWithPlus\", \"managementApp\", \"mapMarker\", \"memory\", \"menu\", \"menuDown\", \"menuLeft\", \"menuRight\", \"menuUp\", \"merge\", \"metricbeatApp\", \"metricsApp\", \"minimize\", \"minus\", \"minusInCircle\", \"minusInCircleFilled\", \"mobile\", \"monitoringApp\", \"moon\", \"nested\", \"node\", \"notebookApp\", \"number\", \"offline\", \"online\", \"outlierDetectionJob\", \"package\", \"packetbeatApp\", \"pageSelect\", \"pagesSelect\", \"partial\", \"paperClip\", \"pause\", \"pencil\", \"percent\", \"pin\", \"pinFilled\", \"pipelineApp\", \"play\", \"playFilled\", \"plus\", \"plusInCircle\", \"plusInCircleFilled\", \"popout\", \"push\", \"questionInCircle\", \"quote\", \"recentlyViewedApp\", \"refresh\", \"regressionJob\", \"reporter\", \"reportingApp\", \"returnKey\", \"save\", \"savedObjectsApp\", \"scale\", \"search\", \"searchProfilerApp\", \"securityAnalyticsApp\", \"securityApp\", \"securitySignal\", \"securitySignalDetected\", \"securitySignalResolved\", \"shard\", \"share\", \"snowflake\", \"sortable\", \"sortDown\", \"sortLeft\", \"sortRight\", \"sortUp\", \"spacesApp\", \"sqlApp\", \"starEmpty\", \"starEmptySpace\", \"starFilled\", \"starFilledSpace\", \"starMinusEmpty\", \"starMinusFilled\", \"starPlusEmpty\", \"starPlusFilled\", \"stats\", \"stop\", \"stopFilled\", \"stopSlash\", \"storage\", \"string\", \"submodule\", \"swatchInput\", \"symlink\", \"tableOfContents\", \"tableDensityExpanded\", \"tableDensityCompact\", \"tableDensityNormal\", \"tag\", \"tear\", \"temperature\", \"timeline\", \"timelionApp\", \"timeslider\", \"training\", \"trash\", \"upgradeAssistantApp\", \"uptimeApp\", \"unfold\", \"unlink\", \"user\", \"users\", \"usersRolesApp\", \"vector\", \"videoPlayer\", \"visArea\", \"visAreaStacked\", \"visBarHorizontal\", \"visBarHorizontalStacked\", \"visBarVertical\", \"visBarVerticalStacked\", \"visGauge\", \"visGoal\", \"visLine\", \"visMapCoordinate\", \"visMapRegion\", \"visMetric\", \"visPie\", \"visTable\", \"visTagCloud\", \"visText\", \"visTimelion\", \"visualizeApp\", \"visVega\", \"visVisualBuilder\", \"watchesApp\", \"wordWrap\", \"wordWrapDisabled\", \"workplaceSearchApp\", \"wrench\", \"tokenClass\", \"tokenProperty\", \"tokenEnum\", \"tokenVariable\", \"tokenMethod\", \"tokenAnnotation\", \"tokenException\", \"tokenInterface\", \"tokenParameter\", \"tokenField\", \"tokenElement\", \"tokenFunction\", \"tokenBoolean\", \"tokenString\", \"tokenArray\", \"tokenNumber\", \"tokenConstant\", \"tokenObject\", \"tokenEvent\", \"tokenKey\", \"tokenNull\", \"tokenStruct\", \"tokenPackage\", \"tokenOperator\", \"tokenEnumMember\", \"tokenRepo\", \"tokenSymbol\", \"tokenFile\", \"tokenModule\", \"tokenNamespace\", \"tokenDate\", \"tokenIP\", \"tokenNested\", \"tokenAlias\", \"tokenShape\", \"tokenGeo\", \"tokenRange\", \"tokenBinary\", \"tokenJoin\", \"tokenPercolator\", \"tokenFlattened\", \"tokenRankFeature\", \"tokenRankFeatures\", \"tokenKeyword\", \"tokenCompletionSuggester\", \"tokenDenseVector\", \"tokenText\", \"tokenTokenCount\", \"tokenSearchType\", \"tokenHistogram\"]).isRequired, PropTypes.func.isRequired])\n    }).isRequired, PropTypes.shape({\n      /**\n         * The function that renders the action. Note that the returned node is expected to have `onFocus` and `onBlur` functions\n         */\n      render: PropTypes.func.isRequired,\n\n      /**\n         * A callback that defines whether the action is available\n         */\n      available: PropTypes.func,\n\n      /**\n         * A callback that defines whether the action is enabled\n         */\n      enabled: PropTypes.func,\n      isPrimary: PropTypes.bool\n    }).isRequired]).isRequired).isRequired,\n\n    /**\n       * The display name of the column\n       */\n    name: PropTypes.node,\n\n    /**\n       * A description of the column (will be presented as a title over the column header\n       */\n    description: PropTypes.string,\n\n    /**\n       * A CSS width property. Hints for the required width of the column\n       */\n    width: PropTypes.string\n  }).isRequired]).isRequired),\n\n  /**\n     * Error message to display\n     */\n\n  /**\n     * Error message to display\n     */\n  error: PropTypes.string,\n\n  /**\n     * Describes the content of the table. If not specified, the caption will be \"This table contains {itemCount} rows.\"\n     */\n\n  /**\n     * Describes the content of the table. If not specified, the caption will be \"This table contains {itemCount} rows.\"\n     */\n  tableCaption: PropTypes.string,\n\n  /**\n     * Indicates which column should be used as the identifying cell in each row. Should match a \"field\" prop in FieldDataColumn\n     */\n\n  /**\n     * Indicates which column should be used as the identifying cell in each row. Should match a \"field\" prop in FieldDataColumn\n     */\n  rowHeader: PropTypes.string,\n  hasActions: PropTypes.bool,\n  isExpandable: PropTypes.bool,\n  isSelectable: PropTypes.bool,\n\n  /**\n     * Provides an infinite loading indicator\n     */\n\n  /**\n     * Provides an infinite loading indicator\n     */\n  loading: PropTypes.bool,\n\n  /**\n     * Message to display if table is empty\n     */\n\n  /**\n     * Message to display if table is empty\n     */\n  noItemsMessage: PropTypes.node,\n\n  /**\n     * Called whenever pagination or sorting changes (this property is required when either pagination or sorting is configured). See #Criteria or #CriteriaWithPagination\n     */\n  onChange: PropTypes.func,\n\n  /**\n     * Configures #Pagination\n     */\n  pagination: PropTypes.oneOfType([PropTypes.oneOf([undefined]), PropTypes.shape({\n    /**\n       * The current page (zero-based) index\n       */\n    pageIndex: PropTypes.number.isRequired,\n\n    /**\n       * The maximum number of items that can be shown in a single page\n       */\n    pageSize: PropTypes.number.isRequired,\n\n    /**\n       * The total number of items the page is \"sliced\" of\n       */\n    totalItemCount: PropTypes.number.isRequired,\n\n    /**\n       * Configures the page size dropdown options\n       */\n    pageSizeOptions: PropTypes.arrayOf(PropTypes.number.isRequired),\n\n    /**\n       * Hides the page size dropdown\n       */\n    hidePerPageOptions: PropTypes.bool\n  })]),\n\n  /**\n     * If true, will convert table to cards in mobile view\n     */\n\n  /**\n     * If true, will convert table to cards in mobile view\n     */\n  responsive: PropTypes.bool,\n\n  /**\n     * Applied to `EuiTableRow`\n     */\n\n  /**\n     * Applied to `EuiTableRow`\n     */\n  rowProps: PropTypes.oneOfType([PropTypes.any.isRequired, PropTypes.func.isRequired]),\n\n  /**\n     * Configures #EuiTableSelectionType\n     */\n\n  /**\n     * Configures #EuiTableSelectionType\n     */\n  selection: PropTypes.shape({\n    /**\n       * A callback that will be called whenever the item selection changes\n       */\n    onSelectionChange: PropTypes.func,\n\n    /**\n       * A callback that is called per item to indicate whether it is selectable\n       */\n    selectable: PropTypes.func,\n\n    /**\n       * A callback that is called per item to retrieve a message for its selectable state.We display these messages as a tooltip on an unselectable checkbox\n       */\n    selectableMessage: PropTypes.func,\n    initialSelected: PropTypes.arrayOf(PropTypes.any.isRequired)\n  }),\n\n  /**\n     * Configures #EuiTableSortingType\n     */\n\n  /**\n     * Configures #EuiTableSortingType\n     */\n  sorting: PropTypes.shape({\n    /**\n       * Indicates the property/field to sort on\n       */\n    sort: PropTypes.shape({\n      field: PropTypes.any.isRequired,\n      direction: PropTypes.oneOfType([PropTypes.any.isRequired, PropTypes.any.isRequired]).isRequired\n    }),\n\n    /**\n       * Enables/disables unsorting of table columns. Supported by EuiInMemoryTable.\n       */\n    allowNeutralSort: PropTypes.bool,\n\n    /**\n       * Enables the default sorting ability for each column.\n       */\n    enableAllColumns: PropTypes.bool,\n\n    /**\n       * Disables the user's ability to change the sort but still shows the current direction\n       */\n    readOnly: PropTypes.bool\n  }),\n\n  /**\n     * Sets the table-layout CSS property. Note that auto tableLayout prevents truncateText from working properly.\n     */\n\n  /**\n     * Sets the table-layout CSS property. Note that auto tableLayout prevents truncateText from working properly.\n     */\n  tableLayout: PropTypes.oneOf([\"fixed\", \"auto\"]),\n\n  /**\n     * Applied to table cells => Any cell using render function will set this to be false, leading to unnecessary word breaks. Apply textOnly: true in order to ensure it breaks properly\n     */\n\n  /**\n     * Applied to table cells => Any cell using render function will set this to be false, leading to unnecessary word breaks. Apply textOnly: true in order to ensure it breaks properly\n     */\n  textOnly: PropTypes.bool\n};\n\ntry {\n  EuiBasicTable.__docgenInfo = {\n    description: '',\n    displayName: 'EuiBasicTable',\n    methods: [],\n    props: {\n      className: {\n        defaultValue: null,\n        description: '',\n        name: 'className',\n        parent: {\n          fileName: 'eui/src/components/common.ts',\n          name: 'CommonProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      'aria-label': {\n        defaultValue: null,\n        description: 'Defines a string value that labels the current element.\\n' + '@see aria-labelledby.',\n        name: 'aria-label',\n        parent: {\n          fileName: 'eui/src/components/common.ts',\n          name: 'CommonProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      'data-test-subj': {\n        defaultValue: null,\n        description: '',\n        name: 'data-test-subj',\n        parent: {\n          fileName: 'eui/src/components/common.ts',\n          name: 'CommonProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      itemId: {\n        defaultValue: null,\n        description: 'Describes how to extract a unique ID from each item, used for selections & expanded rows',\n        name: 'itemId',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'ItemId<T>'\n        }\n      },\n      itemIdToExpandedRowMap: {\n        defaultValue: null,\n        description: 'Row expansion uses the itemId prop to identify each row',\n        name: 'itemIdToExpandedRowMap',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'ItemIdToExpandedRowMap'\n        }\n      },\n      items: {\n        defaultValue: null,\n        description: 'A list of objects to who in the table - an item per row',\n        name: 'items',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: true,\n        type: {\n          name: 'T[]'\n        }\n      },\n      cellProps: {\n        defaultValue: null,\n        description: 'Applied to `EuiTableRowCell`',\n        name: 'cellProps',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'object | CellPropsCallback<T>'\n        }\n      },\n      columns: {\n        defaultValue: null,\n        description: 'An array of one of the objects: #EuiTableFieldDataColumnType, #EuiTableComputedColumnType or #EuiTableActionsColumnType.',\n        name: 'columns',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: true,\n        type: {\n          name: 'EuiBasicTableColumn<T>[]'\n        }\n      },\n      error: {\n        defaultValue: null,\n        description: 'Error message to display',\n        name: 'error',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      tableCaption: {\n        defaultValue: null,\n        description: 'Describes the content of the table. If not specified, the caption will be \"This table contains {itemCount} rows.\"',\n        name: 'tableCaption',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      rowHeader: {\n        defaultValue: null,\n        description: 'Indicates which column should be used as the identifying cell in each row. Should match a \"field\" prop in FieldDataColumn',\n        name: 'rowHeader',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      hasActions: {\n        defaultValue: null,\n        description: '',\n        name: 'hasActions',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      isExpandable: {\n        defaultValue: null,\n        description: '',\n        name: 'isExpandable',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      isSelectable: {\n        defaultValue: null,\n        description: '',\n        name: 'isSelectable',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      loading: {\n        defaultValue: null,\n        description: 'Provides an infinite loading indicator',\n        name: 'loading',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      noItemsMessage: {\n        defaultValue: {\n          value: 'No items found'\n        },\n        description: 'Message to display if table is empty',\n        name: 'noItemsMessage',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'ReactNode'\n        }\n      },\n      onChange: {\n        defaultValue: null,\n        description: 'Called whenever pagination or sorting changes (this property is required when either pagination or sorting is configured). See #Criteria or #CriteriaWithPagination',\n        name: 'onChange',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: '((criteria: Criteria<T>) => void) | ((criteria: CriteriaWithPagination<T>) => void)'\n        }\n      },\n      pagination: {\n        defaultValue: null,\n        description: 'Configures #Pagination',\n        name: 'pagination',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'Pagination'\n        }\n      },\n      responsive: {\n        defaultValue: {\n          value: 'true'\n        },\n        description: 'If true, will convert table to cards in mobile view',\n        name: 'responsive',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      rowProps: {\n        defaultValue: null,\n        description: 'Applied to `EuiTableRow`',\n        name: 'rowProps',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'object | RowPropsCallback<T>'\n        }\n      },\n      selection: {\n        defaultValue: null,\n        description: 'Configures #EuiTableSelectionType',\n        name: 'selection',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'EuiTableSelectionType<T>'\n        }\n      },\n      sorting: {\n        defaultValue: null,\n        description: 'Configures #EuiTableSortingType',\n        name: 'sorting',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'EuiTableSortingType<T>'\n        }\n      },\n      tableLayout: {\n        defaultValue: {\n          value: 'fixed'\n        },\n        description: 'Sets the table-layout CSS property. Note that auto tableLayout prevents truncateText from working properly.',\n        name: 'tableLayout',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'enum',\n          raw: '\"auto\" | \"fixed\"',\n          value: [{\n            value: '\"auto\"'\n          }, {\n            value: '\"fixed\"'\n          }]\n        }\n      },\n      textOnly: {\n        defaultValue: null,\n        description: 'Applied to table cells => Any cell using render function will set this to be false, leading to unnecessary word breaks. Apply textOnly: true in order to ensure it breaks properly',\n        name: 'textOnly',\n        parent: {\n          fileName: 'eui/src/components/basic_table/basic_table.tsx',\n          name: 'BasicTableProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      compressed: {\n        defaultValue: null,\n        description: '',\n        name: 'compressed',\n        parent: {\n          fileName: 'eui/src/components/table/table.tsx',\n          name: 'EuiTableProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      }\n    },\n    extendedInterfaces: ['CommonProps', 'HTMLAttributes', 'AriaAttributes', 'DOMAttributes', 'BasicTableProps', 'TableHTMLAttributes', 'EuiTableProps']\n  };\n} catch (e) {}"]}]}