{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\search_bar\\query\\ast_to_es_query_string.ts","dependencies":[{"path":"D:\\work\\eui\\src\\components\\search_bar\\query\\ast_to_es_query_string.ts","mtime":1649070093750},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwoKLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCmltcG9ydCB7IHByaW50SXNvODYwMSB9IGZyb20gJy4vZGF0ZV9mb3JtYXQnOwppbXBvcnQgeyBpc0RhdGVWYWx1ZSB9IGZyb20gJy4vZGF0ZV92YWx1ZSc7CmltcG9ydCB7IEFTVCwgT3BlcmF0b3IgfSBmcm9tICcuL2FzdCc7CmltcG9ydCB7IGlzQXJyYXksIGlzRGF0ZUxpa2UsIGlzU3RyaW5nLCBpc0Jvb2xlYW4sIGlzTnVtYmVyIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcHJlZGljYXRlJzsKCnZhciBlbWl0TWF0Y2ggPSBmdW5jdGlvbiBlbWl0TWF0Y2gobWF0Y2gpIHsKICBpZiAoIW1hdGNoKSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICByZXR1cm4gQVNULk1hdGNoLmlzTXVzdChtYXRjaCkgPyAnKycgOiAnLSc7Cn07Cgp2YXIgZXNjYXBlVmFsdWUgPSBmdW5jdGlvbiBlc2NhcGVWYWx1ZSh2YWx1ZSkgewogIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvKFtcXCJdKS9nLCAnXFwkMScpOwogIH0KCiAgcmV0dXJuIHZhbHVlOwp9OwoKdmFyIGVtaXRGaWVsZERhdGVMaWtlQ2xhdXNlID0gZnVuY3Rpb24gZW1pdEZpZWxkRGF0ZUxpa2VDbGF1c2UoZmllbGQsIHZhbHVlLCBvcGVyYXRvciwgbWF0Y2gpIHsKICB2YXIgbWF0Y2hPcCA9IGVtaXRNYXRjaChtYXRjaCk7CgogIHN3aXRjaCAob3BlcmF0b3IpIHsKICAgIGNhc2UgT3BlcmF0b3IuRVE6CiAgICAgIHJldHVybiAiIi5jb25jYXQobWF0Y2hPcCkuY29uY2F0KGZpZWxkLCAiOiIpLmNvbmNhdChwcmludElzbzg2MDEodmFsdWUpKTsKCiAgICBjYXNlIE9wZXJhdG9yLkdUOgogICAgICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjo+IikuY29uY2F0KHByaW50SXNvODYwMSh2YWx1ZSkpOwoKICAgIGNhc2UgT3BlcmF0b3IuR1RFOgogICAgICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjo+PSIpLmNvbmNhdChwcmludElzbzg2MDEodmFsdWUpKTsKCiAgICBjYXNlIE9wZXJhdG9yLkxUOgogICAgICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjo8IikuY29uY2F0KHByaW50SXNvODYwMSh2YWx1ZSkpOwoKICAgIGNhc2UgT3BlcmF0b3IuTFRFOgogICAgICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjo8PSIpLmNvbmNhdChwcmludElzbzg2MDEodmFsdWUpKTsKCiAgICBkZWZhdWx0OgogICAgICB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gb3BlcmF0b3IgWyIuY29uY2F0KG9wZXJhdG9yLCAiXSIpKTsKICB9Cn07Cgp2YXIgZW1pdEZpZWxkRGF0ZVZhbHVlQ2xhdXNlID0gZnVuY3Rpb24gZW1pdEZpZWxkRGF0ZVZhbHVlQ2xhdXNlKGZpZWxkLCB2YWx1ZSwgb3BlcmF0b3IsIG1hdGNoKSB7CiAgdmFyIG1hdGNoT3AgPSBlbWl0TWF0Y2gobWF0Y2gpOwogIHZhciBncmFudWxhcml0eSA9IHZhbHVlLmdyYW51bGFyaXR5LAogICAgICByZXNvbHZlID0gdmFsdWUucmVzb2x2ZTsKICB2YXIgZGF0ZSA9IHJlc29sdmUoKTsKCiAgaWYgKGdyYW51bGFyaXR5KSB7CiAgICBzd2l0Y2ggKG9wZXJhdG9yKSB7CiAgICAgIGNhc2UgT3BlcmF0b3IuRVE6CiAgICAgICAgdmFyIGd0ZSA9IGdyYW51bGFyaXR5Lmlzbzg2MDEoZ3JhbnVsYXJpdHkuc3RhcnQoZGF0ZSkpOwogICAgICAgIHZhciBsdCA9IGdyYW51bGFyaXR5Lmlzbzg2MDEoZ3JhbnVsYXJpdHkuc3RhcnRPZk5leHQoZGF0ZSkpOwogICAgICAgIHJldHVybiAiIi5jb25jYXQobWF0Y2hPcCkuY29uY2F0KGZpZWxkLCAiOig+PSIpLmNvbmNhdChndGUsICIgQU5EIDwiKS5jb25jYXQobHQsICIpIik7CgogICAgICBjYXNlIE9wZXJhdG9yLkdUOgogICAgICAgIHJldHVybiAiIi5jb25jYXQobWF0Y2hPcCkuY29uY2F0KGZpZWxkLCAiOj49IikuY29uY2F0KGdyYW51bGFyaXR5Lmlzbzg2MDEoZ3JhbnVsYXJpdHkuc3RhcnRPZk5leHQoZGF0ZSkpKTsKCiAgICAgIGNhc2UgT3BlcmF0b3IuR1RFOgogICAgICAgIHJldHVybiAiIi5jb25jYXQobWF0Y2hPcCkuY29uY2F0KGZpZWxkLCAiOj49IikuY29uY2F0KGdyYW51bGFyaXR5Lmlzbzg2MDEoZ3JhbnVsYXJpdHkuc3RhcnQoZGF0ZSkpKTsKCiAgICAgIGNhc2UgT3BlcmF0b3IuTFQ6CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdChtYXRjaE9wKS5jb25jYXQoZmllbGQsICI6PCIpLmNvbmNhdChncmFudWxhcml0eS5pc284NjAxKGdyYW51bGFyaXR5LnN0YXJ0KGRhdGUpKSk7CgogICAgICBjYXNlIE9wZXJhdG9yLkxURToKICAgICAgICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjo8IikuY29uY2F0KGdyYW51bGFyaXR5Lmlzbzg2MDEoZ3JhbnVsYXJpdHkuc3RhcnRPZk5leHQoZGF0ZSkpKTsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJ1bmtub3duIG9wZXJhdG9yIFsiLmNvbmNhdChvcGVyYXRvciwgIl0iKSk7CiAgICB9CiAgfQoKICByZXR1cm4gZW1pdEZpZWxkRGF0ZUxpa2VDbGF1c2UoZmllbGQsIGRhdGUsIG9wZXJhdG9yLCBtYXRjaCk7Cn07Cgp2YXIgZW1pdEZpZWxkTnVtZXJpY0NsYXVzZSA9IGZ1bmN0aW9uIGVtaXRGaWVsZE51bWVyaWNDbGF1c2UoZmllbGQsIHZhbHVlLCBvcGVyYXRvciwgbWF0Y2gpIHsKICB2YXIgbWF0Y2hPcCA9IGVtaXRNYXRjaChtYXRjaCk7CgogIHN3aXRjaCAob3BlcmF0b3IpIHsKICAgIGNhc2UgT3BlcmF0b3IuRVE6CiAgICAgIHJldHVybiAiIi5jb25jYXQobWF0Y2hPcCkuY29uY2F0KGZpZWxkLCAiOiIpLmNvbmNhdCh2YWx1ZSk7CgogICAgY2FzZSBPcGVyYXRvci5HVDoKICAgICAgcmV0dXJuICIiLmNvbmNhdChtYXRjaE9wKS5jb25jYXQoZmllbGQsICI6PiIpLmNvbmNhdCh2YWx1ZSk7CgogICAgY2FzZSBPcGVyYXRvci5HVEU6CiAgICAgIHJldHVybiAiIi5jb25jYXQobWF0Y2hPcCkuY29uY2F0KGZpZWxkLCAiOj49IikuY29uY2F0KHZhbHVlKTsKCiAgICBjYXNlIE9wZXJhdG9yLkxUOgogICAgICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjo8IikuY29uY2F0KHZhbHVlKTsKCiAgICBjYXNlIE9wZXJhdG9yLkxURToKICAgICAgcmV0dXJuICIiLmNvbmNhdChtYXRjaE9wKS5jb25jYXQoZmllbGQsICI6PD0iKS5jb25jYXQodmFsdWUpOwoKICAgIGRlZmF1bHQ6CiAgICAgIHRocm93IG5ldyBFcnJvcigidW5rbm93biBvcGVyYXRvciBbIi5jb25jYXQob3BlcmF0b3IsICJdIikpOwogIH0KfTsKCnZhciBlbWl0RmllbGRTdHJpbmdDbGF1c2UgPSBmdW5jdGlvbiBlbWl0RmllbGRTdHJpbmdDbGF1c2UoZmllbGQsIHZhbHVlLCBtYXRjaCkgewogIHZhciBtYXRjaE9wID0gZW1pdE1hdGNoKG1hdGNoKTsKCiAgaWYgKHZhbHVlLm1hdGNoKC9ccy8pKSB7CiAgICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjpcIiIpLmNvbmNhdChlc2NhcGVWYWx1ZSh2YWx1ZSksICJcIiIpOwogIH0KCiAgcmV0dXJuICIiLmNvbmNhdChtYXRjaE9wKS5jb25jYXQoZmllbGQsICI6IikuY29uY2F0KGVzY2FwZVZhbHVlKHZhbHVlKSk7Cn07Cgp2YXIgZW1pdEZpZWxkQm9vbGVhbkNsYXVzZSA9IGZ1bmN0aW9uIGVtaXRGaWVsZEJvb2xlYW5DbGF1c2UoZmllbGQsIHZhbHVlLCBtYXRjaCkgewogIHZhciBtYXRjaE9wID0gZW1pdE1hdGNoKG1hdGNoKTsKICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3ApLmNvbmNhdChmaWVsZCwgIjoiKS5jb25jYXQodmFsdWUpOwp9OwoKdmFyIGVtaXRGaWVsZFNpbmdsZVZhbHVlQ2xhdXNlID0gZnVuY3Rpb24gZW1pdEZpZWxkU2luZ2xlVmFsdWVDbGF1c2UoZmllbGQsIHZhbHVlLCBvcGVyYXRvciwgbWF0Y2gpIHsKICBpZiAoaXNEYXRlVmFsdWUodmFsdWUpKSB7CiAgICByZXR1cm4gZW1pdEZpZWxkRGF0ZVZhbHVlQ2xhdXNlKGZpZWxkLCB2YWx1ZSwgb3BlcmF0b3IsIG1hdGNoKTsKICB9CgogIGlmIChpc0RhdGVMaWtlKHZhbHVlKSkgewogICAgcmV0dXJuIGVtaXRGaWVsZERhdGVMaWtlQ2xhdXNlKGZpZWxkLCB2YWx1ZSwgb3BlcmF0b3IsIG1hdGNoKTsKICB9CgogIGlmIChpc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldHVybiBlbWl0RmllbGRTdHJpbmdDbGF1c2UoZmllbGQsIHZhbHVlLCBtYXRjaCk7CiAgfQoKICBpZiAoaXNOdW1iZXIodmFsdWUpKSB7CiAgICByZXR1cm4gZW1pdEZpZWxkTnVtZXJpY0NsYXVzZShmaWVsZCwgdmFsdWUsIG9wZXJhdG9yLCBtYXRjaCk7CiAgfQoKICBpZiAoaXNCb29sZWFuKHZhbHVlKSkgewogICAgcmV0dXJuIGVtaXRGaWVsZEJvb2xlYW5DbGF1c2UoZmllbGQsIHZhbHVlLCBtYXRjaCk7CiAgfQoKICB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZSBvZiBmaWVsZCB2YWx1ZSBbIi5jb25jYXQodmFsdWUsICJdIikpOwp9OwoKdmFyIGVtaXRGaWVsZENsYXVzZSA9IGZ1bmN0aW9uIGVtaXRGaWVsZENsYXVzZShjbGF1c2UsIGlzR3JvdXBNZW1iZXIpIHsKICB2YXIgZmllbGQgPSBjbGF1c2UuZmllbGQsCiAgICAgIHZhbHVlID0gY2xhdXNlLnZhbHVlLAogICAgICBvcGVyYXRvciA9IGNsYXVzZS5vcGVyYXRvcjsKICB2YXIgbWF0Y2ggPSBjbGF1c2UubWF0Y2g7CgogIGlmIChpc0dyb3VwTWVtYmVyICYmIEFTVC5NYXRjaC5pc011c3QobWF0Y2gpKSB7CiAgICBtYXRjaCA9IHVuZGVmaW5lZDsKICB9CgogIGlmICghaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiBlbWl0RmllbGRTaW5nbGVWYWx1ZUNsYXVzZShmaWVsZCwgdmFsdWUsIG9wZXJhdG9yLCBtYXRjaCk7CiAgfQoKICB2YXIgbWF0Y2hPcCA9IGVtaXRNYXRjaChtYXRjaCk7CiAgdmFyIGNsYXVzZXMgPSB2YWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgIHJldHVybiBlbWl0RmllbGRTaW5nbGVWYWx1ZUNsYXVzZShmaWVsZCwgdiwgb3BlcmF0b3IpOwogIH0pLmpvaW4oJyBPUiAnKTsKICByZXR1cm4gIiIuY29uY2F0KG1hdGNoT3AsICIoIikuY29uY2F0KGNsYXVzZXMsICIpIik7Cn07Cgp2YXIgZW1pdFRlcm1DbGF1c2UgPSBmdW5jdGlvbiBlbWl0VGVybUNsYXVzZShjbGF1c2UsIGlzR3JvdXBNZW1iZXIpIHsKICB2YXIgdmFsdWUgPSBjbGF1c2UudmFsdWU7CiAgdmFyIG1hdGNoID0gY2xhdXNlLm1hdGNoOwoKICBpZiAoaXNHcm91cE1lbWJlciAmJiBBU1QuTWF0Y2guaXNNdXN0KG1hdGNoKSkgewogICAgbWF0Y2ggPSB1bmRlZmluZWQ7CiAgfQoKICB2YXIgbWF0Y2hPcCA9IGVtaXRNYXRjaChtYXRjaCk7CiAgcmV0dXJuICIiLmNvbmNhdChtYXRjaE9wKS5jb25jYXQoZXNjYXBlVmFsdWUodmFsdWUpKTsKfTsKCnZhciBlbWl0SXNDbGF1c2UgPSBmdW5jdGlvbiBlbWl0SXNDbGF1c2UoY2xhdXNlLCBpc0dyb3VwTWVtYmVyKSB7CiAgdmFyIGZsYWcgPSBjbGF1c2UuZmxhZywKICAgICAgbWF0Y2ggPSBjbGF1c2UubWF0Y2g7CiAgdmFyIG1hdGNoT3AgPSBpc0dyb3VwTWVtYmVyID8gJycgOiAnKyc7CiAgdmFyIGZsYWdWYWx1ZSA9IEFTVC5NYXRjaC5pc011c3QobWF0Y2gpOwogIHJldHVybiAiIi5jb25jYXQobWF0Y2hPcCkuY29uY2F0KGZsYWcsICI6IikuY29uY2F0KGZsYWdWYWx1ZSk7Cn07Cgp2YXIgZW1pdEdyb3VwQ2xhdXNlID0gZnVuY3Rpb24gZW1pdEdyb3VwQ2xhdXNlKGNsYXVzZSkgewogIHZhciB2YWx1ZSA9IGNsYXVzZS52YWx1ZTsKICB2YXIgZm9ybWF0dGVkVmFsdWVzID0gdmFsdWUubWFwKGZ1bmN0aW9uIChjbGF1c2UpIHsKICAgIHJldHVybiBlbWl0Q2xhdXNlKGNsYXVzZSwgdHJ1ZSk7CiAgfSk7CiAgcmV0dXJuICIrKCIuY29uY2F0KGZvcm1hdHRlZFZhbHVlcy5qb2luKCcgJyksICIpIik7Cn07CgpmdW5jdGlvbiBlbWl0Q2xhdXNlKGNsYXVzZSkgewogIHZhciBpc0dyb3VwTWVtYmVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKCiAgaWYgKEFTVC5GaWVsZC5pc0luc3RhbmNlKGNsYXVzZSkpIHsKICAgIHJldHVybiBlbWl0RmllbGRDbGF1c2UoY2xhdXNlLCBpc0dyb3VwTWVtYmVyKTsKICB9CgogIGlmIChBU1QuVGVybS5pc0luc3RhbmNlKGNsYXVzZSkpIHsKICAgIHJldHVybiBlbWl0VGVybUNsYXVzZShjbGF1c2UsIGlzR3JvdXBNZW1iZXIpOwogIH0KCiAgaWYgKEFTVC5Jcy5pc0luc3RhbmNlKGNsYXVzZSkpIHsKICAgIHJldHVybiBlbWl0SXNDbGF1c2UoY2xhdXNlLCBpc0dyb3VwTWVtYmVyKTsKICB9CgogIGlmIChBU1QuR3JvdXAuaXNJbnN0YW5jZShjbGF1c2UpKSB7CiAgICByZXR1cm4gZW1pdEdyb3VwQ2xhdXNlKGNsYXVzZSk7CiAgfQoKICB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gY2xhdXNlIHR5cGUgWyIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGNsYXVzZSksICJdIikpOwp9CgpleHBvcnQgdmFyIGFzdFRvRXNRdWVyeVN0cmluZyA9IGZ1bmN0aW9uIGFzdFRvRXNRdWVyeVN0cmluZyhhc3QpIHsKICBpZiAoYXN0LmNsYXVzZXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gJyonOwogIH0KCiAgcmV0dXJuIGFzdC5jbGF1c2VzLm1hcChmdW5jdGlvbiAoY2xhdXNlKSB7CiAgICByZXR1cm4gZW1pdENsYXVzZShjbGF1c2UpOwogIH0pLmpvaW4oJyAnKTsKfTsKCnRyeSB7CiAgYXN0VG9Fc1F1ZXJ5U3RyaW5nLl9fZG9jZ2VuSW5mbyA9IHsKICAgIGRlc2NyaXB0aW9uOiAnJywKICAgIGRpc3BsYXlOYW1lOiAnYXN0VG9Fc1F1ZXJ5U3RyaW5nJywKICAgIG1ldGhvZHM6IFtdLAogICAgcHJvcHM6IHsKICAgICAgX2NsYXVzZXM6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdfY2xhdXNlcycsCiAgICAgICAgcGFyZW50OiB1bmRlZmluZWQsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ0NsYXVzZVtdJwogICAgICAgIH0KICAgICAgfSwKICAgICAgX2luZGV4ZWRDbGF1c2VzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnX2luZGV4ZWRDbGF1c2VzJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAneyBmaWVsZDogeyBbZmllbGQ6IHN0cmluZ106IEZpZWxkQ2xhdXNlW107IH07IGlzOiB7IFtmbGFnOiBzdHJpbmddOiBJc0NsYXVzZTsgfTsgdGVybTogVGVybUNsYXVzZVtdOyBncm91cDogR3JvdXBDbGF1c2VbXTsgfScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNsYXVzZXM6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdjbGF1c2VzJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnQ2xhdXNlW10nCiAgICAgICAgfQogICAgICB9LAogICAgICBnZXRUZXJtQ2xhdXNlczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2dldFRlcm1DbGF1c2VzJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKCkgPT4gVGVybUNsYXVzZVtdJwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0VGVybUNsYXVzZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2dldFRlcm1DbGF1c2UnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcodmFsdWU6IFZhbHVlKSA9PiBUZXJtQ2xhdXNlJwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0RmllbGROYW1lczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2dldEZpZWxkTmFtZXMnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoKSA9PiBzdHJpbmdbXScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldEZpZWxkQ2xhdXNlczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2dldEZpZWxkQ2xhdXNlcycsCiAgICAgICAgcGFyZW50OiB1bmRlZmluZWQsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJyhmaWVsZD86IHN0cmluZykgPT4gRmllbGRDbGF1c2VbXScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldEZpZWxkQ2xhdXNlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZ2V0RmllbGRDbGF1c2UnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZmllbGQ6IHN0cmluZywgcHJlZGljYXRlOiAoYzogRmllbGRDbGF1c2UpID0+IGJvb2xlYW4pID0+IEZpZWxkQ2xhdXNlJwogICAgICAgIH0KICAgICAgfSwKICAgICAgaGFzT3JGaWVsZENsYXVzZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2hhc09yRmllbGRDbGF1c2UnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZmllbGQ6IHN0cmluZywgdmFsdWU/OiBWYWx1ZSkgPT4gYm9vbGVhbicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldE9yRmllbGRDbGF1c2U6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdnZXRPckZpZWxkQ2xhdXNlJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKGZpZWxkOiBzdHJpbmcsIHZhbHVlPzogVmFsdWUpID0+IEZpZWxkQ2xhdXNlJwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWRkT3JGaWVsZFZhbHVlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnYWRkT3JGaWVsZFZhbHVlJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBWYWx1ZSwgbXVzdD86IGJvb2xlYW4sIG9wZXJhdG9yPzogT3BlcmF0b3JUeXBlKSA9PiBfQVNUJwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmVtb3ZlT3JGaWVsZFZhbHVlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAncmVtb3ZlT3JGaWVsZFZhbHVlJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBWYWx1ZSkgPT4gX0FTVCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlbW92ZU9yRmllbGRDbGF1c2VzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAncmVtb3ZlT3JGaWVsZENsYXVzZXMnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZmllbGQ6IHN0cmluZykgPT4gX0FTVCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhhc1NpbXBsZUZpZWxkQ2xhdXNlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnaGFzU2ltcGxlRmllbGRDbGF1c2UnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZmllbGQ6IHN0cmluZywgdmFsdWU/OiBWYWx1ZSkgPT4gYm9vbGVhbicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldFNpbXBsZUZpZWxkQ2xhdXNlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZ2V0U2ltcGxlRmllbGRDbGF1c2UnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZmllbGQ6IHN0cmluZywgdmFsdWU/OiBWYWx1ZSkgPT4gRmllbGRDbGF1c2UnCiAgICAgICAgfQogICAgICB9LAogICAgICBhZGRTaW1wbGVGaWVsZFZhbHVlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnYWRkU2ltcGxlRmllbGRWYWx1ZScsCiAgICAgICAgcGFyZW50OiB1bmRlZmluZWQsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJyhmaWVsZDogc3RyaW5nLCB2YWx1ZTogVmFsdWUsIG11c3Q/OiBib29sZWFuLCBvcGVyYXRvcj86IE9wZXJhdG9yVHlwZSkgPT4gX0FTVCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlbW92ZVNpbXBsZUZpZWxkVmFsdWU6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdyZW1vdmVTaW1wbGVGaWVsZFZhbHVlJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBWYWx1ZSkgPT4gX0FTVCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlbW92ZVNpbXBsZUZpZWxkQ2xhdXNlczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ3JlbW92ZVNpbXBsZUZpZWxkQ2xhdXNlcycsCiAgICAgICAgcGFyZW50OiB1bmRlZmluZWQsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJyhmaWVsZDogc3RyaW5nKSA9PiBfQVNUJwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0SXNDbGF1c2VzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZ2V0SXNDbGF1c2VzJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKCkgPT4gSXNDbGF1c2VbXScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldElzQ2xhdXNlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZ2V0SXNDbGF1c2UnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZmxhZzogc3RyaW5nKSA9PiBJc0NsYXVzZScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlbW92ZUlzQ2xhdXNlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAncmVtb3ZlSXNDbGF1c2UnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZmxhZzogc3RyaW5nKSA9PiBfQVNUJwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0R3JvdXBDbGF1c2VzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZ2V0R3JvdXBDbGF1c2VzJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKCkgPT4gR3JvdXBDbGF1c2VbXScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFkZENsYXVzZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgQVNUIHdpdGggdGhlIGdpdmVuIGNsYXVzZSBhZGRlZCB0byB0aGUgY3VycmVudCBjbGF1c2VzLiBJZlxuJyArICd0aGUgY3VycmVudCBjbGF1c2VzIGFscmVhZHkgaW5jbHVkZSBhIHNpbWlsYXIgY2xhdXNlLCBpdCB3aWxsIGJlIChpbi1wbGFjZSkgcmVwbGFjZWQgYnlcbicgKyAndGhlIGdpdmVuIGNsYXVzZS4gV2hldGhlciBhIGNsYXVzZSBpcyBzaW1pbGFyIHRvIHRoZSBnaXZlbiBvbmUgZGVwZW5kcyBvbiB0aGUgdHlwZSBvZiB0aGUgY2xhdXNlLlxuJyArICdUd28gY2xhdXNlcyBhcmUgc2ltaWxhciBpZjpcbicgKyAnXG4nICsgJy0gdGhleSBhcmUgYm90aCBvZiB0aGUgc2FtZSB0eXBlXG4nICsgJy0gaWYgdGhleSBhcmUgYGRlZmF1bHRgIGNsYXVzZXMsIHRoZXkgbXVzdCBoYXZlIHRoZSBzYW1lIHZhbHVlXG4nICsgJy0gaWYgdGhleSBhcmUgYHRlcm1gIGNsYXVzZXMsIHRoZXkgbXVzdCBoYXZlIHRoZSBzYW1lIGZpZWxkcyBhbmQgdmFsdWVzXG4nICsgJy0gaWYgdGhleSBhcmUgYGlzYCBjbGF1c2VzLCB0aGV5IG11c3QgaGF2ZSB0aGUgc2FtZSBmbGFnc1xuJyArICdcbicgKyAnVGhlIHJlYXNvbmluZyBiZWhpbmQgbm90IGluY2x1ZGluZyB0aGUgYG1hdGNoYCBhdHRyaWJ1dGVzIG9mIHRoZSBjbGF1c2VzIGluIHRoZSBydWxlcyBhYm92ZSwgc3RlbXNcbicgKyAnaW4gdGhlIGZhY3QgdGhhdCB0aGUgQVNUIGNsYXVzZXMgYXJlIEFORGVkLCBhbmQgaGF2aW5nIHR3byBzaW1pbGFyIGNsYXVzZXMgd2l0aCB0d28gZGlmZmVyZW50XG4nICsgJ21hdGNoIGF0dHJpYnV0ZXMgY3JlYXRlcyBhIGxvZ2ljYWxseSBjb250cmFkaWN0ZWQgQVNUIChlLmcuIHdoYXQgZG9lcyBpdCBtZWFuIHRvXG4nICsgJyIobXVzdCBoYXZlIHgpIEFORCAobXVzdCBub3QgaGF2ZSB4KSI/KVxuJyArICdcbicgKyAnbm90ZTogIGluLXBsYWNlIHJlcGxhY2VtZW50IG1lYW5zIHRoZSBnaXZlbiBjbGF1c2Ugd2lsbCBiZSBwbGFjZWQgaW4gdGhlIHNhbWUgcG9zaXRpb24gYXMgdGhlIG9uZSBpdFxuJyArICcgICAgICAgIHJlcGxhY2VkJywKICAgICAgICBuYW1lOiAnYWRkQ2xhdXNlJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKG5ld0NsYXVzZTogQ2xhdXNlKSA9PiBfQVNUJwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGV4dGVuZGVkSW50ZXJmYWNlczogW10KICB9Owp9IGNhdGNoIChlKSB7fQ=="},{"version":3,"sources":["D:/work/eui/src/components/search_bar/query/ast_to_es_query_string.ts"],"names":["printIso8601","isDateValue","AST","Operator","isArray","isDateLike","isString","isBoolean","isNumber","emitMatch","match","Match","isMust","escapeValue","value","replace","emitFieldDateLikeClause","field","operator","matchOp","EQ","GT","GTE","LT","LTE","Error","emitFieldDateValueClause","granularity","resolve","date","gte","iso8601","start","lt","startOfNext","emitFieldNumericClause","emitFieldStringClause","emitFieldBooleanClause","emitFieldSingleValueClause","emitFieldClause","clause","isGroupMember","undefined","clauses","map","v","join","emitTermClause","emitIsClause","flag","flagValue","emitGroupClause","formattedValues","emitClause","Field","isInstance","Term","Is","Group","JSON","stringify","astToEsQueryString","ast","length"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport moment from 'moment';\nimport { printIso8601 } from './date_format';\nimport { DateValue, isDateValue } from './date_value';\nimport {\n  _AST,\n  AST,\n  Clause,\n  FieldClause,\n  GroupClause,\n  IsClause,\n  MatchType,\n  Operator,\n  OperatorType,\n  TermClause,\n  Value,\n} from './ast';\nimport {\n  isArray,\n  isDateLike,\n  isString,\n  isBoolean,\n  isNumber,\n} from '../../../services/predicate';\n\nconst emitMatch = (match: MatchType | undefined) => {\n  if (!match) {\n    return '';\n  }\n  return AST.Match.isMust(match) ? '+' : '-';\n};\n\nconst escapeValue = (value: Value) => {\n  if (typeof value === 'string') {\n    return value.replace(/([\\\\\"])/g, '\\\\$1');\n  }\n  return value;\n};\n\nconst emitFieldDateLikeClause = (\n  field: string,\n  value: moment.Moment | Date,\n  operator: OperatorType,\n  match?: MatchType\n) => {\n  const matchOp = emitMatch(match);\n  switch (operator) {\n    case Operator.EQ:\n      return `${matchOp}${field}:${printIso8601(value)}`;\n    case Operator.GT:\n      return `${matchOp}${field}:>${printIso8601(value)}`;\n    case Operator.GTE:\n      return `${matchOp}${field}:>=${printIso8601(value)}`;\n    case Operator.LT:\n      return `${matchOp}${field}:<${printIso8601(value)}`;\n    case Operator.LTE:\n      return `${matchOp}${field}:<=${printIso8601(value)}`;\n    default:\n      throw new Error(`unknown operator [${operator}]`);\n  }\n};\n\nconst emitFieldDateValueClause = (\n  field: string,\n  value: DateValue,\n  operator: OperatorType,\n  match?: MatchType\n) => {\n  const matchOp = emitMatch(match);\n  const { granularity, resolve } = value;\n  const date = resolve();\n  if (granularity) {\n    switch (operator) {\n      case Operator.EQ:\n        const gte = granularity.iso8601(granularity.start(date));\n        const lt = granularity.iso8601(granularity.startOfNext(date));\n        return `${matchOp}${field}:(>=${gte} AND <${lt})`;\n      case Operator.GT:\n        return `${matchOp}${field}:>=${granularity.iso8601(\n          granularity.startOfNext(date)\n        )}`;\n      case Operator.GTE:\n        return `${matchOp}${field}:>=${granularity.iso8601(\n          granularity.start(date)\n        )}`;\n      case Operator.LT:\n        return `${matchOp}${field}:<${granularity.iso8601(\n          granularity.start(date)\n        )}`;\n      case Operator.LTE:\n        return `${matchOp}${field}:<${granularity.iso8601(\n          granularity.startOfNext(date)\n        )}`;\n      default:\n        throw new Error(`unknown operator [${operator}]`);\n    }\n  }\n  return emitFieldDateLikeClause(field, date, operator, match);\n};\n\nconst emitFieldNumericClause = (\n  field: string,\n  value: number,\n  operator: OperatorType,\n  match?: MatchType\n) => {\n  const matchOp = emitMatch(match);\n  switch (operator) {\n    case Operator.EQ:\n      return `${matchOp}${field}:${value}`;\n    case Operator.GT:\n      return `${matchOp}${field}:>${value}`;\n    case Operator.GTE:\n      return `${matchOp}${field}:>=${value}`;\n    case Operator.LT:\n      return `${matchOp}${field}:<${value}`;\n    case Operator.LTE:\n      return `${matchOp}${field}:<=${value}`;\n    default:\n      throw new Error(`unknown operator [${operator}]`);\n  }\n};\n\nconst emitFieldStringClause = (\n  field: string,\n  value: string,\n  match?: MatchType\n) => {\n  const matchOp = emitMatch(match);\n  if (value.match(/\\s/)) {\n    return `${matchOp}${field}:\"${escapeValue(value)}\"`;\n  }\n  return `${matchOp}${field}:${escapeValue(value)}`;\n};\n\nconst emitFieldBooleanClause = (\n  field: string,\n  value: Value,\n  match?: MatchType\n) => {\n  const matchOp = emitMatch(match);\n  return `${matchOp}${field}:${value}`;\n};\n\nconst emitFieldSingleValueClause = (\n  field: string,\n  value: Value,\n  operator: OperatorType,\n  match?: MatchType\n) => {\n  if (isDateValue(value)) {\n    return emitFieldDateValueClause(field, value, operator, match);\n  }\n  if (isDateLike(value)) {\n    return emitFieldDateLikeClause(field, value, operator, match);\n  }\n  if (isString(value)) {\n    return emitFieldStringClause(field, value, match);\n  }\n  if (isNumber(value)) {\n    return emitFieldNumericClause(field, value, operator, match);\n  }\n  if (isBoolean(value)) {\n    return emitFieldBooleanClause(field, value, match);\n  }\n  throw new Error(`unknown type of field value [${value}]`);\n};\n\nconst emitFieldClause = (\n  clause: FieldClause,\n  isGroupMember: boolean\n): string => {\n  const { field, value, operator } = clause;\n  let { match } = clause;\n  if (isGroupMember && AST.Match.isMust(match)) {\n    match = undefined;\n  }\n\n  if (!isArray(value)) {\n    return emitFieldSingleValueClause(field, value, operator, match);\n  }\n  const matchOp = emitMatch(match);\n  const clauses = value\n    .map((v) => emitFieldSingleValueClause(field, v, operator))\n    .join(' OR ');\n  return `${matchOp}(${clauses})`;\n};\n\nconst emitTermClause = (clause: TermClause, isGroupMember: boolean): string => {\n  const { value } = clause;\n  let { match } = clause;\n  if (isGroupMember && AST.Match.isMust(match)) {\n    match = undefined;\n  }\n\n  const matchOp = emitMatch(match);\n  return `${matchOp}${escapeValue(value)}`;\n};\n\nconst emitIsClause = (clause: IsClause, isGroupMember: boolean): string => {\n  const { flag, match } = clause;\n  const matchOp = isGroupMember ? '' : '+';\n  const flagValue = AST.Match.isMust(match);\n  return `${matchOp}${flag}:${flagValue}`;\n};\n\nconst emitGroupClause = (clause: GroupClause): string => {\n  const { value } = clause;\n  const formattedValues = value.map((clause) => {\n    return emitClause(clause, true);\n  });\n  return `+(${formattedValues.join(' ')})`;\n};\n\nfunction emitClause(clause: Clause, isGroupMember = false) {\n  if (AST.Field.isInstance(clause)) {\n    return emitFieldClause(clause, isGroupMember);\n  }\n  if (AST.Term.isInstance(clause)) {\n    return emitTermClause(clause, isGroupMember);\n  }\n  if (AST.Is.isInstance(clause)) {\n    return emitIsClause(clause, isGroupMember);\n  }\n  if (AST.Group.isInstance(clause)) {\n    return emitGroupClause(clause);\n  }\n  throw new Error(`unknown clause type [${JSON.stringify(clause)}]`);\n}\n\nexport const astToEsQueryString = (ast: _AST) => {\n  if (ast.clauses.length === 0) {\n    return '*';\n  }\n\n  return ast.clauses.map((clause) => emitClause(clause)).join(' ');\n};\n"]}]}