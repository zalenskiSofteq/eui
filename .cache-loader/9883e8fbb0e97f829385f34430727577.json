{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\i18n\\i18n_util.tsx","dependencies":[{"path":"D:\\work\\eui\\src\\components\\i18n\\i18n_util.tsx","mtime":1649070093473},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KaW1wb3J0IHsgY2xvbmVFbGVtZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBpc0Jvb2xlYW4sIGlzU3RyaW5nLCBpc051bWJlciwgaXNVbmRlZmluZWQgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wcmVkaWNhdGUnOwppbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tICdyZWFjdC1pcyc7CgpmdW5jdGlvbiBpc1ByaW1pdGl2ZSh2YWx1ZSkgewogIHJldHVybiBpc0Jvb2xlYW4odmFsdWUpIHx8IGlzU3RyaW5nKHZhbHVlKSB8fCBpc051bWJlcih2YWx1ZSkgfHwgaXNVbmRlZmluZWQodmFsdWUpOwp9CgpmdW5jdGlvbiBoYXNQcm9wTmFtZShjaGlsZCkgewogIHJldHVybiBjaGlsZCA/IF90eXBlb2YoY2hpbGQpID09PSAnb2JqZWN0JyAmJiBjaGlsZC5oYXNPd25Qcm9wZXJ0eSgncHJvcE5hbWUnKSA6IGZhbHNlOwp9Ci8qKgogKiBSZXBsYWNlcyBwbGFjZWhvbGRlciB2YWx1ZXMgaW4gYGlucHV0YCB3aXRoIHRoZWlyIG1hdGNoaW5nIHZhbHVlIGluIGB2YWx1ZXNgCiAqIGUuZy4gaW5wdXQ6J0hlbGxvLCB7bmFtZX0nIHdpbGwgcmVwbGFjZSBge25hbWV9YCB3aXRoIGB2YWx1ZXNbbmFtZV1gCiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dAogKiBAcGFyYW0ge1JlbmRlcmFibGVWYWx1ZXN9IHZhbHVlcwogKiBAcGFyYW0ge0Z1bmN0aW9ufSBpMThuTWFwcGluZ0Z1bmMKICogQHJldHVybnMge3N0cmluZyB8IFJlYWN0LlJlYWN0Q2hpbGRbXX0KICovCgoKZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NTdHJpbmdUb0NoaWxkcmVuKGlucHV0LCB2YWx1ZXMsIGkxOG5NYXBwaW5nRnVuYykgewogIHZhciBjaGlsZHJlbiA9IFtdOwogIHZhciBjaGlsZDsKCiAgZnVuY3Rpb24gYXBwZW5kQ2hhclRvQ2hpbGQoY2hhcikgewogICAgaWYgKGNoaWxkID09PSB1bmRlZmluZWQpIHsKICAgICAgLy8gc3RhcnRpbmcgYSBuZXcgc3RyaW5nIGxpdGVyYWwKICAgICAgY2hpbGQgPSBjaGFyOwogICAgfSBlbHNlIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnKSB7CiAgICAgIC8vIGV4aXN0aW5nIHN0cmluZyBsaXRlcmFsCiAgICAgIGNoaWxkID0gY2hpbGQgKyBjaGFyOwogICAgfSBlbHNlIGlmIChoYXNQcm9wTmFtZShjaGlsZCkpIHsKICAgICAgLy8gYWRkaW5nIHRvIHRoZSBwcm9wTmFtZSBvZiBhIHZhbHVlcyBsb29rdXAKICAgICAgY2hpbGQucHJvcE5hbWUgPSBjaGlsZC5wcm9wTmFtZSArIGNoYXI7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhcHBlbmRWYWx1ZVRvQ2hpbGRyZW4odmFsdWUpIHsKICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybjsKICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KHZhbHVlKSkgewogICAgICAvLyBhbiBhcnJheSB3aXRoIGFueSBSZWFjdEVsZW1lbnRzIHdpbGwgYmUga2VwdCBhcyBhbiBhcnJheQogICAgICAvLyBzbyB0aGV5IG5lZWQgdG8gYmUgYXNzaWduZWQgYSBrZXkKICAgICAgY2hpbGRyZW4ucHVzaCggLyojX19QVVJFX18qL2Nsb25lRWxlbWVudCh2YWx1ZSwgewogICAgICAgIGtleTogY2hpbGRyZW4ubGVuZ3RoCiAgICAgIH0pKTsKICAgIH0gZWxzZSBpZiAoaGFzUHJvcE5hbWUodmFsdWUpKSB7Ly8gdGhpcyB3b24ndCBiZSBjYWxsZWQsIHByb3BOYW1lIGNoaWxkcmVuIGFyZSBjb252ZXJ0ZWQgdG8gYSBSZWFjdENoaWxkIGJlZm9yZSBjYWxsaW5nIHRoaXMKICAgIH0gZWxzZSB7CiAgICAgIC8vIGV2ZXJ5dGhpbmcgZWxzZSBjYW4gZ28gc3RyYWlnaHQgaW4KICAgICAgaWYgKGkxOG5NYXBwaW5nRnVuYyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YWx1ZSA9IGkxOG5NYXBwaW5nRnVuYyh2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGNoaWxkcmVuLnB1c2godmFsdWUpOwogICAgfQogIH0gLy8gaWYgd2UgZG9uJ3QgZW5jb3VudGVyIGEgbm9uLXByaW1pdGl2ZQogIC8vIHRoZW4gYGNoaWxkcmVuYCBjYW4gYmUgY29uY2F0ZW5hdGVkIHRvZ2V0aGVyIGF0IHRoZSBlbmQKCgogIHZhciBlbmNvdW50ZXJlZE5vblByaW1pdGl2ZSA9IGZhbHNlOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgY2hhciA9IGlucHV0W2ldOwoKICAgIGlmIChjaGFyID09PSAnXFwnKSB7CiAgICAgIC8vIHBlZWsgYXQgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGtub3cgaWYgdGhpcyBpcyBhbiBlc2NhcGUKICAgICAgdmFyIG5leHRDaGFyID0gaW5wdXRbaSArIDFdOwogICAgICB2YXIgY2hhclRvQWRkID0gY2hhcjsgLy8gaWYgdGhpcyBpc24ndCBhbiBlc2NhcGUgc2VxdWVuY2UgdGhlbiB3ZSB3aWxsIGFkZCB0aGUgYmFja3NsYXNoCgogICAgICBpZiAobmV4dENoYXIgPT09ICd7JyB8fCBuZXh0Q2hhciA9PT0gJ30nKSB7CiAgICAgICAgLy8gZXNjYXBpbmcgYSBicmFjZQogICAgICAgIGkgKz0gMTsgLy8gYWR2YW5jZSBwYXNzZWQgdGhlIGJyYWNlCgogICAgICAgIGNoYXJUb0FkZCA9IGlucHV0W2ldOwogICAgICB9CgogICAgICBhcHBlbmRDaGFyVG9DaGlsZChjaGFyVG9BZGQpOwogICAgfSBlbHNlIGlmIChjaGFyID09PSAneycpIHsKICAgICAgYXBwZW5kVmFsdWVUb0NoaWxkcmVuKGNoaWxkKTsKICAgICAgY2hpbGQgPSB7CiAgICAgICAgcHJvcE5hbWU6ICcnCiAgICAgIH07CiAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICd9JykgewogICAgICB2YXIgcHJvcE5hbWUgPSBjaGlsZC5wcm9wTmFtZTsKCiAgICAgIGlmICghdmFsdWVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiS2V5IFwiIi5jb25jYXQocHJvcE5hbWUsICJcIiBub3QgZm91bmQgaW4gIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHZhbHVlcywgbnVsbCwgMikpKTsKICAgICAgfQoKICAgICAgdmFyIHByb3BWYWx1ZSA9IHZhbHVlc1twcm9wTmFtZV07CiAgICAgIGVuY291bnRlcmVkTm9uUHJpbWl0aXZlID0gZW5jb3VudGVyZWROb25QcmltaXRpdmUgfHwgIWlzUHJpbWl0aXZlKHByb3BWYWx1ZSk7CiAgICAgIGFwcGVuZFZhbHVlVG9DaGlsZHJlbihwcm9wVmFsdWUpOwogICAgICBjaGlsZCA9IHVuZGVmaW5lZDsKICAgIH0gZWxzZSB7CiAgICAgIGFwcGVuZENoYXJUb0NoaWxkKGNoYXIpOwogICAgfQogIH0gLy8gaW5jbHVkZSBhbnkgcmVtYWluaW5nIGNoaWxkIHZhbHVlCgoKICBhcHBlbmRWYWx1ZVRvQ2hpbGRyZW4oY2hpbGQpOwogIHJldHVybiBlbmNvdW50ZXJlZE5vblByaW1pdGl2ZSA/IGNoaWxkcmVuIDogY2hpbGRyZW4uam9pbignJyk7Cn0KCnRyeSB7CiAgcHJvY2Vzc1N0cmluZ1RvQ2hpbGRyZW4uX19kb2NnZW5JbmZvID0gewogICAgZGVzY3JpcHRpb246ICdSZXBsYWNlcyBwbGFjZWhvbGRlciB2YWx1ZXMgaW4gYGlucHV0YCB3aXRoIHRoZWlyIG1hdGNoaW5nIHZhbHVlIGluIGB2YWx1ZXNgXG4nICsgImUuZy4gaW5wdXQ6J0hlbGxvLCB7bmFtZX0nIHdpbGwgcmVwbGFjZSBge25hbWV9YCB3aXRoIGB2YWx1ZXNbbmFtZV1gIiwKICAgIGRpc3BsYXlOYW1lOiAncHJvY2Vzc1N0cmluZ1RvQ2hpbGRyZW4nLAogICAgbWV0aG9kczogW10sCiAgICBwcm9wczoge30sCiAgICBleHRlbmRlZEludGVyZmFjZXM6IFtdCiAgfTsKfSBjYXRjaCAoZSkge30="},{"version":3,"sources":["D:/work/eui/src/components/i18n/i18n_util.tsx"],"names":["cloneElement","isBoolean","isString","isNumber","isUndefined","isElement","isPrimitive","value","hasPropName","child","hasOwnProperty","processStringToChildren","input","values","i18nMappingFunc","children","appendCharToChild","char","undefined","propName","appendValueToChildren","push","key","length","encounteredNonPrimitive","i","nextChar","charToAdd","Error","JSON","stringify","propValue","join"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { cloneElement, ReactChild } from 'react';\nimport {\n  isBoolean,\n  isString,\n  isNumber,\n  isUndefined,\n} from '../../services/predicate';\nimport { isElement } from 'react-is';\nimport { RenderableValues } from '../context/context';\n\nfunction isPrimitive(value: ReactChild | undefined) {\n  return (\n    isBoolean(value) || isString(value) || isNumber(value) || isUndefined(value)\n  );\n}\n\ntype Child = string | { propName: string } | ReactChild | undefined;\n\nfunction hasPropName(child: Child): child is { propName: string } {\n  return child\n    ? typeof child === 'object' && child.hasOwnProperty('propName')\n    : false;\n}\n\n/**\n * Replaces placeholder values in `input` with their matching value in `values`\n * e.g. input:'Hello, {name}' will replace `{name}` with `values[name]`\n * @param {string} input\n * @param {RenderableValues} values\n * @param {Function} i18nMappingFunc\n * @returns {string | React.ReactChild[]}\n */\nexport function processStringToChildren(\n  input: string,\n  values: RenderableValues,\n  i18nMappingFunc?: (token: string) => string\n): string | ReactChild[] {\n  const children: ReactChild[] = [];\n\n  let child: Child;\n\n  function appendCharToChild(char: string) {\n    if (child === undefined) {\n      // starting a new string literal\n      child = char;\n    } else if (typeof child === 'string') {\n      // existing string literal\n      child = child + char;\n    } else if (hasPropName(child)) {\n      // adding to the propName of a values lookup\n      child.propName = child.propName + char;\n    }\n  }\n\n  function appendValueToChildren(value: Child) {\n    if (value === undefined) {\n      return;\n    } else if (isElement(value)) {\n      // an array with any ReactElements will be kept as an array\n      // so they need to be assigned a key\n      children.push(cloneElement(value, { key: children.length }));\n    } else if (hasPropName(value)) {\n      // this won't be called, propName children are converted to a ReactChild before calling this\n    } else {\n      // everything else can go straight in\n      if (i18nMappingFunc !== undefined && typeof value === 'string') {\n        value = i18nMappingFunc(value);\n      }\n      children.push(value);\n    }\n  }\n\n  // if we don't encounter a non-primitive\n  // then `children` can be concatenated together at the end\n  let encounteredNonPrimitive = false;\n  for (let i = 0; i < input.length; i++) {\n    const char = input[i];\n\n    if (char === '\\\\') {\n      // peek at the next character to know if this is an escape\n      const nextChar = input[i + 1];\n      let charToAdd = char; // if this isn't an escape sequence then we will add the backslash\n\n      if (nextChar === '{' || nextChar === '}') {\n        // escaping a brace\n        i += 1; // advance passed the brace\n        charToAdd = input[i];\n      }\n      appendCharToChild(charToAdd);\n    } else if (char === '{') {\n      appendValueToChildren(child);\n      child = { propName: '' };\n    } else if (char === '}') {\n      const propName = (child as { propName: string }).propName;\n      if (!values.hasOwnProperty(propName)) {\n        throw new Error(\n          `Key \"${propName}\" not found in ${JSON.stringify(values, null, 2)}`\n        );\n      }\n      const propValue = values[propName];\n      encounteredNonPrimitive =\n        encounteredNonPrimitive || !isPrimitive(propValue);\n      appendValueToChildren(propValue);\n      child = undefined;\n    } else {\n      appendCharToChild(char);\n    }\n  }\n\n  // include any remaining child value\n  appendValueToChildren(child);\n\n  return encounteredNonPrimitive ? children : children.join('');\n}\n"]}]}