{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\search_bar\\query\\operators.ts","dependencies":[{"path":"D:\\work\\eui\\src\\components\\search_bar\\query\\operators.ts","mtime":1649070093754},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCmltcG9ydCB7IGRhdGVGb3JtYXQsIGRhdGVHcmFudWxhcml0eSB9IGZyb20gJy4vZGF0ZV9mb3JtYXQnOwppbXBvcnQgeyBpc0RhdGVWYWx1ZSB9IGZyb20gJy4vZGF0ZV92YWx1ZSc7CmltcG9ydCB7IGlzQXJyYXksIGlzQm9vbGVhbiwgaXNOdW1iZXIsIGlzU3RyaW5nLCBpc0RhdGVMaWtlLCBpc05pbCB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL3ByZWRpY2F0ZSc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKdmFyIHV0YyA9IG1vbWVudC51dGM7Cgp2YXIgcmVzb2x2ZVZhbHVlQXNEYXRlID0gZnVuY3Rpb24gcmVzb2x2ZVZhbHVlQXNEYXRlKHZhbHVlKSB7CiAgaWYgKG1vbWVudC5pc01vbWVudCh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9CgogIGlmIChtb21lbnQuaXNEYXRlKHZhbHVlKSB8fCBpc051bWJlcih2YWx1ZSkpIHsKICAgIHJldHVybiBtb21lbnQodmFsdWUpOwogIH0KCiAgcmV0dXJuIGRhdGVGb3JtYXQucGFyc2UoU3RyaW5nKHZhbHVlKSk7Cn07Cgp2YXIgZGVmYXVsdEVxT3B0aW9ucyA9IHsKICBpZ25vcmVDYXNlOiB0cnVlCn07CmV4cG9ydCB2YXIgZXEgPSBmdW5jdGlvbiBlcShmaWVsZFZhbHVlLCBjbGF1c2VWYWx1ZSkgewogIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICBvcHRpb25zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0RXFPcHRpb25zKSwgb3B0aW9ucyk7CgogIGlmIChpc05pbChmaWVsZFZhbHVlKSB8fCBpc05pbChjbGF1c2VWYWx1ZSkpIHsKICAgIHJldHVybiBmaWVsZFZhbHVlID09PSBjbGF1c2VWYWx1ZTsKICB9CgogIGlmIChpc0Jvb2xlYW4oZmllbGRWYWx1ZSkpIHsKICAgIHJldHVybiBjbGF1c2VWYWx1ZSA9PT0gZmllbGRWYWx1ZTsKICB9CgogIGlmIChpc0FycmF5KGZpZWxkVmFsdWUpKSB7CiAgICBpZiAoZmllbGRWYWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgIHJldHVybiBmaWVsZFZhbHVlLnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gZXEoaXRlbSwgY2xhdXNlVmFsdWUsIG9wdGlvbnMpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBlcSgnJywgY2xhdXNlVmFsdWUsIG9wdGlvbnMpOwogICAgfQogIH0KCiAgaWYgKGlzRGF0ZVZhbHVlKGNsYXVzZVZhbHVlKSkgewogICAgdmFyIGRhdGVGaWVsZFZhbHVlID0gcmVzb2x2ZVZhbHVlQXNEYXRlKGZpZWxkVmFsdWUpOwoKICAgIGlmIChjbGF1c2VWYWx1ZS5ncmFudWxhcml0eSkgewogICAgICByZXR1cm4gY2xhdXNlVmFsdWUuZ3JhbnVsYXJpdHkuaXNTYW1lKGRhdGVGaWVsZFZhbHVlLCBjbGF1c2VWYWx1ZS5yZXNvbHZlKCkpOwogICAgfQoKICAgIHJldHVybiBkYXRlRmllbGRWYWx1ZS5pc1NhbWUoY2xhdXNlVmFsdWUucmVzb2x2ZSgpKTsKICB9CgogIGlmIChpc1N0cmluZyhmaWVsZFZhbHVlKSkgewogICAgaWYgKG9wdGlvbnMuZXhhY3RNYXRjaCA9PT0gdHJ1ZSkgewogICAgICByZXR1cm4gb3B0aW9ucy5pZ25vcmVDYXNlID8gZmllbGRWYWx1ZS50b0xvd2VyQ2FzZSgpID09PSBjbGF1c2VWYWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiBmaWVsZFZhbHVlID09PSBjbGF1c2VWYWx1ZS50b1N0cmluZygpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9wdGlvbnMuaWdub3JlQ2FzZSA/IGZpZWxkVmFsdWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhjbGF1c2VWYWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpIDogZmllbGRWYWx1ZS5pbmNsdWRlcyhjbGF1c2VWYWx1ZS50b1N0cmluZygpKTsKICAgIH0KICB9CgogIGlmIChpc051bWJlcihmaWVsZFZhbHVlKSkgewogICAgY2xhdXNlVmFsdWUgPSBOdW1iZXIoY2xhdXNlVmFsdWUpOwogICAgcmV0dXJuIGZpZWxkVmFsdWUgPT09IGNsYXVzZVZhbHVlOwogIH0KCiAgaWYgKGlzRGF0ZUxpa2UoZmllbGRWYWx1ZSkpIHsKICAgIHZhciBkYXRlID0gcmVzb2x2ZVZhbHVlQXNEYXRlKGNsYXVzZVZhbHVlKTsKCiAgICBpZiAoIWRhdGUuaXNWYWxpZCgpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB2YXIgZ3JhbnVsYXJpdHkgPSBkYXRlR3JhbnVsYXJpdHkoZGF0ZSk7CgogICAgaWYgKCFncmFudWxhcml0eSkgewogICAgICByZXR1cm4gdXRjKGZpZWxkVmFsdWUpLmlzU2FtZShkYXRlKTsKICAgIH0KCiAgICByZXR1cm4gZ3JhbnVsYXJpdHkuaXNTYW1lKGZpZWxkVmFsdWUsIGRhdGUpOwogIH0KCiAgcmV0dXJuIGZhbHNlOyAvLyB1bmtub3duIHZhbHVlIHR5cGUKfTsKZXhwb3J0IHZhciBleGFjdCA9IGZ1bmN0aW9uIGV4YWN0KGZpZWxkVmFsdWUsIGNsYXVzZVZhbHVlKSB7CiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwogIHJldHVybiBlcShmaWVsZFZhbHVlLCBjbGF1c2VWYWx1ZSwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zKSwge30sIHsKICAgIGV4YWN0TWF0Y2g6IHRydWUKICB9KSk7Cn07Cgp2YXIgZ3JlYXRlclRoZW4gPSBmdW5jdGlvbiBncmVhdGVyVGhlbihmaWVsZFZhbHVlLCBjbGF1c2VWYWx1ZSkgewogIHZhciBpbmNsdXNpdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwoKICBpZiAoaXNEYXRlVmFsdWUoY2xhdXNlVmFsdWUpKSB7CiAgICB2YXIgY2xhdXNlRGF0ZVZhbHVlID0gY2xhdXNlVmFsdWUucmVzb2x2ZSgpOwogICAgdmFyIGZpZWxkVmFsdWVBc01vbWVudElucHV0ID0gZmllbGRWYWx1ZTsKCiAgICBpZiAoIWNsYXVzZVZhbHVlLmdyYW51bGFyaXR5KSB7CiAgICAgIHJldHVybiBpbmNsdXNpdmUgPyB1dGMoZmllbGRWYWx1ZUFzTW9tZW50SW5wdXQpLmlzU2FtZU9yQWZ0ZXIoY2xhdXNlRGF0ZVZhbHVlKSA6IHV0YyhmaWVsZFZhbHVlQXNNb21lbnRJbnB1dCkuaXNBZnRlcihjbGF1c2VEYXRlVmFsdWUpOwogICAgfQoKICAgIGlmIChpbmNsdXNpdmUpIHsKICAgICAgcmV0dXJuIHV0YyhmaWVsZFZhbHVlQXNNb21lbnRJbnB1dCkuaXNTYW1lT3JBZnRlcihjbGF1c2VWYWx1ZS5ncmFudWxhcml0eS5zdGFydChjbGF1c2VEYXRlVmFsdWUpKTsKICAgIH0KCiAgICByZXR1cm4gdXRjKGZpZWxkVmFsdWVBc01vbWVudElucHV0KS5pc1NhbWVPckFmdGVyKGNsYXVzZVZhbHVlLmdyYW51bGFyaXR5LnN0YXJ0T2ZOZXh0KGNsYXVzZURhdGVWYWx1ZSkpOwogIH0KCiAgaWYgKGlzU3RyaW5nKGZpZWxkVmFsdWUpKSB7CiAgICB2YXIgc3RyID0gU3RyaW5nKGNsYXVzZVZhbHVlKTsKICAgIHJldHVybiBpbmNsdXNpdmUgPyBmaWVsZFZhbHVlID49IHN0ciA6IGZpZWxkVmFsdWUgPiBzdHI7CiAgfQoKICBpZiAoaXNOdW1iZXIoZmllbGRWYWx1ZSkpIHsKICAgIHZhciBudW1iZXIgPSBOdW1iZXIoY2xhdXNlVmFsdWUpOwogICAgcmV0dXJuIGluY2x1c2l2ZSA/IGZpZWxkVmFsdWUgPj0gbnVtYmVyIDogZmllbGRWYWx1ZSA+IG51bWJlcjsKICB9CgogIGlmIChpc0RhdGVMaWtlKGZpZWxkVmFsdWUpKSB7CiAgICB2YXIgZGF0ZSA9IHJlc29sdmVWYWx1ZUFzRGF0ZShjbGF1c2VWYWx1ZSk7CiAgICB2YXIgZ3JhbnVsYXJpdHkgPSBkYXRlR3JhbnVsYXJpdHkoZGF0ZSk7CgogICAgaWYgKCFncmFudWxhcml0eSkgewogICAgICByZXR1cm4gaW5jbHVzaXZlID8gdXRjKGZpZWxkVmFsdWUpLmlzU2FtZU9yQWZ0ZXIoZGF0ZSkgOiB1dGMoZmllbGRWYWx1ZSkuaXNBZnRlcihkYXRlKTsKICAgIH0KCiAgICBpZiAoaW5jbHVzaXZlKSB7CiAgICAgIHJldHVybiB1dGMoZmllbGRWYWx1ZSkuaXNTYW1lT3JBZnRlcihncmFudWxhcml0eS5zdGFydChkYXRlKSk7CiAgICB9CgogICAgcmV0dXJuIHV0YyhmaWVsZFZhbHVlKS5pc1NhbWVPckFmdGVyKGdyYW51bGFyaXR5LnN0YXJ0T2ZOZXh0KGRhdGUpKTsKICB9CgogIGlmIChpc0FycmF5KGZpZWxkVmFsdWUpKSB7CiAgICByZXR1cm4gZmllbGRWYWx1ZS5ldmVyeShmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gZ3JlYXRlclRoZW4oaXRlbSwgY2xhdXNlVmFsdWUsIGluY2x1c2l2ZSk7CiAgICB9KTsKICB9CgogIHJldHVybiBmYWxzZTsgLy8gdW5zdXBwb3J0ZWQgdmFsdWUgdHlwZQp9OwoKZXhwb3J0IHZhciBndCA9IGZ1bmN0aW9uIGd0KGZpZWxkVmFsdWUsIGNsYXVzZVZhbHVlKSB7CiAgaWYgKGlzTmlsKGZpZWxkVmFsdWUpIHx8IGlzTmlsKGNsYXVzZVZhbHVlKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIGdyZWF0ZXJUaGVuKGZpZWxkVmFsdWUsIGNsYXVzZVZhbHVlKTsKfTsKZXhwb3J0IHZhciBndGUgPSBmdW5jdGlvbiBndGUoZmllbGRWYWx1ZSwgY2xhdXNlVmFsdWUpIHsKICBpZiAoaXNOaWwoZmllbGRWYWx1ZSkgfHwgaXNOaWwoY2xhdXNlVmFsdWUpKSB7CiAgICByZXR1cm4gZmllbGRWYWx1ZSA9PT0gY2xhdXNlVmFsdWU7CiAgfQoKICByZXR1cm4gZ3JlYXRlclRoZW4oZmllbGRWYWx1ZSwgY2xhdXNlVmFsdWUsIHRydWUpOwp9OwpleHBvcnQgdmFyIGx0ID0gZnVuY3Rpb24gbHQoZmllbGRWYWx1ZSwgY2xhdXNlVmFsdWUpIHsKICBpZiAoaXNOaWwoZmllbGRWYWx1ZSkgfHwgaXNOaWwoY2xhdXNlVmFsdWUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gIWdyZWF0ZXJUaGVuKGZpZWxkVmFsdWUsIGNsYXVzZVZhbHVlLCB0cnVlKTsKfTsKZXhwb3J0IHZhciBsdGUgPSBmdW5jdGlvbiBsdGUoZmllbGRWYWx1ZSwgY2xhdXNlVmFsdWUpIHsKICBpZiAoaXNOaWwoZmllbGRWYWx1ZSkgfHwgaXNOaWwoY2xhdXNlVmFsdWUpKSB7CiAgICByZXR1cm4gZmllbGRWYWx1ZSA9PT0gY2xhdXNlVmFsdWU7CiAgfQoKICByZXR1cm4gIWdyZWF0ZXJUaGVuKGZpZWxkVmFsdWUsIGNsYXVzZVZhbHVlKTsKfTs="},{"version":3,"sources":["D:/work/eui/src/components/search_bar/query/operators.ts"],"names":["dateFormat","dateGranularity","isDateValue","isArray","isBoolean","isNumber","isString","isDateLike","isNil","moment","utc","resolveValueAsDate","value","isMoment","isDate","parse","String","defaultEqOptions","ignoreCase","eq","fieldValue","clauseValue","options","length","some","item","dateFieldValue","granularity","isSame","resolve","exactMatch","toLowerCase","toString","includes","Number","date","isValid","exact","greaterThen","inclusive","clauseDateValue","fieldValueAsMomentInput","isSameOrAfter","isAfter","start","startOfNext","str","number","every","gt","gte","lt","lte"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { dateFormat, dateGranularity } from './date_format';\nimport { isDateValue } from './date_value';\nimport {\n  isArray,\n  isBoolean,\n  isNumber,\n  isString,\n  isDateLike,\n  isNil,\n} from '../../../services/predicate';\nimport moment from 'moment';\nimport { Value } from './ast';\n\nexport type FieldValue =\n  | string\n  | number\n  | boolean\n  | any[]\n  | Date\n  | moment.Moment\n  | null\n  | undefined;\n\nexport type ClauseValue = Value | Date | moment.Moment | null | undefined;\n\nconst utc = moment.utc;\n\nconst resolveValueAsDate = (value: FieldValue) => {\n  if (moment.isMoment(value)) {\n    return value;\n  }\n  if (moment.isDate(value) || isNumber(value)) {\n    return moment(value);\n  }\n  return dateFormat.parse(String(value));\n};\n\ntype Options = Partial<{\n  exactMatch: boolean;\n  ignoreCase: boolean;\n}>;\n\nconst defaultEqOptions: Options = {\n  ignoreCase: true,\n};\n\nexport const eq = (\n  fieldValue: FieldValue,\n  clauseValue: ClauseValue,\n  options: Options = {}\n): boolean => {\n  options = { ...defaultEqOptions, ...options };\n\n  if (isNil(fieldValue) || isNil(clauseValue)) {\n    return fieldValue === clauseValue;\n  }\n\n  if (isBoolean(fieldValue)) {\n    return clauseValue === fieldValue;\n  }\n\n  if (isArray(fieldValue)) {\n    if (fieldValue.length > 0) {\n      return fieldValue.some((item) => eq(item, clauseValue, options));\n    } else {\n      return eq('', clauseValue, options);\n    }\n  }\n\n  if (isDateValue(clauseValue)) {\n    const dateFieldValue = resolveValueAsDate(fieldValue);\n    if (clauseValue.granularity) {\n      return clauseValue.granularity.isSame(\n        dateFieldValue,\n        clauseValue.resolve()\n      );\n    }\n    return dateFieldValue.isSame(clauseValue.resolve());\n  }\n\n  if (isString(fieldValue)) {\n    if (options.exactMatch === true) {\n      return options.ignoreCase\n        ? fieldValue.toLowerCase() === clauseValue.toString().toLowerCase()\n        : fieldValue === clauseValue.toString();\n    } else {\n      return options.ignoreCase\n        ? fieldValue\n            .toLowerCase()\n            .includes(clauseValue.toString().toLowerCase())\n        : fieldValue.includes(clauseValue.toString());\n    }\n  }\n\n  if (isNumber(fieldValue)) {\n    clauseValue = Number(clauseValue);\n    return fieldValue === clauseValue;\n  }\n\n  if (isDateLike(fieldValue)) {\n    const date = resolveValueAsDate(clauseValue);\n    if (!date.isValid()) {\n      return false;\n    }\n    const granularity = dateGranularity(date);\n    if (!granularity) {\n      return utc(fieldValue).isSame(date);\n    }\n    return granularity.isSame(fieldValue as moment.Moment, date);\n  }\n\n  return false; // unknown value type\n};\n\nexport const exact = (\n  fieldValue: FieldValue,\n  clauseValue: ClauseValue,\n  options = {}\n) => {\n  return eq(fieldValue, clauseValue, { ...options, exactMatch: true });\n};\n\nconst greaterThen = (\n  fieldValue: FieldValue,\n  clauseValue: ClauseValue,\n  inclusive = false\n): boolean => {\n  if (isDateValue(clauseValue)) {\n    const clauseDateValue = clauseValue.resolve();\n\n    const fieldValueAsMomentInput = fieldValue as moment.MomentInput;\n\n    if (!clauseValue.granularity) {\n      return inclusive\n        ? utc(fieldValueAsMomentInput).isSameOrAfter(clauseDateValue)\n        : utc(fieldValueAsMomentInput).isAfter(clauseDateValue);\n    }\n\n    if (inclusive) {\n      return utc(fieldValueAsMomentInput).isSameOrAfter(\n        clauseValue.granularity.start(clauseDateValue)\n      );\n    }\n    return utc(fieldValueAsMomentInput).isSameOrAfter(\n      clauseValue.granularity.startOfNext(clauseDateValue)\n    );\n  }\n\n  if (isString(fieldValue)) {\n    const str = String(clauseValue);\n    return inclusive ? fieldValue >= str : fieldValue > str;\n  }\n\n  if (isNumber(fieldValue)) {\n    const number = Number(clauseValue);\n    return inclusive ? fieldValue >= number : fieldValue > number;\n  }\n\n  if (isDateLike(fieldValue)) {\n    const date = resolveValueAsDate(clauseValue);\n    const granularity = dateGranularity(date);\n    if (!granularity) {\n      return inclusive\n        ? utc(fieldValue).isSameOrAfter(date)\n        : utc(fieldValue).isAfter(date);\n    }\n    if (inclusive) {\n      return utc(fieldValue).isSameOrAfter(granularity.start(date));\n    }\n    return utc(fieldValue).isSameOrAfter(granularity.startOfNext(date));\n  }\n\n  if (isArray(fieldValue)) {\n    return fieldValue.every((item) =>\n      greaterThen(item, clauseValue, inclusive)\n    );\n  }\n\n  return false; // unsupported value type\n};\n\nexport const gt = (fieldValue: FieldValue, clauseValue: ClauseValue) => {\n  if (isNil(fieldValue) || isNil(clauseValue)) {\n    return false;\n  }\n  return greaterThen(fieldValue, clauseValue);\n};\n\nexport const gte = (fieldValue: FieldValue, clauseValue: ClauseValue) => {\n  if (isNil(fieldValue) || isNil(clauseValue)) {\n    return fieldValue === clauseValue;\n  }\n  return greaterThen(fieldValue, clauseValue, true);\n};\n\nexport const lt = (fieldValue: FieldValue, clauseValue: ClauseValue) => {\n  if (isNil(fieldValue) || isNil(clauseValue)) {\n    return false;\n  }\n  return !greaterThen(fieldValue, clauseValue, true);\n};\n\nexport const lte = (fieldValue: FieldValue, clauseValue: ClauseValue) => {\n  if (isNil(fieldValue) || isNil(clauseValue)) {\n    return fieldValue === clauseValue;\n  }\n  return !greaterThen(fieldValue, clauseValue);\n};\n"]}]}