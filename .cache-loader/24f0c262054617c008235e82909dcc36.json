{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\code_editor\\code_editor.tsx","dependencies":[{"path":"D:\\work\\eui\\src\\components\\code_editor\\code_editor.tsx","mtime":1649070093323},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKCmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgUHJvcFR5cGVzIGZyb20gInByb3AtdHlwZXMiOwppbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJzsKaW1wb3J0IEFjZUVkaXRvciBmcm9tICdyZWFjdC1hY2UnOwppbXBvcnQgeyBrZXlzT2YgfSBmcm9tICcuLi9jb21tb24nOwppbXBvcnQgeyBodG1sSWRHZW5lcmF0b3IsIGtleXMgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcyc7CmltcG9ydCB7IEV1aUkxOG4gfSBmcm9tICcuLi9pMThuJzsKdmFyIERFRkFVTFRfTU9ERSA9ICd0ZXh0JzsKdmFyIERFRkFVTFRfVEhFTUUgPSAndGV4dG1hdGUnOwoKZnVuY3Rpb24gc2V0T3JSZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgdmFsdWUpIHsKICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7CiAgfSBlbHNlIHsKICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIHZhbHVlKTsKICB9Cn0KCmV4cG9ydCB2YXIgRXVpQ29kZUVkaXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhFdWlDb2RlRWRpdG9yLCBfQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihFdWlDb2RlRWRpdG9yKTsKCiAgZnVuY3Rpb24gRXVpQ29kZUVkaXRvcigpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXVpQ29kZUVkaXRvcik7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbC5hcHBseShfc3VwZXIsIFt0aGlzXS5jb25jYXQoYXJncykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXRlIiwgewogICAgICBpc0hpbnRBY3RpdmU6IHRydWUsCiAgICAgIGlzRWRpdGluZzogZmFsc2UsCiAgICAgIG5hbWU6IGh0bWxJZEdlbmVyYXRvcigpKCkKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImlkR2VuZXJhdG9yIiwgaHRtbElkR2VuZXJhdG9yKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImFjZUVkaXRvciIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImVkaXRvckhpbnQiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJhY2VFZGl0b3JSZWYiLCBmdW5jdGlvbiAoYWNlRWRpdG9yKSB7CiAgICAgIGlmIChhY2VFZGl0b3IpIHsKICAgICAgICBfdGhpcy5hY2VFZGl0b3IgPSBhY2VFZGl0b3I7CiAgICAgICAgdmFyIHRleHRib3ggPSBhY2VFZGl0b3IuZWRpdG9yLnRleHRJbnB1dC5nZXRFbGVtZW50KCk7CiAgICAgICAgdGV4dGJveC50YWJJbmRleCA9IC0xOwogICAgICAgIHRleHRib3guYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF90aGlzLm9uS2V5ZG93bkFjZSk7CiAgICAgICAgc2V0T3JSZW1vdmVBdHRyaWJ1dGUodGV4dGJveCwgJ2FyaWEtbGFiZWwnLCBfdGhpcy5wcm9wc1snYXJpYS1sYWJlbCddKTsKICAgICAgICBzZXRPclJlbW92ZUF0dHJpYnV0ZSh0ZXh0Ym94LCAnYXJpYS1sYWJlbGxlZGJ5JywgX3RoaXMucHJvcHNbJ2FyaWEtbGFiZWxsZWRieSddKTsKICAgICAgICBzZXRPclJlbW92ZUF0dHJpYnV0ZSh0ZXh0Ym94LCAnYXJpYS1kZXNjcmliZWRieScsIF90aGlzLnByb3BzWydhcmlhLWRlc2NyaWJlZGJ5J10pOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbkVzY1RvRXhpdCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc3RvcEVkaXRpbmcoKTsKCiAgICAgIGlmIChfdGhpcy5lZGl0b3JIaW50KSB7CiAgICAgICAgX3RoaXMuZWRpdG9ySGludC5mb2N1cygpOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbktleWRvd25BY2UiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmtleSA9PT0ga2V5cy5FU0NBUEUpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBIYW5kbGVzIGV4aXRpbmcgZWRpdCBtb2RlIHdoZW4gYGlzUmVhZE9ubHlgIGlzIHNldC4KICAgICAgICAvLyBPdGhlciAnZXNjJyBjYXNlcyBoYW5kbGVkIGJ5IGBzdG9wRWRpdGluZ09uRXNjYCBjb21tYW5kLgogICAgICAgIC8vIFdvdWxkIHJ1biBhZnRlciBgc3RvcEVkaXRpbmdPbkVzY2AuCgogICAgICAgIGlmIChfdGhpcy5hY2VFZGl0b3IgIT09IG51bGwgJiYgIV90aGlzLmFjZUVkaXRvci5lZGl0b3IuY29tcGxldGVyICYmIF90aGlzLnN0YXRlLmlzRWRpdGluZykgewogICAgICAgICAgX3RoaXMub25Fc2NUb0V4aXQoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uRm9jdXNBY2UiLCBmdW5jdGlvbiAoZXZlbnQsIGVkaXRvcikgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNFZGl0aW5nOiB0cnVlCiAgICAgIH0pOwoKICAgICAgaWYgKF90aGlzLnByb3BzLm9uRm9jdXMpIHsKICAgICAgICBfdGhpcy5wcm9wcy5vbkZvY3VzKGV2ZW50LCBlZGl0b3IpOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbkJsdXJBY2UiLCBmdW5jdGlvbiAoZXZlbnQsIGVkaXRvcikgewogICAgICBfdGhpcy5zdG9wRWRpdGluZygpOwoKICAgICAgaWYgKF90aGlzLnByb3BzLm9uQmx1cikgewogICAgICAgIF90aGlzLnByb3BzLm9uQmx1cihldmVudCwgZWRpdG9yKTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhcnRFZGl0aW5nIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNIaW50QWN0aXZlOiBmYWxzZQogICAgICB9KTsKCiAgICAgIGlmIChfdGhpcy5hY2VFZGl0b3IgIT09IG51bGwpIHsKICAgICAgICBfdGhpcy5hY2VFZGl0b3IuZWRpdG9yLnRleHRJbnB1dC5mb2N1cygpOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRXVpQ29kZUVkaXRvciwgW3sKICAgIGtleTogInN0b3BFZGl0aW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wRWRpdGluZygpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNIaW50QWN0aXZlOiB0cnVlLAogICAgICAgIGlzRWRpdGluZzogZmFsc2UKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDdXN0b21Nb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0N1c3RvbU1vZGUoKSB7CiAgICAgIHJldHVybiBfdHlwZW9mKHRoaXMucHJvcHMubW9kZSkgPT09ICdvYmplY3QnOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEN1c3RvbU1vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEN1c3RvbU1vZGUoKSB7CiAgICAgIGlmICh0aGlzLmFjZUVkaXRvciAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuYWNlRWRpdG9yLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSh0aGlzLnByb3BzLm1vZGUpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICBpZiAodGhpcy5pc0N1c3RvbU1vZGUoKSkgewogICAgICAgIHRoaXMuc2V0Q3VzdG9tTW9kZSgpOwogICAgICB9CgogICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgaXNSZWFkT25seSA9IF90aGlzJHByb3BzLmlzUmVhZE9ubHksCiAgICAgICAgICBpZCA9IF90aGlzJHByb3BzLmlkOwogICAgICB2YXIgdGV4dGFyZWFQcm9wcyA9IHsKICAgICAgICBpZDogaWQsCiAgICAgICAgcmVhZE9ubHk6IGlzUmVhZE9ubHkKICAgICAgfTsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGF0ZS5uYW1lKTsKCiAgICAgIGlmIChlbCkgewogICAgICAgIHZhciB0ZXh0YXJlYSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7CiAgICAgICAgaWYgKHRleHRhcmVhKSBrZXlzT2YodGV4dGFyZWFQcm9wcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBpZiAodGV4dGFyZWFQcm9wc1trZXldKSB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoIiIuY29uY2F0KGtleSksIHRleHRhcmVhUHJvcHNba2V5XS50b1N0cmluZygpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykgewogICAgICBpZiAodGhpcy5wcm9wcy5tb2RlICE9PSBwcmV2UHJvcHMubW9kZSAmJiB0aGlzLmlzQ3VzdG9tTW9kZSgpKSB7CiAgICAgICAgdGhpcy5zZXRDdXN0b21Nb2RlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIHdpZHRoID0gX3RoaXMkcHJvcHMyLndpZHRoLAogICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkcHJvcHMyLmhlaWdodCwKICAgICAgICAgIG9uQmx1ciA9IF90aGlzJHByb3BzMi5vbkJsdXIsCiAgICAgICAgICBpc1JlYWRPbmx5ID0gX3RoaXMkcHJvcHMyLmlzUmVhZE9ubHksCiAgICAgICAgICBzZXRPcHRpb25zID0gX3RoaXMkcHJvcHMyLnNldE9wdGlvbnMsCiAgICAgICAgICBjdXJzb3JTdGFydCA9IF90aGlzJHByb3BzMi5jdXJzb3JTdGFydCwKICAgICAgICAgIF90aGlzJHByb3BzMiRtb2RlID0gX3RoaXMkcHJvcHMyLm1vZGUsCiAgICAgICAgICBtb2RlID0gX3RoaXMkcHJvcHMyJG1vZGUgPT09IHZvaWQgMCA/IERFRkFVTFRfTU9ERSA6IF90aGlzJHByb3BzMiRtb2RlLAogICAgICAgICAgX3RoaXMkcHJvcHMyJGRhdGFUZXMgPSBfdGhpcyRwcm9wczJbJ2RhdGEtdGVzdC1zdWJqJ10sCiAgICAgICAgICBkYXRhVGVzdFN1YmogPSBfdGhpcyRwcm9wczIkZGF0YVRlcyA9PT0gdm9pZCAwID8gJ2NvZGVFZGl0b3JDb250YWluZXInIDogX3RoaXMkcHJvcHMyJGRhdGFUZXMsCiAgICAgICAgICBfdGhpcyRwcm9wczIkdGhlbWUgPSBfdGhpcyRwcm9wczIudGhlbWUsCiAgICAgICAgICB0aGVtZSA9IF90aGlzJHByb3BzMiR0aGVtZSA9PT0gdm9pZCAwID8gREVGQVVMVF9USEVNRSA6IF90aGlzJHByb3BzMiR0aGVtZSwKICAgICAgICAgIF90aGlzJHByb3BzMiRjb21tYW5kcyA9IF90aGlzJHByb3BzMi5jb21tYW5kcywKICAgICAgICAgIGNvbW1hbmRzID0gX3RoaXMkcHJvcHMyJGNvbW1hbmRzID09PSB2b2lkIDAgPyBbXSA6IF90aGlzJHByb3BzMiRjb21tYW5kcywKICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3RoaXMkcHJvcHMyLCBbIndpZHRoIiwgImhlaWdodCIsICJvbkJsdXIiLCAiaXNSZWFkT25seSIsICJzZXRPcHRpb25zIiwgImN1cnNvclN0YXJ0IiwgIm1vZGUiLCAiZGF0YS10ZXN0LXN1YmoiLCAidGhlbWUiLCAiY29tbWFuZHMiXSk7CgogICAgICB2YXIgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2V1aUNvZGVFZGl0b3JXcmFwcGVyJywgewogICAgICAgICdldWlDb2RlRWRpdG9yV3JhcHBlci1pc0VkaXRpbmcnOiB0aGlzLnN0YXRlLmlzRWRpdGluZwogICAgICB9KTsKICAgICAgdmFyIHByb21wdENsYXNzZXMgPSBjbGFzc05hbWVzKCdldWlDb2RlRWRpdG9yS2V5Ym9hcmRIaW50JywgewogICAgICAgICdldWlDb2RlRWRpdG9yS2V5Ym9hcmRIaW50LWlzSW5hY3RpdmUnOiAhdGhpcy5zdGF0ZS5pc0hpbnRBY3RpdmUKICAgICAgfSk7CiAgICAgIHZhciBmaWx0ZXJlZEN1cnNvclN0YXJ0OwoKICAgICAgdmFyIG9wdGlvbnMgPSBfb2JqZWN0U3ByZWFkKHt9LCBzZXRPcHRpb25zKTsKCiAgICAgIGlmIChpc1JlYWRPbmx5KSB7CiAgICAgICAgLy8gUHV0IHRoZSBjdXJzb3IgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZWRpdG9yLCBzbyB0aGF0IGl0IGRvZXNuJ3QgbG9vayBsaWtlCiAgICAgICAgLy8gYSBwcm9tcHQgdG8gYmVnaW4gdHlwaW5nLgogICAgICAgIGZpbHRlcmVkQ3Vyc29yU3RhcnQgPSAtMTsKICAgICAgICBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHsKICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLAogICAgICAgICAgaGlnaGxpZ2h0QWN0aXZlTGluZTogZmFsc2UsCiAgICAgICAgICBoaWdobGlnaHRHdXR0ZXJMaW5lOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGZpbHRlcmVkQ3Vyc29yU3RhcnQgPSBjdXJzb3JTdGFydDsKICAgICAgfQoKICAgICAgdmFyIHByb21wdCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgY2xhc3NOYW1lOiBwcm9tcHRDbGFzc2VzLAogICAgICAgIGlkOiB0aGlzLmlkR2VuZXJhdG9yKCdjb2RlRWRpdG9yJyksCiAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaGludCkgewogICAgICAgICAgX3RoaXMyLmVkaXRvckhpbnQgPSBoaW50OwogICAgICAgIH0sCiAgICAgICAgb25DbGljazogdGhpcy5zdGFydEVkaXRpbmcsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImNvZGVFZGl0b3JIaW50IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBjbGFzc05hbWU6ICJldWlUZXh0IgogICAgICB9LCBpc1JlYWRPbmx5ID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpSTE4biwgewogICAgICAgIHRva2VuOiAiZXVpQ29kZUVkaXRvci5zdGFydEludGVyYWN0aW5nIiwKICAgICAgICBkZWZhdWx0OiAiUHJlc3MgRW50ZXIgdG8gc3RhcnQgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgY29kZS4iCiAgICAgIH0pIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpSTE4biwgewogICAgICAgIHRva2VuOiAiZXVpQ29kZUVkaXRvci5zdGFydEVkaXRpbmciLAogICAgICAgIGRlZmF1bHQ6ICJQcmVzcyBFbnRlciB0byBzdGFydCBlZGl0aW5nLiIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBjbGFzc05hbWU6ICJldWlUZXh0IgogICAgICB9LCBpc1JlYWRPbmx5ID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpSTE4biwgewogICAgICAgIHRva2VuOiAiZXVpQ29kZUVkaXRvci5zdG9wSW50ZXJhY3RpbmciLAogICAgICAgIGRlZmF1bHQ6ICJXaGVuIHlvdSdyZSBkb25lLCBwcmVzcyBFc2NhcGUgdG8gc3RvcCBpbnRlcmFjdGluZyB3aXRoIHRoZSBjb2RlLiIKICAgICAgfSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlJMThuLCB7CiAgICAgICAgdG9rZW46ICJldWlDb2RlRWRpdG9yLnN0b3BFZGl0aW5nIiwKICAgICAgICBkZWZhdWx0OiAiV2hlbiB5b3UncmUgZG9uZSwgcHJlc3MgRXNjYXBlIHRvIHN0b3AgZWRpdGluZy4iCiAgICAgIH0pKSk7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NlcywKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2lkdGg6IHdpZHRoLAogICAgICAgICAgaGVpZ2h0OiBoZWlnaHQKICAgICAgICB9LAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6IGRhdGFUZXN0U3ViagogICAgICB9LCBwcm9tcHQsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFjZUVkaXRvciAvLyBTZXR0aW5nIGEgZGVmYXVsdCwgZXhpc3RpbmcgYG1vZGVgIGlzIG5lY2Vzc2FyeSB0byBwcm9wZXJseSBpbml0aWFsaXplIHRoZSBlZGl0b3IKICAgICAgLy8gcHJpb3IgdG8gZHluYW1pY2FsbHkgc2V0dGluZyBhIGN1c3RvbSBtb2RlIChodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9ldWkvcHVsbC8yNjE2KQogICAgICAsIF9leHRlbmRzKHsKICAgICAgICBtb2RlOiB0aGlzLmlzQ3VzdG9tTW9kZSgpID8gREVGQVVMVF9NT0RFIDogbW9kZSAvLyBodHRwczovL2dpdGh1Yi5jb20vc2VjdXJpbmdzaW5jaXR5L3JlYWN0LWFjZS9wdWxsLzc3MQogICAgICAgICwKICAgICAgICBuYW1lOiB0aGlzLnN0YXRlLm5hbWUsCiAgICAgICAgdGhlbWU6IHRoZW1lLAogICAgICAgIHJlZjogdGhpcy5hY2VFZGl0b3JSZWYsCiAgICAgICAgd2lkdGg6IHdpZHRoLAogICAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgICAgIG9uRm9jdXM6IHRoaXMub25Gb2N1c0FjZSwKICAgICAgICBvbkJsdXI6IHRoaXMub25CbHVyQWNlLAogICAgICAgIHNldE9wdGlvbnM6IG9wdGlvbnMsCiAgICAgICAgZWRpdG9yUHJvcHM6IHsKICAgICAgICAgICRibG9ja1Njcm9sbGluZzogSW5maW5pdHkKICAgICAgICB9LAogICAgICAgIGN1cnNvclN0YXJ0OiBmaWx0ZXJlZEN1cnNvclN0YXJ0LAogICAgICAgIGNvbW1hbmRzOiBbLy8gSGFuZGxlcyBleGl0aW5nIGVkaXQgbW9kZSBpbiBhbGwgY2FzZXMgZXhjZXB0IGBpc1JlYWRPbmx5YAogICAgICAgIC8vIFJ1bnMgYmVmb3JlIGBvbktleWRvd25BY2VgLgogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICdzdG9wRWRpdGluZ09uRXNjJywKICAgICAgICAgIGJpbmRLZXk6IHsKICAgICAgICAgICAgd2luOiAnRXNjJywKICAgICAgICAgICAgbWFjOiAnRXNjJwogICAgICAgICAgfSwKICAgICAgICAgIGV4ZWM6IHRoaXMub25Fc2NUb0V4aXQKICAgICAgICB9XS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGNvbW1hbmRzKSkKICAgICAgfSwgcmVzdCkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBFdWlDb2RlRWRpdG9yOwp9KENvbXBvbmVudCk7CgpfZGVmaW5lUHJvcGVydHkoRXVpQ29kZUVkaXRvciwgImRlZmF1bHRQcm9wcyIsIHsKICBzZXRPcHRpb25zOiB7fQp9KTsKCkV1aUNvZGVFZGl0b3IucHJvcFR5cGVzID0gewogIHdpZHRoOiBQcm9wVHlwZXMuc3RyaW5nLAogIGhlaWdodDogUHJvcFR5cGVzLnN0cmluZywKICBvbkJsdXI6IFByb3BUeXBlcy5hbnksCiAgb25Gb2N1czogUHJvcFR5cGVzLmFueSwKICBpc1JlYWRPbmx5OiBQcm9wVHlwZXMuYm9vbCwKICBzZXRPcHRpb25zOiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWQsCiAgY3Vyc29yU3RhcnQ6IFByb3BUeXBlcy5udW1iZXIsCiAgImRhdGEtdGVzdC1zdWJqIjogUHJvcFR5cGVzLnN0cmluZywKCiAgLyoqCiAgICAgKiBTZWxlY3QgdGhlIGBicmFjZWAgdGhlbWUKICAgICAqIFRoZSBtYXRjaGluZyB0aGVtZSBmaWxlIG11c3QgYWxzbyBiZSBpbXBvcnRlZCBmcm9tIGBicmFjZWAgKGUuZy4sIGBpbXBvcnQgJ2JyYWNlL3RoZW1lL2dpdGh1Yic7YCkKICAgICAqLwogIHRoZW1lOiBQcm9wVHlwZXMuYW55LAoKICAvKioKICAgICAqIFVzZSBzdHJpbmcgZm9yIGEgYnVpbHQtaW4gbW9kZSBvciBvYmplY3QgZm9yIGEgY3VzdG9tIG1vZGUKICAgICAqLwogIG1vZGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hbnkuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkXSksCiAgaWQ6IFByb3BUeXBlcy5zdHJpbmcKfTsKCnRyeSB7CiAgRXVpQ29kZUVkaXRvci5fX2RvY2dlbkluZm8gPSB7CiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBkaXNwbGF5TmFtZTogJ0V1aUNvZGVFZGl0b3InLAogICAgbWV0aG9kczogW10sCiAgICBwcm9wczogewogICAgICB3aWR0aDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ3dpZHRoJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGVfZWRpdG9yL2NvZGVfZWRpdG9yLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUVkaXRvclByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9LAogICAgICBoZWlnaHQ6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdoZWlnaHQnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvY29kZV9lZGl0b3IvY29kZV9lZGl0b3IudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlDb2RlRWRpdG9yUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9uQmx1cjogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ29uQmx1cicsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb2RlX2VkaXRvci9jb2RlX2VkaXRvci50c3gnLAogICAgICAgICAgbmFtZTogJ0V1aUNvZGVFZGl0b3JQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKGV2ZW50OiBhbnksIGVkaXRvcj86IEFjZUVkaXRvckNsYXNzKSA9PiB2b2lkJwogICAgICAgIH0KICAgICAgfSwKICAgICAgb25Gb2N1czogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ29uRm9jdXMnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvY29kZV9lZGl0b3IvY29kZV9lZGl0b3IudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlDb2RlRWRpdG9yUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJyhldmVudDogYW55LCBlZGl0b3I/OiBBY2VFZGl0b3JDbGFzcykgPT4gdm9pZCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGlzUmVhZE9ubHk6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdpc1JlYWRPbmx5JywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGVfZWRpdG9yL2NvZGVfZWRpdG9yLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUVkaXRvclByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2V0T3B0aW9uczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6ICd7fScKICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnc2V0T3B0aW9ucycsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb2RlX2VkaXRvci9jb2RlX2VkaXRvci50c3gnLAogICAgICAgICAgbmFtZTogJ0V1aUNvZGVFZGl0b3JQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnSUFjZU9wdGlvbnMnCiAgICAgICAgfQogICAgICB9LAogICAgICBjdXJzb3JTdGFydDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2N1cnNvclN0YXJ0JywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGVfZWRpdG9yL2NvZGVfZWRpdG9yLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUVkaXRvclByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdudW1iZXInCiAgICAgICAgfQogICAgICB9LAogICAgICAnZGF0YS10ZXN0LXN1YmonOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZGF0YS10ZXN0LXN1YmonLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvY29kZV9lZGl0b3IvY29kZV9lZGl0b3IudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlDb2RlRWRpdG9yUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRoZW1lOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnU2VsZWN0IHRoZSBgYnJhY2VgIHRoZW1lXG4nICsgIlRoZSBtYXRjaGluZyB0aGVtZSBmaWxlIG11c3QgYWxzbyBiZSBpbXBvcnRlZCBmcm9tIGBicmFjZWAgKGUuZy4sIGBpbXBvcnQgJ2JyYWNlL3RoZW1lL2dpdGh1Yic7YCkiLAogICAgICAgIG5hbWU6ICd0aGVtZScsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb2RlX2VkaXRvci9jb2RlX2VkaXRvci50c3gnLAogICAgICAgICAgbmFtZTogJ0V1aUNvZGVFZGl0b3JQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nJwogICAgICAgIH0KICAgICAgfSwKICAgICAgbW9kZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZSBzdHJpbmcgZm9yIGEgYnVpbHQtaW4gbW9kZSBvciBvYmplY3QgZm9yIGEgY3VzdG9tIG1vZGUnLAogICAgICAgIG5hbWU6ICdtb2RlJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGVfZWRpdG9yL2NvZGVfZWRpdG9yLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUVkaXRvclByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcgfCBvYmplY3QnCiAgICAgICAgfQogICAgICB9LAogICAgICBpZDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2lkJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGVfZWRpdG9yL2NvZGVfZWRpdG9yLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUVkaXRvclByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9LAogICAgICAnYXJpYS1sYWJlbCc6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICdEZWZpbmVzIGEgc3RyaW5nIHZhbHVlIHRoYXQgbGFiZWxzIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4nICsgJ0BzZWUgYXJpYS1sYWJlbGxlZGJ5LicsCiAgICAgICAgbmFtZTogJ2FyaWEtbGFiZWwnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvbm9kZV9tb2R1bGVzL0B0eXBlcy9yZWFjdC9pbmRleC5kLnRzJywKICAgICAgICAgIG5hbWU6ICdBcmlhQXR0cmlidXRlcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nJwogICAgICAgIH0KICAgICAgfSwKICAgICAgY2xhc3NOYW1lOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnY2xhc3NOYW1lJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL25vZGVfbW9kdWxlcy9yZWFjdC1hY2UvbGliL2FjZS5kLnRzJywKICAgICAgICAgIG5hbWU6ICdJQWNlRWRpdG9yUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBleHRlbmRlZEludGVyZmFjZXM6IFsnRXVpQ29kZUVkaXRvclByb3BzJywgJ0FyaWFBdHRyaWJ1dGVzJywgJ0lBY2VFZGl0b3JQcm9wcyddCiAgfTsKfSBjYXRjaCAoZSkge30="},{"version":3,"sources":["D:/work/eui/src/components/code_editor/code_editor.tsx"],"names":["React","Component","classNames","AceEditor","keysOf","htmlIdGenerator","keys","EuiI18n","DEFAULT_MODE","DEFAULT_THEME","setOrRemoveAttribute","element","attributeName","value","undefined","removeAttribute","setAttribute","EuiCodeEditor","isHintActive","isEditing","name","aceEditor","textbox","editor","textInput","getElement","tabIndex","addEventListener","onKeydownAce","props","stopEditing","editorHint","focus","event","key","ESCAPE","preventDefault","stopPropagation","completer","state","onEscToExit","setState","onFocus","onBlur","mode","getSession","setMode","isCustomMode","setCustomMode","isReadOnly","id","textareaProps","readOnly","el","document","getElementById","textarea","querySelector","forEach","toString","prevProps","width","height","setOptions","cursorStart","dataTestSubj","theme","commands","rest","classes","promptClasses","filteredCursorStart","options","Object","assign","highlightActiveLine","highlightGutterLine","prompt","idGenerator","hint","startEditing","aceEditorRef","onFocusAce","onBlurAce","$blockScrolling","Infinity","bindKey","win","mac","exec"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\nimport classNames from 'classnames';\nimport AceEditor from 'react-ace';\nimport { keysOf } from '../common';\nimport { htmlIdGenerator, keys } from '../../services';\nimport { EuiI18n } from '../i18n';\nvar DEFAULT_MODE = 'text';\nvar DEFAULT_THEME = 'textmate';\n\nfunction setOrRemoveAttribute(element, attributeName, value) {\n  if (value === null || value === undefined) {\n    element.removeAttribute(attributeName);\n  } else {\n    element.setAttribute(attributeName, value);\n  }\n}\n\nexport class EuiCodeEditor extends Component {\n  static defaultProps = {\n    setOptions: {}\n  };\n  state = {\n    isHintActive: true,\n    isEditing: false,\n    name: htmlIdGenerator()()\n  };\n  idGenerator = htmlIdGenerator();\n  aceEditor = null;\n  editorHint = null;\n  aceEditorRef = aceEditor => {\n    if (aceEditor) {\n      this.aceEditor = aceEditor;\n      const textbox = aceEditor.editor.textInput.getElement();\n      textbox.tabIndex = -1;\n      textbox.addEventListener('keydown', this.onKeydownAce);\n      setOrRemoveAttribute(textbox, 'aria-label', this.props['aria-label']);\n      setOrRemoveAttribute(textbox, 'aria-labelledby', this.props['aria-labelledby']);\n      setOrRemoveAttribute(textbox, 'aria-describedby', this.props['aria-describedby']);\n    }\n  };\n  onEscToExit = () => {\n    this.stopEditing();\n\n    if (this.editorHint) {\n      this.editorHint.focus();\n    }\n  };\n  onKeydownAce = event => {\n    if (event.key === keys.ESCAPE) {\n      event.preventDefault();\n      event.stopPropagation(); // Handles exiting edit mode when `isReadOnly` is set.\n      // Other 'esc' cases handled by `stopEditingOnEsc` command.\n      // Would run after `stopEditingOnEsc`.\n\n      if (this.aceEditor !== null && !this.aceEditor.editor.completer && this.state.isEditing) {\n        this.onEscToExit();\n      }\n    }\n  };\n  onFocusAce = (event, editor) => {\n    this.setState({\n      isEditing: true\n    });\n\n    if (this.props.onFocus) {\n      this.props.onFocus(event, editor);\n    }\n  };\n  onBlurAce = (event, editor) => {\n    this.stopEditing();\n\n    if (this.props.onBlur) {\n      this.props.onBlur(event, editor);\n    }\n  };\n  startEditing = () => {\n    this.setState({\n      isHintActive: false\n    });\n\n    if (this.aceEditor !== null) {\n      this.aceEditor.editor.textInput.focus();\n    }\n  };\n\n  stopEditing() {\n    this.setState({\n      isHintActive: true,\n      isEditing: false\n    });\n  }\n\n  isCustomMode() {\n    return typeof this.props.mode === 'object';\n  }\n\n  setCustomMode() {\n    if (this.aceEditor !== null) {\n      this.aceEditor.editor.getSession().setMode(this.props.mode);\n    }\n  }\n\n  componentDidMount() {\n    if (this.isCustomMode()) {\n      this.setCustomMode();\n    }\n\n    const {\n      isReadOnly,\n      id\n    } = this.props;\n    const textareaProps = {\n      id,\n      readOnly: isReadOnly\n    };\n    const el = document.getElementById(this.state.name);\n\n    if (el) {\n      const textarea = el.querySelector('textarea');\n      if (textarea) keysOf(textareaProps).forEach(key => {\n        if (textareaProps[key]) textarea.setAttribute(`${key}`, textareaProps[key].toString());\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.mode !== prevProps.mode && this.isCustomMode()) {\n      this.setCustomMode();\n    }\n  }\n\n  render() {\n    const {\n      width,\n      height,\n      onBlur,\n      isReadOnly,\n      setOptions,\n      cursorStart,\n      mode = DEFAULT_MODE,\n      'data-test-subj': dataTestSubj = 'codeEditorContainer',\n      theme = DEFAULT_THEME,\n      commands = [],\n      ...rest\n    } = this.props;\n    const classes = classNames('euiCodeEditorWrapper', {\n      'euiCodeEditorWrapper-isEditing': this.state.isEditing\n    });\n    const promptClasses = classNames('euiCodeEditorKeyboardHint', {\n      'euiCodeEditorKeyboardHint-isInactive': !this.state.isHintActive\n    });\n    let filteredCursorStart;\n    const options = { ...setOptions\n    };\n\n    if (isReadOnly) {\n      // Put the cursor at the beginning of the editor, so that it doesn't look like\n      // a prompt to begin typing.\n      filteredCursorStart = -1;\n      Object.assign(options, {\n        readOnly: true,\n        highlightActiveLine: false,\n        highlightGutterLine: false\n      });\n    } else {\n      filteredCursorStart = cursorStart;\n    }\n\n    const prompt = <button className={promptClasses} id={this.idGenerator('codeEditor')} ref={hint => {\n      this.editorHint = hint;\n    }} onClick={this.startEditing} data-test-subj=\"codeEditorHint\">\n        <p className=\"euiText\">\n          {isReadOnly ? <EuiI18n token=\"euiCodeEditor.startInteracting\" default=\"Press Enter to start interacting with the code.\" /> : <EuiI18n token=\"euiCodeEditor.startEditing\" default=\"Press Enter to start editing.\" />}\n        </p>\n\n        <p className=\"euiText\">\n          {isReadOnly ? <EuiI18n token=\"euiCodeEditor.stopInteracting\" default=\"When you're done, press Escape to stop interacting with the code.\" /> : <EuiI18n token=\"euiCodeEditor.stopEditing\" default=\"When you're done, press Escape to stop editing.\" />}\n        </p>\n      </button>;\n    return <div className={classes} style={{\n      width,\n      height\n    }} data-test-subj={dataTestSubj}>\n        {prompt}\n\n        <AceEditor // Setting a default, existing `mode` is necessary to properly initialize the editor\n      // prior to dynamically setting a custom mode (https://github.com/elastic/eui/pull/2616)\n      mode={this.isCustomMode() ? DEFAULT_MODE : mode} // https://github.com/securingsincity/react-ace/pull/771\n      name={this.state.name} theme={theme} ref={this.aceEditorRef} width={width} height={height} onFocus={this.onFocusAce} onBlur={this.onBlurAce} setOptions={options} editorProps={{\n        $blockScrolling: Infinity\n      }} cursorStart={filteredCursorStart} commands={[// Handles exiting edit mode in all cases except `isReadOnly`\n      // Runs before `onKeydownAce`.\n      {\n        name: 'stopEditingOnEsc',\n        bindKey: {\n          win: 'Esc',\n          mac: 'Esc'\n        },\n        exec: this.onEscToExit\n      }, ...commands]} {...rest} />\n      </div>;\n  }\n\n}\nEuiCodeEditor.propTypes = {\n  width: PropTypes.string,\n  height: PropTypes.string,\n  onBlur: PropTypes.any,\n  onFocus: PropTypes.any,\n  isReadOnly: PropTypes.bool,\n  setOptions: PropTypes.any.isRequired,\n  cursorStart: PropTypes.number,\n  \"data-test-subj\": PropTypes.string,\n\n  /**\n     * Select the `brace` theme\n     * The matching theme file must also be imported from `brace` (e.g., `import 'brace/theme/github';`)\n     */\n  theme: PropTypes.any,\n\n  /**\n     * Use string for a built-in mode or object for a custom mode\n     */\n  mode: PropTypes.oneOfType([PropTypes.any.isRequired, PropTypes.any.isRequired]),\n  id: PropTypes.string\n};\n\ntry {\n  EuiCodeEditor.__docgenInfo = {\n    description: '',\n    displayName: 'EuiCodeEditor',\n    methods: [],\n    props: {\n      width: {\n        defaultValue: null,\n        description: '',\n        name: 'width',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      height: {\n        defaultValue: null,\n        description: '',\n        name: 'height',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      onBlur: {\n        defaultValue: null,\n        description: '',\n        name: 'onBlur',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: '(event: any, editor?: AceEditorClass) => void'\n        }\n      },\n      onFocus: {\n        defaultValue: null,\n        description: '',\n        name: 'onFocus',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: '(event: any, editor?: AceEditorClass) => void'\n        }\n      },\n      isReadOnly: {\n        defaultValue: null,\n        description: '',\n        name: 'isReadOnly',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      setOptions: {\n        defaultValue: {\n          value: '{}'\n        },\n        description: '',\n        name: 'setOptions',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'IAceOptions'\n        }\n      },\n      cursorStart: {\n        defaultValue: null,\n        description: '',\n        name: 'cursorStart',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'number'\n        }\n      },\n      'data-test-subj': {\n        defaultValue: null,\n        description: '',\n        name: 'data-test-subj',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      theme: {\n        defaultValue: null,\n        description: 'Select the `brace` theme\\n' + \"The matching theme file must also be imported from `brace` (e.g., `import 'brace/theme/github';`)\",\n        name: 'theme',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      mode: {\n        defaultValue: null,\n        description: 'Use string for a built-in mode or object for a custom mode',\n        name: 'mode',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'string | object'\n        }\n      },\n      id: {\n        defaultValue: null,\n        description: '',\n        name: 'id',\n        parent: {\n          fileName: 'eui/src/components/code_editor/code_editor.tsx',\n          name: 'EuiCodeEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      'aria-label': {\n        defaultValue: null,\n        description: 'Defines a string value that labels the current element.\\n' + '@see aria-labelledby.',\n        name: 'aria-label',\n        parent: {\n          fileName: 'eui/node_modules/@types/react/index.d.ts',\n          name: 'AriaAttributes'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      className: {\n        defaultValue: null,\n        description: '',\n        name: 'className',\n        parent: {\n          fileName: 'eui/node_modules/react-ace/lib/ace.d.ts',\n          name: 'IAceEditorProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      }\n    },\n    extendedInterfaces: ['EuiCodeEditorProps', 'AriaAttributes', 'IAceEditorProps']\n  };\n} catch (e) {}"]}]}