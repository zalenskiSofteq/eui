{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\services\\copy_to_clipboard.ts","dependencies":[{"path":"D:\\work\\eui\\src\\services\\copy_to_clipboard.ts","mtime":1649070093835},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCmZ1bmN0aW9uIGNyZWF0ZUhpZGRlblRleHRFbGVtZW50KHRleHQpIHsKICB2YXIgdGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgdGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0OyAvLyBAdHMtaWdub3JlIC5hbGwgaXMgYSByZWFsIHByb3BlcnR5IC0gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy1jYXNjYWRlLyNhbGwtc2hvcnRoYW5kCgogIHRleHRFbGVtZW50LnN0eWxlLmFsbCA9ICd1bnNldCc7IC8vIHByZXZlbnRzIHNjcm9sbGluZyB0byB0aGUgZW5kIG9mIHRoZSBwYWdlCgogIHRleHRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICB0ZXh0RWxlbWVudC5zdHlsZS50b3AgPSAnMCc7CiAgdGV4dEVsZW1lbnQuc3R5bGUuY2xpcCA9ICdyZWN0KDAsIDAsIDAsIDApJzsgLy8gdXNlZCB0byBwcmVzZXJ2ZSBzcGFjZXMgYW5kIGxpbmUgYnJlYWtzCgogIHRleHRFbGVtZW50LnN0eWxlLndoaXRlU3BhY2UgPSAncHJlJzsgLy8gZG8gbm90IGluaGVyaXQgdXNlci1zZWxlY3QgKGl0IG1heSBiZSBgbm9uZWApCgogIHRleHRFbGVtZW50LnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSAndGV4dCc7IC8vIEB0cy1pZ25vcmUgdGhpcyBvbmUgZG9lc24ndCBhcHBlYXIgaW4gdGhlIFRTIGRlZmluaXRpb25zIGZvciBzb21lIHJlYXNvbgoKICB0ZXh0RWxlbWVudC5zdHlsZS5Nb3pVc2VyU2VsZWN0ID0gJ3RleHQnOyAvLyBAdHMtaWdub3JlIHRoaXMgb25lIGRvZXNuJ3QgYXBwZWFyIGluIHRoZSBUUyBkZWZpbml0aW9ucyBmb3Igc29tZSByZWFzb24KCiAgdGV4dEVsZW1lbnQuc3R5bGUubXNVc2VyU2VsZWN0ID0gJ3RleHQnOwogIHRleHRFbGVtZW50LnN0eWxlLnVzZXJTZWxlY3QgPSAndGV4dCc7CiAgcmV0dXJuIHRleHRFbGVtZW50Owp9CgpleHBvcnQgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQpIHsKICB2YXIgaXNDb3BpZWQgPSB0cnVlOwogIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgdmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICB2YXIgZWxlbWVudFRvQmVDb3BpZWQgPSBjcmVhdGVIaWRkZW5UZXh0RWxlbWVudCh0ZXh0KTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnRUb0JlQ29waWVkKTsKICByYW5nZS5zZWxlY3ROb2RlKGVsZW1lbnRUb0JlQ29waWVkKTsKCiAgaWYgKHNlbGVjdGlvbikgewogICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpOwogICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTsKICB9CgogIGlmICghZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKSkgewogICAgaXNDb3BpZWQgPSBmYWxzZTsKICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGNvcHkgdG8gY2xpcGJvYXJkLicpOwogIH0KCiAgaWYgKHNlbGVjdGlvbikgewogICAgaWYgKHR5cGVvZiBzZWxlY3Rpb24ucmVtb3ZlUmFuZ2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgc2VsZWN0aW9uLnJlbW92ZVJhbmdlKHJhbmdlKTsKICAgIH0gZWxzZSB7CiAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTsKICAgIH0KICB9CgogIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudFRvQmVDb3BpZWQpOwogIHJldHVybiBpc0NvcGllZDsKfQoKdHJ5IHsKICBjb3B5VG9DbGlwYm9hcmQuX19kb2NnZW5JbmZvID0gewogICAgZGVzY3JpcHRpb246ICcnLAogICAgZGlzcGxheU5hbWU6ICdjb3B5VG9DbGlwYm9hcmQnLAogICAgbWV0aG9kczogW10sCiAgICBwcm9wczoge30sCiAgICBleHRlbmRlZEludGVyZmFjZXM6IFsnU3RyaW5nJ10KICB9Owp9IGNhdGNoIChlKSB7fQ=="},{"version":3,"sources":["D:/work/eui/src/services/copy_to_clipboard.ts"],"names":["createHiddenTextElement","text","textElement","document","createElement","textContent","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","copyToClipboard","isCopied","range","createRange","selection","window","getSelection","elementToBeCopied","body","appendChild","selectNode","removeAllRanges","addRange","execCommand","console","warn","removeRange","removeChild"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,uBAAT,CAAiCC,IAAjC,EAAgE;AAC9D,MAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAApB;AACAF,EAAAA,WAAW,CAACG,WAAZ,GAA0BJ,IAA1B,CAF8D,CAG9D;;AACAC,EAAAA,WAAW,CAACI,KAAZ,CAAkBC,GAAlB,GAAwB,OAAxB,CAJ8D,CAK9D;;AACAL,EAAAA,WAAW,CAACI,KAAZ,CAAkBE,QAAlB,GAA6B,OAA7B;AACAN,EAAAA,WAAW,CAACI,KAAZ,CAAkBG,GAAlB,GAAwB,GAAxB;AACAP,EAAAA,WAAW,CAACI,KAAZ,CAAkBI,IAAlB,GAAyB,kBAAzB,CAR8D,CAS9D;;AACAR,EAAAA,WAAW,CAACI,KAAZ,CAAkBK,UAAlB,GAA+B,KAA/B,CAV8D,CAW9D;;AACAT,EAAAA,WAAW,CAACI,KAAZ,CAAkBM,gBAAlB,GAAqC,MAArC,CAZ8D,CAa9D;;AACAV,EAAAA,WAAW,CAACI,KAAZ,CAAkBO,aAAlB,GAAkC,MAAlC,CAd8D,CAe9D;;AACAX,EAAAA,WAAW,CAACI,KAAZ,CAAkBQ,YAAlB,GAAiC,MAAjC;AACAZ,EAAAA,WAAW,CAACI,KAAZ,CAAkBS,UAAlB,GAA+B,MAA/B;AACA,SAAOb,WAAP;AACD;;AAED,OAAO,SAASc,eAAT,CAAyBf,IAAzB,EAAgD;AACrD,MAAIgB,QAAQ,GAAG,IAAf;AACA,MAAMC,KAAK,GAAGf,QAAQ,CAACgB,WAAT,EAAd;AACA,MAAMC,SAAS,GAAGC,MAAM,CAACC,YAAP,EAAlB;AACA,MAAMC,iBAAiB,GAAGvB,uBAAuB,CAACC,IAAD,CAAjD;AAEAE,EAAAA,QAAQ,CAACqB,IAAT,CAAcC,WAAd,CAA0BF,iBAA1B;AACAL,EAAAA,KAAK,CAACQ,UAAN,CAAiBH,iBAAjB;;AACA,MAAIH,SAAJ,EAAe;AACbA,IAAAA,SAAS,CAACO,eAAV;AACAP,IAAAA,SAAS,CAACQ,QAAV,CAAmBV,KAAnB;AACD;;AAED,MAAI,CAACf,QAAQ,CAAC0B,WAAT,CAAqB,MAArB,CAAL,EAAmC;AACjCZ,IAAAA,QAAQ,GAAG,KAAX;AACAa,IAAAA,OAAO,CAACC,IAAR,CAAa,8BAAb;AACD;;AAED,MAAIX,SAAJ,EAAe;AACb,QAAI,OAAOA,SAAS,CAACY,WAAjB,KAAiC,UAArC,EAAiD;AAC/CZ,MAAAA,SAAS,CAACY,WAAV,CAAsBd,KAAtB;AACD,KAFD,MAEO;AACLE,MAAAA,SAAS,CAACO,eAAV;AACD;AACF;;AAEDxB,EAAAA,QAAQ,CAACqB,IAAT,CAAcS,WAAd,CAA0BV,iBAA1B;AAEA,SAAON,QAAP;AACD","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nfunction createHiddenTextElement(text: string): HTMLSpanElement {\n  const textElement = document.createElement('span');\n  textElement.textContent = text;\n  // @ts-ignore .all is a real property - https://drafts.csswg.org/css-cascade/#all-shorthand\n  textElement.style.all = 'unset';\n  // prevents scrolling to the end of the page\n  textElement.style.position = 'fixed';\n  textElement.style.top = '0';\n  textElement.style.clip = 'rect(0, 0, 0, 0)';\n  // used to preserve spaces and line breaks\n  textElement.style.whiteSpace = 'pre';\n  // do not inherit user-select (it may be `none`)\n  textElement.style.webkitUserSelect = 'text';\n  // @ts-ignore this one doesn't appear in the TS definitions for some reason\n  textElement.style.MozUserSelect = 'text';\n  // @ts-ignore this one doesn't appear in the TS definitions for some reason\n  textElement.style.msUserSelect = 'text';\n  textElement.style.userSelect = 'text';\n  return textElement;\n}\n\nexport function copyToClipboard(text: string): boolean {\n  let isCopied = true;\n  const range = document.createRange();\n  const selection = window.getSelection();\n  const elementToBeCopied = createHiddenTextElement(text);\n\n  document.body.appendChild(elementToBeCopied);\n  range.selectNode(elementToBeCopied);\n  if (selection) {\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  if (!document.execCommand('copy')) {\n    isCopied = false;\n    console.warn('Unable to copy to clipboard.');\n  }\n\n  if (selection) {\n    if (typeof selection.removeRange === 'function') {\n      selection.removeRange(range);\n    } else {\n      selection.removeAllRanges();\n    }\n  }\n\n  document.body.removeChild(elementToBeCopied);\n\n  return isCopied;\n}\n"]}]}