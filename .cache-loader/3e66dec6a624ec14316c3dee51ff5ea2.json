{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\inner_text\\render_to_text.tsx","dependencies":[{"path":"D:\\work\\eui\\src\\components\\inner_text\\render_to_text.tsx","mtime":1649070093677},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgcmVuZGVyLCB1bm1vdW50Q29tcG9uZW50QXROb2RlIH0gZnJvbSAncmVhY3QtZG9tJzsKaW1wb3J0IHsgdXNlSW5uZXJUZXh0IH0gZnJvbSAnLi9pbm5lcl90ZXh0JzsKZXhwb3J0IGZ1bmN0aW9uIHVzZVJlbmRlclRvVGV4dChub2RlKSB7CiAgdmFyIHBsYWNlaG9sZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKCiAgdmFyIF91c2VJbm5lclRleHQgPSB1c2VJbm5lclRleHQocGxhY2Vob2xkZXIpLAogICAgICBfdXNlSW5uZXJUZXh0MiA9IF9zbGljZWRUb0FycmF5KF91c2VJbm5lclRleHQsIDIpLAogICAgICByZWYgPSBfdXNlSW5uZXJUZXh0MlswXSwKICAgICAgdGV4dCA9IF91c2VJbm5lclRleHQyWzFdOwoKICB2YXIgaG9zdE5vZGUgPSB1c2VSZWYobnVsbCk7CgogIHZhciBvblVubW91bnQgPSBmdW5jdGlvbiBvblVubW91bnQoKSB7CiAgICBpZiAoaG9zdE5vZGUuY3VycmVudCkgewogICAgICB1bm1vdW50Q29tcG9uZW50QXROb2RlKGhvc3ROb2RlLmN1cnJlbnQpOwogICAgICBob3N0Tm9kZS5jdXJyZW50ID0gbnVsbDsKICAgIH0KICB9OwoKICB2YXIgc2V0UmVmID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKG5vZGUpIHsKICAgIGlmIChob3N0Tm9kZS5jdXJyZW50KSB7CiAgICAgIHJlZihub2RlKTsKICAgIH0KICB9LCBbcmVmXSk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGhvc3ROb2RlLmN1cnJlbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICByZW5kZXIoIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIHJlZjogc2V0UmVmCiAgICB9LCBub2RlKSwgaG9zdE5vZGUuY3VycmVudCk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBvblVubW91bnQoKTsKICAgIH07CiAgfSwgW25vZGUsIHNldFJlZl0pOwogIHJldHVybiB0ZXh0IHx8IHBsYWNlaG9sZGVyOwp9"},{"version":3,"sources":["D:/work/eui/src/components/inner_text/render_to_text.tsx"],"names":["React","useCallback","useEffect","useRef","render","unmountComponentAtNode","useInnerText","useRenderToText","node","placeholder","ref","text","hostNode","onUnmount","current","setRef","document","createDocumentFragment"],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,IAA2BC,WAA3B,EAAwCC,SAAxC,EAAmDC,MAAnD,QAAiE,OAAjE;AACA,SAASC,MAAT,EAAiBC,sBAAjB,QAA+C,WAA/C;AACA,SAASC,YAAT,QAA6B,cAA7B;AAEA,OAAO,SAASC,eAAT,CAAyBC,IAAzB,EAAoE;AAAA,MAA1BC,WAA0B,uEAAZ,EAAY;;AAAA,sBACrDH,YAAY,CAACG,WAAD,CADyC;AAAA;AAAA,MAClEC,GADkE;AAAA,MAC7DC,IAD6D;;AAEzE,MAAMC,QAAQ,GAAGT,MAAM,CAAiB,IAAjB,CAAvB;;AAEA,MAAMU,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,QAAID,QAAQ,CAACE,OAAb,EAAsB;AACpBT,MAAAA,sBAAsB,CAACO,QAAQ,CAACE,OAAV,CAAtB;AACAF,MAAAA,QAAQ,CAACE,OAAT,GAAmB,IAAnB;AACD;AACF,GALD;;AAOA,MAAMC,MAAM,GAAGd,WAAW,CACxB,UAACO,IAAD,EAA0B;AACxB,QAAII,QAAQ,CAACE,OAAb,EAAsB;AACpBJ,MAAAA,GAAG,CAACF,IAAD,CAAH;AACD;AACF,GALuB,EAMxB,CAACE,GAAD,CANwB,CAA1B;AASAR,EAAAA,SAAS,CAAC,YAAM;AACdU,IAAAA,QAAQ,CAACE,OAAT,GAAoBE,QAAQ,CAACC,sBAAT,EAApB;AACAb,IAAAA,MAAM,eAAC;AAAK,MAAA,GAAG,EAAEW;AAAV,OAAmBP,IAAnB,CAAD,EAAiCI,QAAQ,CAACE,OAA1C,CAAN;AACA,WAAO,YAAM;AACXD,MAAAA,SAAS;AACV,KAFD;AAGD,GANQ,EAMN,CAACL,IAAD,EAAOO,MAAP,CANM,CAAT;AAQA,SAAOJ,IAAI,IAAIF,WAAf;AACD","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode, useCallback, useEffect, useRef } from 'react';\nimport { render, unmountComponentAtNode } from 'react-dom';\nimport { useInnerText } from './inner_text';\n\nexport function useRenderToText(node: ReactNode, placeholder = ''): string {\n  const [ref, text] = useInnerText(placeholder);\n  const hostNode = useRef<Element | null>(null);\n\n  const onUnmount = () => {\n    if (hostNode.current) {\n      unmountComponentAtNode(hostNode.current);\n      hostNode.current = null;\n    }\n  };\n\n  const setRef = useCallback(\n    (node: Element | null) => {\n      if (hostNode.current) {\n        ref(node);\n      }\n    },\n    [ref]\n  );\n\n  useEffect(() => {\n    hostNode.current = (document.createDocumentFragment() as unknown) as Element;\n    render(<div ref={setRef}>{node}</div>, hostNode.current);\n    return () => {\n      onUnmount();\n    };\n  }, [node, setRef]);\n\n  return text || placeholder;\n}\n"]}]}