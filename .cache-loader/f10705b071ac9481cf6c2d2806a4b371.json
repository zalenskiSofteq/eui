{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\form\\range\\dual_range.tsx","dependencies":[{"path":"D:\\work\\eui\\src\\components\\form\\range\\dual_range.tsx","mtime":1649070093440},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1wcmVjaXNpb24iOwoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICJwcm9wLXR5cGVzIjsKaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCB7IGtleXMgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcyc7CmltcG9ydCB7IGlzV2l0aGluUmFuZ2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9udW1iZXInOwppbXBvcnQgeyBFdWlJbnB1dFBvcG92ZXIgfSBmcm9tICcuLi8uLi9wb3BvdmVyJzsKaW1wb3J0IHsgRXVpRm9ybUNvbnRyb2xMYXlvdXREZWxpbWl0ZWQgfSBmcm9tICcuLi9mb3JtX2NvbnRyb2xfbGF5b3V0JzsKaW1wb3J0IHsgaHRtbElkR2VuZXJhdG9yIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvYWNjZXNzaWJpbGl0eSc7CmltcG9ydCB7IEV1aVJhbmdlRHJhZ2dhYmxlIH0gZnJvbSAnLi9yYW5nZV9kcmFnZ2FibGUnOwppbXBvcnQgeyBFdWlSYW5nZUhpZ2hsaWdodCB9IGZyb20gJy4vcmFuZ2VfaGlnaGxpZ2h0JzsKaW1wb3J0IHsgRXVpUmFuZ2VJbnB1dCB9IGZyb20gJy4vcmFuZ2VfaW5wdXQnOwppbXBvcnQgeyBFdWlSYW5nZUxhYmVsIH0gZnJvbSAnLi9yYW5nZV9sYWJlbCc7CmltcG9ydCB7IEV1aVJhbmdlU2xpZGVyIH0gZnJvbSAnLi9yYW5nZV9zbGlkZXInOwppbXBvcnQgeyBFdWlSYW5nZVRodW1iIH0gZnJvbSAnLi9yYW5nZV90aHVtYic7CmltcG9ydCB7IEV1aVJhbmdlVHJhY2sgfSBmcm9tICcuL3JhbmdlX3RyYWNrJzsKaW1wb3J0IHsgRXVpUmFuZ2VXcmFwcGVyIH0gZnJvbSAnLi9yYW5nZV93cmFwcGVyJzsKaW1wb3J0IHsgY2FsY3VsYXRlVGh1bWJQb3NpdGlvbiB9IGZyb20gJy4vdXRpbHMnOwpleHBvcnQgdmFyIEV1aUR1YWxSYW5nZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhFdWlEdWFsUmFuZ2UsIF9Db21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEV1aUR1YWxSYW5nZSk7CgogIGZ1bmN0aW9uIEV1aUR1YWxSYW5nZSgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXVpRHVhbFJhbmdlKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsLmFwcGx5KF9zdXBlciwgW3RoaXNdLmNvbmNhdChhcmdzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIGlkOiBfdGhpcy5wcm9wcy5pZCB8fCBodG1sSWRHZW5lcmF0b3IoKSgpLAogICAgICBoYXNGb2N1czogZmFsc2UsCiAgICAgIHJhbmdlU2xpZGVyUmVmQXZhaWxhYmxlOiBmYWxzZSwKICAgICAgaXNQb3BvdmVyT3BlbjogZmFsc2UsCiAgICAgIHJhbmdlV2lkdGg6IHVuZGVmaW5lZCwKICAgICAgaXNWaXNpYmxlOiB0cnVlIC8vIHVzZWQgdG8gdHJpZ2dlciBhIHJlcmVuZGVyIGlmIGluaXRpYWwgZWxlbWVudCB3aWR0aCBpcyAwCgogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicHJldmVudFBvcG92ZXJDbG9zZSIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyYW5nZVNsaWRlclJlZiIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVJhbmdlU2xpZGVyUmVmVXBkYXRlIiwgZnVuY3Rpb24gKHJlZikgewogICAgICBfdGhpcy5yYW5nZVNsaWRlclJlZiA9IHJlZjsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICByYW5nZVNsaWRlclJlZkF2YWlsYWJsZTogISFyZWYsCiAgICAgICAgcmFuZ2VXaWR0aDogISFyZWYgPyByZWYuY2xpZW50V2lkdGggOiBudWxsCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibGVmdFBvc2l0aW9uIiwgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZHJhZ0FjYyIsIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9kZXRlcm1pbmVJbnZhbGlkVGh1bWJNb3ZlbWVudCIsIGZ1bmN0aW9uIChuZXdWYWwsIGxvd2VyLCB1cHBlciwgZSkgewogICAgICAvLyBJZiB0aGUgdmFsdWVzIGFyZSBpbnZhbGlkLCBmaW5kIHdoZXRoZXIgdGhlIG5ldyB2YWx1ZSBpcyBpbiB0aGUgdXBwZXIKICAgICAgLy8gb3IgbG93ZXIgaGFsZiBhbmQgbW92ZSB0aGUgYXBwcm9wcmlhdGUgaGFuZGxlIHRvIHRoZSBuZXcgdmFsdWUsCiAgICAgIC8vIHdoaWxlIHRoZSBvdGhlciBoYW5kbGUgZ2V0cyBtb3ZlZCB0byB0aGUgb3Bwb3NpdGUgYm91bmQgKGlmIGludmFsaWQpCiAgICAgIHZhciBsb3dlckhhbGYgPSBNYXRoLmFicyhfdGhpcy5wcm9wcy5tYXggLSBfdGhpcy5wcm9wcy5taW4pIC8gMiArIF90aGlzLnByb3BzLm1pbjsKCiAgICAgIHZhciBuZXdWYWxJc0xvdyA9IGlzV2l0aGluUmFuZ2UoX3RoaXMucHJvcHMubWluLCBsb3dlckhhbGYsIG5ld1ZhbCk7CgogICAgICBpZiAobmV3VmFsSXNMb3cpIHsKICAgICAgICBsb3dlciA9IG5ld1ZhbDsKICAgICAgICB1cHBlciA9ICFfdGhpcy51cHBlclZhbHVlSXNWYWxpZCA/IF90aGlzLnByb3BzLm1heCA6IHVwcGVyOwogICAgICB9IGVsc2UgewogICAgICAgIGxvd2VyID0gIV90aGlzLmxvd2VyVmFsdWVJc1ZhbGlkID8gX3RoaXMucHJvcHMubWluIDogbG93ZXI7CiAgICAgICAgdXBwZXIgPSBuZXdWYWw7CiAgICAgIH0KCiAgICAgIF90aGlzLl9oYW5kbGVPbkNoYW5nZShsb3dlciwgdXBwZXIsIGUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2RldGVybWluZVZhbGlkVGh1bWJNb3ZlbWVudCIsIGZ1bmN0aW9uIChuZXdWYWwsIGxvd2VyLCB1cHBlciwgZSkgewogICAgICAvLyBMb3dlciB0aHVtYiB0YXJnZXRlZCBvciByaWdodC1tb3Zpbmcgc3dhcCBoYXMgb2NjdXJyZWQKICAgICAgaWYgKE1hdGguYWJzKGxvd2VyIC0gbmV3VmFsKSA8IE1hdGguYWJzKHVwcGVyIC0gbmV3VmFsKSkgewogICAgICAgIGxvd2VyID0gbmV3VmFsOwogICAgICB9IC8vIFVwcGVyIHRodW1iIHRhcmdldGVkIG9yIGxlZnQtbW92aW5nIHN3YXAgaGFzIG9jY3VycmVkCiAgICAgIGVsc2UgewogICAgICAgICAgdXBwZXIgPSBuZXdWYWw7CiAgICAgICAgfQoKICAgICAgX3RoaXMuX2hhbmRsZU9uQ2hhbmdlKGxvd2VyLCB1cHBlciwgZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfZGV0ZXJtaW5lVGh1bWJNb3ZlbWVudCIsIGZ1bmN0aW9uIChuZXdWYWwsIGUpIHsKICAgICAgLy8gRGV0ZXJtaW5lIHRodW1iIG1vdmVtZW50IGJhc2VkIG9uIHNsaWRlciBpbnRlcmFjdGlvbgogICAgICBpZiAoIV90aGlzLmlzVmFsaWQpIHsKICAgICAgICAvLyBOb24tc3RhbmRhcmQgcG9zaXRpb25pbmcgZm9sbG93cwogICAgICAgIF90aGlzLl9kZXRlcm1pbmVJbnZhbGlkVGh1bWJNb3ZlbWVudChuZXdWYWwsIF90aGlzLmxvd2VyVmFsdWUsIF90aGlzLnVwcGVyVmFsdWUsIGUpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFN0YW5kYXJkIHBvc2l0aW9uaW5nIGJhc2VkIG9uIGNsaWNrIGV2ZW50IHByb3hpbWl0eSB0byB0aHVtYiBsb2NhdGlvbnMKICAgICAgICBfdGhpcy5fZGV0ZXJtaW5lVmFsaWRUaHVtYk1vdmVtZW50KG5ld1ZhbCwgX3RoaXMubG93ZXJWYWx1ZSwgX3RoaXMudXBwZXJWYWx1ZSwgZSk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9oYW5kbGVPbkNoYW5nZSIsIGZ1bmN0aW9uIChsb3dlciwgdXBwZXIsIGUpIHsKICAgICAgdmFyIGlzVmFsaWQgPSBpc1dpdGhpblJhbmdlKF90aGlzLnByb3BzLm1pbiwgdXBwZXIsIGxvd2VyKSAmJiBpc1dpdGhpblJhbmdlKGxvd2VyLCBfdGhpcy5wcm9wcy5tYXgsIHVwcGVyKTsKCiAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKFtsb3dlciwgdXBwZXJdLCBpc1ZhbGlkLCBlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVNsaWRlckNoYW5nZSIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzLl9kZXRlcm1pbmVUaHVtYk1vdmVtZW50KE51bWJlcihlLmN1cnJlbnRUYXJnZXQudmFsdWUpLCBlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9yZXNldFRvUmFuZ2VFbmRzIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgLy8gQXJiaXRyYXJ5IGRlY2lzaW9uIHRvIHBhc3MgYG1pbmAgaW5zdGVhZCBvZiBgbWF4YC4gUmVzdWx0IGlzIHRoZSBzYW1lLgogICAgICBfdGhpcy5fZGV0ZXJtaW5lSW52YWxpZFRodW1iTW92ZW1lbnQoX3RoaXMucHJvcHMubWluLCBfdGhpcy5sb3dlclZhbHVlLCBfdGhpcy51cHBlclZhbHVlLCBlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9pc0RpcmVjdGlvbmFsS2V5UHJlc3MiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgcmV0dXJuIFtrZXlzLkFSUk9XX1VQLCBrZXlzLkFSUk9XX1JJR0hULCBrZXlzLkFSUk9XX0RPV04sIGtleXMuQVJST1dfTEVGVF0uaW5kZXhPZihldmVudC5rZXkpID4gLTE7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVJbnB1dEtleURvd24iLCBmdW5jdGlvbiAoZSkgewogICAgICAvLyBSZWxldmFudCBvbmx5IHdoZW4gaW5pdGlhbCB2YWx1ZXMgYXJlIGJvdGggYCcnYCBhbmQgYHNob3dJbnB1dGAgaXMgc2V0CiAgICAgIGlmIChfdGhpcy5faXNEaXJlY3Rpb25hbEtleVByZXNzKGUpICYmICFfdGhpcy5pc1ZhbGlkKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBfdGhpcy5fcmVzZXRUb1JhbmdlRW5kcyhlKTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlTG93ZXJJbnB1dENoYW5nZSIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzLl9oYW5kbGVPbkNoYW5nZShlLnRhcmdldC52YWx1ZSwgX3RoaXMudXBwZXJWYWx1ZSwgZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVVcHBlcklucHV0Q2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgX3RoaXMuX2hhbmRsZU9uQ2hhbmdlKF90aGlzLmxvd2VyVmFsdWUsIGUudGFyZ2V0LnZhbHVlLCBlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9oYW5kbGVLZXlEb3duIiwgZnVuY3Rpb24gKHZhbHVlLCBldmVudCkgewogICAgICB2YXIgbmV3VmFsID0gTnVtYmVyKHZhbHVlKTsKICAgICAgdmFyIHN0ZXBSZW1haW5kZXIgPSAwOwogICAgICB2YXIgc3RlcCA9IF90aGlzLnByb3BzLnN0ZXAgfHwgMTsKCiAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7CiAgICAgICAgY2FzZSBrZXlzLkFSUk9XX1VQOgogICAgICAgIGNhc2Uga2V5cy5BUlJPV19SSUdIVDoKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBuZXdWYWwgKz0gc3RlcDsKICAgICAgICAgIHN0ZXBSZW1haW5kZXIgPSAobmV3VmFsIC0gX3RoaXMucHJvcHMubWluKSAlIHN0ZXA7CgogICAgICAgICAgaWYgKHN0ZXAgIT09IDEgJiYgc3RlcFJlbWFpbmRlciA+IDApIHsKICAgICAgICAgICAgbmV3VmFsID0gbmV3VmFsIC0gc3RlcFJlbWFpbmRlcjsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBrZXlzLkFSUk9XX0RPV046CiAgICAgICAgY2FzZSBrZXlzLkFSUk9XX0xFRlQ6CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgbmV3VmFsIC09IHN0ZXA7CiAgICAgICAgICBzdGVwUmVtYWluZGVyID0gKG5ld1ZhbCAtIF90aGlzLnByb3BzLm1pbikgJSBzdGVwOwoKICAgICAgICAgIGlmIChzdGVwICE9PSAxICYmIHN0ZXBSZW1haW5kZXIgPiAwKSB7CiAgICAgICAgICAgIG5ld1ZhbCA9IG5ld1ZhbCArIChzdGVwIC0gc3RlcFJlbWFpbmRlcik7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXdWYWw7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVMb3dlcktleURvd24iLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGxvd2VyID0gX3RoaXMubG93ZXJWYWx1ZTsKCiAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7CiAgICAgICAgY2FzZSBrZXlzLlRBQjoKICAgICAgICAgIHJldHVybjsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGlmICghX3RoaXMubG93ZXJWYWx1ZUlzVmFsaWQpIHsKICAgICAgICAgICAgLy8gUmVsZXZhbnQgb25seSB3aGVuIGluaXRpYWwgdmFsdWUgaXMgYCcnYCBhbmQgYHNob3dJbnB1dGAgaXMgbm90IHNldAogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgX3RoaXMuX3Jlc2V0VG9SYW5nZUVuZHMoZXZlbnQpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGxvd2VyID0gX3RoaXMuX2hhbmRsZUtleURvd24obG93ZXIsIGV2ZW50KTsKICAgICAgfQoKICAgICAgaWYgKGxvd2VyID49IF90aGlzLnVwcGVyVmFsdWUgfHwgbG93ZXIgPCBfdGhpcy5wcm9wcy5taW4pIHJldHVybjsKCiAgICAgIF90aGlzLl9oYW5kbGVPbkNoYW5nZShsb3dlciwgX3RoaXMudXBwZXJWYWx1ZSwgZXZlbnQpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlVXBwZXJLZXlEb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciB1cHBlciA9IF90aGlzLnVwcGVyVmFsdWU7CgogICAgICBzd2l0Y2ggKGV2ZW50LmtleSkgewogICAgICAgIGNhc2Uga2V5cy5UQUI6CiAgICAgICAgICByZXR1cm47CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBpZiAoIV90aGlzLnVwcGVyVmFsdWVJc1ZhbGlkKSB7CiAgICAgICAgICAgIC8vIFJlbGV2YW50IG9ubHkgd2hlbiBpbml0aWFsIHZhbHVlIGlzIGAnJ2AgYW5kIGBzaG93SW5wdXRgIGlzIG5vdCBzZXQKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgIF90aGlzLl9yZXNldFRvUmFuZ2VFbmRzKGV2ZW50KTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB1cHBlciA9IF90aGlzLl9oYW5kbGVLZXlEb3duKHVwcGVyLCBldmVudCk7CiAgICAgIH0KCiAgICAgIGlmICh1cHBlciA8PSBfdGhpcy5sb3dlclZhbHVlIHx8IHVwcGVyID4gX3RoaXMucHJvcHMubWF4KSByZXR1cm47CgogICAgICBfdGhpcy5faGFuZGxlT25DaGFuZ2UoX3RoaXMubG93ZXJWYWx1ZSwgdXBwZXIsIGV2ZW50KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZURyYWdnYWJsZUtleURvd24iLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGxvd2VyID0gX3RoaXMubG93ZXJWYWx1ZTsKICAgICAgdmFyIHVwcGVyID0gX3RoaXMudXBwZXJWYWx1ZTsKCiAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7CiAgICAgICAgY2FzZSBrZXlzLlRBQjoKICAgICAgICAgIHJldHVybjsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGxvd2VyID0gX3RoaXMuX2hhbmRsZUtleURvd24obG93ZXIsIGV2ZW50KTsKICAgICAgICAgIHVwcGVyID0gX3RoaXMuX2hhbmRsZUtleURvd24odXBwZXIsIGV2ZW50KTsKICAgICAgfQoKICAgICAgaWYgKGxvd2VyID49IF90aGlzLnVwcGVyVmFsdWUgfHwgbG93ZXIgPCBfdGhpcy5wcm9wcy5taW4pIHJldHVybjsKICAgICAgaWYgKHVwcGVyIDw9IF90aGlzLmxvd2VyVmFsdWUgfHwgdXBwZXIgPiBfdGhpcy5wcm9wcy5tYXgpIHJldHVybjsKCiAgICAgIF90aGlzLl9oYW5kbGVPbkNoYW5nZShsb3dlciwgdXBwZXIsIGV2ZW50KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNhbGN1bGF0ZVRodW1iUG9zaXRpb25TdHlsZSIsIGZ1bmN0aW9uICh2YWx1ZSwgd2lkdGgpIHsKICAgICAgdmFyIHRyYWNrV2lkdGggPSBfdGhpcy5wcm9wcy5zaG93SW5wdXQgPT09ICdpbnB1dFdpdGhQb3BvdmVyJyAmJiAhIXdpZHRoID8gd2lkdGggOiBfdGhpcy5yYW5nZVNsaWRlclJlZi5jbGllbnRXaWR0aDsKICAgICAgdmFyIHBvc2l0aW9uID0gY2FsY3VsYXRlVGh1bWJQb3NpdGlvbih2YWx1ZSwgX3RoaXMucHJvcHMubWluLCBfdGhpcy5wcm9wcy5tYXgsIHRyYWNrV2lkdGgpOwogICAgICByZXR1cm4gewogICAgICAgIGxlZnQ6ICIiLmNvbmNhdChwb3NpdGlvbiwgIiUiKQogICAgICB9OwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidG9nZ2xlSGFzRm9jdXMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzaG91bGRGb2N1c2VkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAhX3RoaXMuc3RhdGUuaGFzRm9jdXM7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaGFzRm9jdXM6IHNob3VsZEZvY3VzZWQKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblRodW1iRm9jdXMiLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoX3RoaXMucHJvcHMub25Gb2N1cykgewogICAgICAgIF90aGlzLnByb3BzLm9uRm9jdXMoZSk7CiAgICAgIH0KCiAgICAgIF90aGlzLnRvZ2dsZUhhc0ZvY3VzKHRydWUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25UaHVtYkJsdXIiLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoX3RoaXMucHJvcHMub25CbHVyKSB7CiAgICAgICAgX3RoaXMucHJvcHMub25CbHVyKGUpOwogICAgICB9CgogICAgICBfdGhpcy50b2dnbGVIYXNGb2N1cyhmYWxzZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbklucHV0Rm9jdXMiLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoX3RoaXMucHJvcHMub25Gb2N1cykgewogICAgICAgIF90aGlzLnByb3BzLm9uRm9jdXMoZSk7CiAgICAgIH0KCiAgICAgIF90aGlzLnByZXZlbnRQb3BvdmVyQ2xvc2UgPSB0cnVlOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzUG9wb3Zlck9wZW46IHRydWUKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbklucHV0Qmx1ciIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBTYWZhcmkgZG9lcyBub3QgcmVjb2duaXplIGFueSBmb2N1cy1yZWxhdGVkIGV2ZW50aW5nIGZvciBpbnB1dFt0eXBlPXJhbmdlXQogICAgICAgIC8vIG1ha2luZyBpdCBpbXBvc3NpYmxlIHRvIGNhcHR1cmUgaXRzIHN0YXRlIHVzaW5nIGFjdGl2ZS9mb2N1cy9yZWxhdGVkVGFyZ2V0CiAgICAgICAgLy8gSW5zdGVhZCwgYSBwcmV2ZW50aW9uIGZsYWcgaXMgc2V0IG9uIG1vdXNlZG93biwgd2l0aCBhIHdhaXRpbmcgcGVyaW9kIGhlcmUuCiAgICAgICAgLy8gTW91c2Vkb3duIGlzIHZpYWJsZSBiZWNhdXNlIGluIHRoZSBwb3BvdmVyIGNhc2UsIGl0IGlzIGluYWNjZXNzaWJsZSB2aWEga2V5Ym9hcmQgKGludGVudGlvbmFsbHkpCiAgICAgICAgaWYgKF90aGlzLnByZXZlbnRQb3BvdmVyQ2xvc2UpIHsKICAgICAgICAgIF90aGlzLnByZXZlbnRQb3BvdmVyQ2xvc2UgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkJsdXIpIHsKICAgICAgICAgIF90aGlzLnByb3BzLm9uQmx1cihlKTsKICAgICAgICB9CgogICAgICAgIF90aGlzLmNsb3NlUG9wb3ZlcigpOwogICAgICB9LCAyMDApOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2xvc2VQb3BvdmVyIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5wcmV2ZW50UG9wb3ZlckNsb3NlID0gZmFsc2U7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNQb3BvdmVyT3BlbjogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblJlc2l6ZSIsIGZ1bmN0aW9uICh3aWR0aCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgcmFuZ2VXaWR0aDogd2lkdGgKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXROZWFyZXN0U3RlcCIsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgc3RlcHMgPSAoX3RoaXMucHJvcHMubWF4IC0gX3RoaXMucHJvcHMubWluKSAvIF90aGlzLnByb3BzLnN0ZXA7CiAgICAgIHZhciBhcHByb3ggPSBNYXRoLnJvdW5kKCh2YWx1ZSAtIF90aGlzLnByb3BzLm1pbikgKiBzdGVwcyAvIChfdGhpcy5wcm9wcy5tYXggLSBfdGhpcy5wcm9wcy5taW4pKSAvIHN0ZXBzOwogICAgICB2YXIgYm91bmQgPSBNYXRoLm1pbihNYXRoLm1heChhcHByb3gsIDApLCAxKTsKICAgICAgdmFyIG5lYXJlc3QgPSBib3VuZCAqIChfdGhpcy5wcm9wcy5tYXggLSBfdGhpcy5wcm9wcy5taW4pICsgX3RoaXMucHJvcHMubWluOwogICAgICByZXR1cm4gTnVtYmVyKG5lYXJlc3QudG9QcmVjaXNpb24oMTApKSAqIDEwMCAvIDEwMDsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZURyYWciLCBmdW5jdGlvbiAoeCwgaXNGaXJzdEludGVyYWN0aW9uKSB7CiAgICAgIGlmIChpc0ZpcnN0SW50ZXJhY3Rpb24pIHsKICAgICAgICBfdGhpcy5sZWZ0UG9zaXRpb24gPSB4OwogICAgICAgIF90aGlzLmRyYWdBY2MgPSAwOwogICAgICB9CgogICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIG1pbiA9IF90aGlzJHByb3BzLm1pbiwKICAgICAgICAgIG1heCA9IF90aGlzJHByb3BzLm1heDsKICAgICAgdmFyIGxvd2VyVmFsdWUgPSBOdW1iZXIoX3RoaXMubG93ZXJWYWx1ZSk7CiAgICAgIHZhciB1cHBlclZhbHVlID0gTnVtYmVyKF90aGlzLnVwcGVyVmFsdWUpOwogICAgICB2YXIgZGVsdGEgPSBfdGhpcy5sZWZ0UG9zaXRpb24gLSB4OwogICAgICBfdGhpcy5sZWZ0UG9zaXRpb24gPSB4OwogICAgICBfdGhpcy5kcmFnQWNjID0gX3RoaXMuZHJhZ0FjYyArIGRlbHRhOwogICAgICB2YXIgcGVyY2VudGFnZU9mQXJlYSA9IF90aGlzLmRyYWdBY2MgLyBfdGhpcy5yYW5nZVNsaWRlclJlZi5jbGllbnRXaWR0aDsKICAgICAgdmFyIHBlcmNlbnRhZ2VPZlJhbmdlID0gcGVyY2VudGFnZU9mQXJlYSAqIChtYXggLSBtaW4pOwoKICAgICAgdmFyIG5ld0xvd2VyID0gX3RoaXMuZ2V0TmVhcmVzdFN0ZXAobG93ZXJWYWx1ZSAtIHBlcmNlbnRhZ2VPZlJhbmdlKTsKCiAgICAgIHZhciBuZXdVcHBlciA9IF90aGlzLmdldE5lYXJlc3RTdGVwKHVwcGVyVmFsdWUgLSBwZXJjZW50YWdlT2ZSYW5nZSk7CgogICAgICB2YXIgbm9Nb3ZlbWVudCA9IG5ld0xvd2VyID09PSBsb3dlclZhbHVlOwogICAgICB2YXIgaXNNaW4gPSBtaW4gPT09IGxvd2VyVmFsdWUgJiYgbWluID09PSBuZXdMb3dlcjsKICAgICAgdmFyIGlzTWF4ID0gbWF4ID09PSB1cHBlclZhbHVlICYmIG1heCA9PT0gbmV3VXBwZXI7CiAgICAgIHZhciBpc091dE9mUmFuZ2UgPSBuZXdMb3dlciA8IG1pbiB8fCBuZXdVcHBlciA+IG1heDsKICAgICAgaWYgKG5vTW92ZW1lbnQgfHwgaXNNaW4gfHwgaXNNYXggfHwgaXNPdXRPZlJhbmdlKSByZXR1cm47CgogICAgICBfdGhpcy5faGFuZGxlT25DaGFuZ2UobmV3TG93ZXIsIG5ld1VwcGVyKTsKCiAgICAgIF90aGlzLmRyYWdBY2MgPSAwOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEV1aUR1YWxSYW5nZSwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMucmFuZ2VTbGlkZXJSZWYgJiYgdGhpcy5yYW5nZVNsaWRlclJlZi5jbGllbnRXaWR0aCA9PT0gMCkgewogICAgICAgIC8vIFNhZmUgdG8gY2FsbCBgc2V0U3RhdGVgIGluc2lkZSBjb25kaXRpb25hbAogICAgICAgIC8vIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9yZWFjdC1jb21wb25lbnQuaHRtbCNjb21wb25lbnRkaWRtb3VudAogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9uby1kaWQtbW91bnQtc2V0LXN0YXRlCiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBpc1Zpc2libGU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzJHJhbmdlU2xpZGVyUmVmOwoKICAgICAgaWYgKCgoX3RoaXMkcmFuZ2VTbGlkZXJSZWYgPSB0aGlzLnJhbmdlU2xpZGVyUmVmKSA9PT0gbnVsbCB8fCBfdGhpcyRyYW5nZVNsaWRlclJlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcmFuZ2VTbGlkZXJSZWYuY2xpZW50V2lkdGgpICYmICF0aGlzLnN0YXRlLmlzVmlzaWJsZSkgewogICAgICAgIC8vIFNhZmUgdG8gY2FsbCBgc2V0U3RhdGVgIGluc2lkZSBjb25kaXRpb25hbAogICAgICAgIC8vIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9yZWFjdC1jb21wb25lbnQuaHRtbCNjb21wb25lbnRkaWR1cGRhdGUKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgIHJlYWN0L25vLWRpZC11cGRhdGUtc2V0LXN0YXRlCiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBpc1Zpc2libGU6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHMyLmNsYXNzTmFtZSwKICAgICAgICAgIGNvbXByZXNzZWQgPSBfdGhpcyRwcm9wczIuY29tcHJlc3NlZCwKICAgICAgICAgIGRpc2FibGVkID0gX3RoaXMkcHJvcHMyLmRpc2FibGVkLAogICAgICAgICAgZnVsbFdpZHRoID0gX3RoaXMkcHJvcHMyLmZ1bGxXaWR0aCwKICAgICAgICAgIHJlYWRPbmx5ID0gX3RoaXMkcHJvcHMyLnJlYWRPbmx5LAogICAgICAgICAgcHJvcHNJZCA9IF90aGlzJHByb3BzMi5pZCwKICAgICAgICAgIG1heCA9IF90aGlzJHByb3BzMi5tYXgsCiAgICAgICAgICBtaW4gPSBfdGhpcyRwcm9wczIubWluLAogICAgICAgICAgbmFtZSA9IF90aGlzJHByb3BzMi5uYW1lLAogICAgICAgICAgc3RlcCA9IF90aGlzJHByb3BzMi5zdGVwLAogICAgICAgICAgc2hvd0xhYmVscyA9IF90aGlzJHByb3BzMi5zaG93TGFiZWxzLAogICAgICAgICAgc2hvd0lucHV0ID0gX3RoaXMkcHJvcHMyLnNob3dJbnB1dCwKICAgICAgICAgIHNob3dUaWNrcyA9IF90aGlzJHByb3BzMi5zaG93VGlja3MsCiAgICAgICAgICB0aWNrSW50ZXJ2YWwgPSBfdGhpcyRwcm9wczIudGlja0ludGVydmFsLAogICAgICAgICAgdGlja3MgPSBfdGhpcyRwcm9wczIudGlja3MsCiAgICAgICAgICBsZXZlbHMgPSBfdGhpcyRwcm9wczIubGV2ZWxzLAogICAgICAgICAgb25CbHVyID0gX3RoaXMkcHJvcHMyLm9uQmx1ciwKICAgICAgICAgIG9uQ2hhbmdlID0gX3RoaXMkcHJvcHMyLm9uQ2hhbmdlLAogICAgICAgICAgb25Gb2N1cyA9IF90aGlzJHByb3BzMi5vbkZvY3VzLAogICAgICAgICAgc2hvd1JhbmdlID0gX3RoaXMkcHJvcHMyLnNob3dSYW5nZSwKICAgICAgICAgIHZhbHVlID0gX3RoaXMkcHJvcHMyLnZhbHVlLAogICAgICAgICAgc3R5bGUgPSBfdGhpcyRwcm9wczIuc3R5bGUsCiAgICAgICAgICBpc0ludmFsaWQgPSBfdGhpcyRwcm9wczIuaXNJbnZhbGlkLAogICAgICAgICAgYXBwZW5kID0gX3RoaXMkcHJvcHMyLmFwcGVuZCwKICAgICAgICAgIHByZXBlbmQgPSBfdGhpcyRwcm9wczIucHJlcGVuZCwKICAgICAgICAgIG1pbklucHV0UHJvcHMgPSBfdGhpcyRwcm9wczIubWluSW5wdXRQcm9wcywKICAgICAgICAgIG1heElucHV0UHJvcHMgPSBfdGhpcyRwcm9wczIubWF4SW5wdXRQcm9wcywKICAgICAgICAgIGlzRHJhZ2dhYmxlID0gX3RoaXMkcHJvcHMyLmlzRHJhZ2dhYmxlLAogICAgICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfdGhpcyRwcm9wczIsIFsiY2xhc3NOYW1lIiwgImNvbXByZXNzZWQiLCAiZGlzYWJsZWQiLCAiZnVsbFdpZHRoIiwgInJlYWRPbmx5IiwgImlkIiwgIm1heCIsICJtaW4iLCAibmFtZSIsICJzdGVwIiwgInNob3dMYWJlbHMiLCAic2hvd0lucHV0IiwgInNob3dUaWNrcyIsICJ0aWNrSW50ZXJ2YWwiLCAidGlja3MiLCAibGV2ZWxzIiwgIm9uQmx1ciIsICJvbkNoYW5nZSIsICJvbkZvY3VzIiwgInNob3dSYW5nZSIsICJ2YWx1ZSIsICJzdHlsZSIsICJpc0ludmFsaWQiLCAiYXBwZW5kIiwgInByZXBlbmQiLCAibWluSW5wdXRQcm9wcyIsICJtYXhJbnB1dFByb3BzIiwgImlzRHJhZ2dhYmxlIl0pOwoKICAgICAgdmFyIGlkID0gdGhpcy5zdGF0ZS5pZDsKICAgICAgdmFyIGRpZ2l0VG9sZXJhbmNlID0gTWF0aC5tYXgoU3RyaW5nKG1pbikubGVuZ3RoLCBTdHJpbmcobWF4KS5sZW5ndGgpOwogICAgICB2YXIgc2hvd0lucHV0T25seSA9IHNob3dJbnB1dCA9PT0gJ2lucHV0V2l0aFBvcG92ZXInOwogICAgICB2YXIgY2FuU2hvd0Ryb3Bkb3duID0gc2hvd0lucHV0T25seSAmJiAhcmVhZE9ubHkgJiYgIWRpc2FibGVkOwogICAgICB2YXIgbWluSW5wdXQgPSAhIXNob3dJbnB1dCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVJhbmdlSW5wdXQgLy8gT3ZlcnJpZGFibGUgcHJvcHMKICAgICAgLCBfZXh0ZW5kcyh7CiAgICAgICAgImFyaWEtZGVzY3JpYmVkYnkiOiB0aGlzLnByb3BzWydhcmlhLWRlc2NyaWJlZGJ5J10sCiAgICAgICAgImFyaWEtbGFiZWwiOiB0aGlzLnByb3BzWydhcmlhLWxhYmVsJ10KICAgICAgfSwgbWluSW5wdXRQcm9wcywgewogICAgICAgIC8vIE5vbi1vdmVycmlkYWJsZSBwcm9wcwogICAgICAgIGRpZ2l0VG9sZXJhbmNlOiBkaWdpdFRvbGVyYW5jZSwKICAgICAgICBzaWRlOiAibWluIiwKICAgICAgICBtaW46IG1pbiwKICAgICAgICBtYXg6IE51bWJlcih0aGlzLnVwcGVyVmFsdWUpLAogICAgICAgIHN0ZXA6IHN0ZXAsCiAgICAgICAgdmFsdWU6IHRoaXMubG93ZXJWYWx1ZSwKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgY29tcHJlc3NlZDogY29tcHJlc3NlZCwKICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVMb3dlcklucHV0Q2hhbmdlLAogICAgICAgIG9uS2V5RG93bjogdGhpcy5oYW5kbGVJbnB1dEtleURvd24sCiAgICAgICAgbmFtZTogIiIuY29uY2F0KG5hbWUsICItbWluVmFsdWUiKSwKICAgICAgICBvbkZvY3VzOiBjYW5TaG93RHJvcGRvd24gPyB0aGlzLm9uSW5wdXRGb2N1cyA6IG9uRm9jdXMsCiAgICAgICAgb25CbHVyOiBjYW5TaG93RHJvcGRvd24gPyB0aGlzLm9uSW5wdXRCbHVyIDogb25CbHVyLAogICAgICAgIHJlYWRPbmx5OiByZWFkT25seSwKICAgICAgICBhdXRvU2l6ZTogIXNob3dJbnB1dE9ubHksCiAgICAgICAgZnVsbFdpZHRoOiAhIXNob3dJbnB1dE9ubHkgJiYgZnVsbFdpZHRoLAogICAgICAgIGlzSW52YWxpZDogaXNJbnZhbGlkLAogICAgICAgIGNvbnRyb2xPbmx5OiBzaG93SW5wdXRPbmx5LAogICAgICAgIG9uTW91c2VEb3duOiBzaG93SW5wdXRPbmx5ID8gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5wcmV2ZW50UG9wb3ZlckNsb3NlID0gdHJ1ZTsKICAgICAgICB9IDogdW5kZWZpbmVkCiAgICAgIH0pKSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIG1heElucHV0ID0gISFzaG93SW5wdXQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlSYW5nZUlucHV0IC8vIE92ZXJyaWRhYmxlIHByb3BzCiAgICAgICwgX2V4dGVuZHMoewogICAgICAgICJhcmlhLWRlc2NyaWJlZGJ5IjogdGhpcy5wcm9wc1snYXJpYS1kZXNjcmliZWRieSddLAogICAgICAgICJhcmlhLWxhYmVsIjogdGhpcy5wcm9wc1snYXJpYS1sYWJlbCddCiAgICAgIH0sIG1heElucHV0UHJvcHMsIHsKICAgICAgICAvLyBOb24tb3ZlcnJpZGFibGUgcHJvcHMKICAgICAgICBkaWdpdFRvbGVyYW5jZTogZGlnaXRUb2xlcmFuY2UsCiAgICAgICAgc2lkZTogIm1heCIsCiAgICAgICAgbWluOiBOdW1iZXIodGhpcy5sb3dlclZhbHVlKSwKICAgICAgICBtYXg6IG1heCwKICAgICAgICBzdGVwOiBzdGVwLAogICAgICAgIHZhbHVlOiB0aGlzLnVwcGVyVmFsdWUsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIGNvbXByZXNzZWQ6IGNvbXByZXNzZWQsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlVXBwZXJJbnB1dENoYW5nZSwKICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlSW5wdXRLZXlEb3duLAogICAgICAgIG5hbWU6ICIiLmNvbmNhdChuYW1lLCAiLW1heFZhbHVlIiksCiAgICAgICAgb25Gb2N1czogY2FuU2hvd0Ryb3Bkb3duID8gdGhpcy5vbklucHV0Rm9jdXMgOiBvbkZvY3VzLAogICAgICAgIG9uQmx1cjogY2FuU2hvd0Ryb3Bkb3duID8gdGhpcy5vbklucHV0Qmx1ciA6IG9uQmx1ciwKICAgICAgICByZWFkT25seTogcmVhZE9ubHksCiAgICAgICAgYXV0b1NpemU6ICFzaG93SW5wdXRPbmx5LAogICAgICAgIGZ1bGxXaWR0aDogISFzaG93SW5wdXRPbmx5ICYmIGZ1bGxXaWR0aCwKICAgICAgICBjb250cm9sT25seTogc2hvd0lucHV0T25seSwKICAgICAgICBpc0ludmFsaWQ6IGlzSW52YWxpZCwKICAgICAgICBvbk1vdXNlRG93bjogc2hvd0lucHV0T25seSA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIucHJldmVudFBvcG92ZXJDbG9zZSA9IHRydWU7CiAgICAgICAgfSA6IHVuZGVmaW5lZAogICAgICB9KSkgOiB1bmRlZmluZWQ7CiAgICAgIHZhciBjbGFzc2VzID0gY2xhc3NOYW1lcygnZXVpRHVhbFJhbmdlJywgY2xhc3NOYW1lKTsKICAgICAgdmFyIGxlZnRUaHVtYlBvc2l0aW9uID0gdGhpcy5zdGF0ZS5yYW5nZVNsaWRlclJlZkF2YWlsYWJsZSA/IHRoaXMuY2FsY3VsYXRlVGh1bWJQb3NpdGlvblN0eWxlKE51bWJlcih0aGlzLmxvd2VyVmFsdWUpIHx8IG1pbiwgdGhpcy5zdGF0ZS5yYW5nZVdpZHRoKSA6IHsKICAgICAgICBsZWZ0OiAnMCcKICAgICAgfTsKICAgICAgdmFyIHJpZ2h0VGh1bWJQb3NpdGlvbiA9IHRoaXMuc3RhdGUucmFuZ2VTbGlkZXJSZWZBdmFpbGFibGUgPyB0aGlzLmNhbGN1bGF0ZVRodW1iUG9zaXRpb25TdHlsZShOdW1iZXIodGhpcy51cHBlclZhbHVlKSB8fCBtYXgsIHRoaXMuc3RhdGUucmFuZ2VXaWR0aCkgOiB7CiAgICAgICAgbGVmdDogJzAnCiAgICAgIH07CiAgICAgIHZhciB0aGVSYW5nZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVJhbmdlV3JhcHBlciwgewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NlcywKICAgICAgICBmdWxsV2lkdGg6IGZ1bGxXaWR0aCwKICAgICAgICBjb21wcmVzc2VkOiBjb21wcmVzc2VkCiAgICAgIH0sIHNob3dJbnB1dCAmJiAhc2hvd0lucHV0T25seSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgbWluSW5wdXQsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiBzaG93VGlja3MgfHwgdGlja3MgPyAnZXVpUmFuZ2VfX3NsaW1Ib3Jpem9udGFsU3BhY2VyJyA6ICdldWlSYW5nZV9faG9yaXpvbnRhbFNwYWNlcicKICAgICAgfSkpLCBzaG93TGFiZWxzICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVJhbmdlTGFiZWwsIHsKICAgICAgICBzaWRlOiAibWluIiwKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQKICAgICAgfSwgbWluKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpUmFuZ2VUcmFjaywgewogICAgICAgIGNvbXByZXNzZWQ6IGNvbXByZXNzZWQsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIG1heDogbWF4LAogICAgICAgIG1pbjogbWluLAogICAgICAgIHN0ZXA6IHN0ZXAsCiAgICAgICAgc2hvd1RpY2tzOiBzaG93VGlja3MsCiAgICAgICAgdGlja0ludGVydmFsOiB0aWNrSW50ZXJ2YWwsCiAgICAgICAgdGlja3M6IHRpY2tzLAogICAgICAgIGxldmVsczogbGV2ZWxzLAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVNsaWRlckNoYW5nZSwKICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgImFyaWEtaGlkZGVuIjogc2hvd0lucHV0ID09PSB0cnVlCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVJhbmdlU2xpZGVyLCBfZXh0ZW5kcyh7CiAgICAgICAgY2xhc3NOYW1lOiAiZXVpRHVhbFJhbmdlX19zbGlkZXIiLAogICAgICAgIHJlZjogdGhpcy5oYW5kbGVSYW5nZVNsaWRlclJlZlVwZGF0ZSwKICAgICAgICBpZDogaWQsCiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBtaW46IG1pbiwKICAgICAgICBtYXg6IG1heCwKICAgICAgICBzdGVwOiBzdGVwLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICBjb21wcmVzc2VkOiBjb21wcmVzc2VkLAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVNsaWRlckNoYW5nZSwKICAgICAgICBzdHlsZTogc3R5bGUsCiAgICAgICAgc2hvd1RpY2tzOiBzaG93VGlja3MsCiAgICAgICAgaGFzRm9jdXM6IHRoaXMuc3RhdGUuaGFzRm9jdXMsCiAgICAgICAgImFyaWEtaGlkZGVuIjogdHJ1ZSwKICAgICAgICB0YWJJbmRleDogLTEsCiAgICAgICAgc2hvd1JhbmdlOiBzaG93UmFuZ2UsCiAgICAgICAgb25Gb2N1czogb25Gb2N1cywKICAgICAgICBvbkJsdXI6IG9uQmx1cgogICAgICB9LCByZXN0KSksIHNob3dSYW5nZSAmJiB0aGlzLmlzVmFsaWQgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpUmFuZ2VIaWdobGlnaHQsIHsKICAgICAgICBjb21wcmVzc2VkOiBjb21wcmVzc2VkLAogICAgICAgIGhhc0ZvY3VzOiB0aGlzLnN0YXRlLmhhc0ZvY3VzLAogICAgICAgIHNob3dUaWNrczogc2hvd1RpY2tzLAogICAgICAgIG1pbjogTnVtYmVyKG1pbiksCiAgICAgICAgbWF4OiBOdW1iZXIobWF4KSwKICAgICAgICBsb3dlclZhbHVlOiBOdW1iZXIodGhpcy5sb3dlclZhbHVlKSwKICAgICAgICB1cHBlclZhbHVlOiBOdW1iZXIodGhpcy51cHBlclZhbHVlKQogICAgICB9KSwgdGhpcy5zdGF0ZS5yYW5nZVNsaWRlclJlZkF2YWlsYWJsZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgaXNEcmFnZ2FibGUgJiYgdGhpcy5pc1ZhbGlkICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVJhbmdlRHJhZ2dhYmxlLCB7CiAgICAgICAgbWluOiBtaW4sCiAgICAgICAgbWF4OiBtYXgsCiAgICAgICAgdmFsdWU6IFtOdW1iZXIodGhpcy5sb3dlclZhbHVlKSwgTnVtYmVyKHRoaXMudXBwZXJWYWx1ZSldLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICBsb3dlclBvc2l0aW9uOiBsZWZ0VGh1bWJQb3NpdGlvbi5sZWZ0LAogICAgICAgIHVwcGVyUG9zaXRpb246IHJpZ2h0VGh1bWJQb3NpdGlvbi5sZWZ0LAogICAgICAgIHNob3dUaWNrczogc2hvd1RpY2tzLAogICAgICAgIGNvbXByZXNzZWQ6IGNvbXByZXNzZWQsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRHJhZywKICAgICAgICBvbkZvY3VzOiB0aGlzLm9uVGh1bWJGb2N1cywKICAgICAgICBvbkJsdXI6IHRoaXMub25UaHVtYkJsdXIsCiAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZURyYWdnYWJsZUtleURvd24sCiAgICAgICAgImFyaWEtZGVzY3JpYmVkYnkiOiB0aGlzLnByb3BzWydhcmlhLWRlc2NyaWJlZGJ5J10sCiAgICAgICAgImFyaWEtbGFiZWwiOiB0aGlzLnByb3BzWydhcmlhLWxhYmVsJ10KICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aVJhbmdlVGh1bWIsIHsKICAgICAgICBtaW46IG1pbiwKICAgICAgICBtYXg6IE51bWJlcih0aGlzLnVwcGVyVmFsdWUpLAogICAgICAgIHZhbHVlOiB0aGlzLmxvd2VyVmFsdWUsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIHNob3dUaWNrczogc2hvd1RpY2tzLAogICAgICAgIHNob3dJbnB1dDogISFzaG93SW5wdXQsCiAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUxvd2VyS2V5RG93biwKICAgICAgICBvbkZvY3VzOiB0aGlzLm9uVGh1bWJGb2N1cywKICAgICAgICBvbkJsdXI6IHRoaXMub25UaHVtYkJsdXIsCiAgICAgICAgc3R5bGU6IGxlZnRUaHVtYlBvc2l0aW9uLAogICAgICAgICJhcmlhLWRlc2NyaWJlZGJ5IjogdGhpcy5wcm9wc1snYXJpYS1kZXNjcmliZWRieSddLAogICAgICAgICJhcmlhLWxhYmVsIjogdGhpcy5wcm9wc1snYXJpYS1sYWJlbCddCiAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlSYW5nZVRodW1iLCB7CiAgICAgICAgbWluOiBOdW1iZXIodGhpcy5sb3dlclZhbHVlKSwKICAgICAgICBtYXg6IG1heCwKICAgICAgICB2YWx1ZTogdGhpcy51cHBlclZhbHVlLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICBzaG93VGlja3M6IHNob3dUaWNrcywKICAgICAgICBzaG93SW5wdXQ6ICEhc2hvd0lucHV0LAogICAgICAgIG9uS2V5RG93bjogdGhpcy5oYW5kbGVVcHBlcktleURvd24sCiAgICAgICAgb25Gb2N1czogdGhpcy5vblRodW1iRm9jdXMsCiAgICAgICAgb25CbHVyOiB0aGlzLm9uVGh1bWJCbHVyLAogICAgICAgIHN0eWxlOiByaWdodFRodW1iUG9zaXRpb24sCiAgICAgICAgImFyaWEtZGVzY3JpYmVkYnkiOiB0aGlzLnByb3BzWydhcmlhLWRlc2NyaWJlZGJ5J10sCiAgICAgICAgImFyaWEtbGFiZWwiOiB0aGlzLnByb3BzWydhcmlhLWxhYmVsJ10KICAgICAgfSkpKSwgc2hvd0xhYmVscyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlSYW5nZUxhYmVsLCB7CiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkCiAgICAgIH0sIG1heCksIHNob3dJbnB1dCAmJiAhc2hvd0lucHV0T25seSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6IHNob3dUaWNrcyB8fCB0aWNrcyA/ICdldWlSYW5nZV9fc2xpbUhvcml6b250YWxTcGFjZXInIDogJ2V1aVJhbmdlX19ob3Jpem9udGFsU3BhY2VyJwogICAgICB9KSwgbWF4SW5wdXQpKTsKICAgICAgdmFyIHRoZVBvcG92ZXIgPSBzaG93SW5wdXRPbmx5ID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpSW5wdXRQb3BvdmVyLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZXVpUmFuZ2VfX3BvcG92ZXIiLAogICAgICAgIGlucHV0OiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlGb3JtQ29udHJvbExheW91dERlbGltaXRlZCwgewogICAgICAgICAgc3RhcnRDb250cm9sOiBtaW5JbnB1dCwKICAgICAgICAgIGVuZENvbnRyb2w6IG1heElucHV0LAogICAgICAgICAgaXNEaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICBmdWxsV2lkdGg6IGZ1bGxXaWR0aCwKICAgICAgICAgIGNvbXByZXNzZWQ6IGNvbXByZXNzZWQsCiAgICAgICAgICByZWFkT25seTogcmVhZE9ubHksCiAgICAgICAgICBhcHBlbmQ6IGFwcGVuZCwKICAgICAgICAgIHByZXBlbmQ6IHByZXBlbmQKICAgICAgICB9KSwKICAgICAgICBmdWxsV2lkdGg6IGZ1bGxXaWR0aCwKICAgICAgICBpc09wZW46IHRoaXMuc3RhdGUuaXNQb3BvdmVyT3BlbiwKICAgICAgICBjbG9zZVBvcG92ZXI6IHRoaXMuY2xvc2VQb3BvdmVyLAogICAgICAgIGRpc2FibGVGb2N1c1RyYXA6IHRydWUsCiAgICAgICAgb25QYW5lbFJlc2l6ZTogdGhpcy5vblJlc2l6ZQogICAgICB9LCB0aGVSYW5nZSkgOiB1bmRlZmluZWQ7CiAgICAgIHJldHVybiB0aGVQb3BvdmVyIHx8IHRoZVJhbmdlOwogICAgfQogIH0sIHsKICAgIGtleTogImxvd2VyVmFsdWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnByb3BzLnZhbHVlID8gdGhpcy5wcm9wcy52YWx1ZVswXSA6IHRoaXMucHJvcHMubWluOwogICAgfQogIH0sIHsKICAgIGtleTogInVwcGVyVmFsdWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnByb3BzLnZhbHVlID8gdGhpcy5wcm9wcy52YWx1ZVsxXSA6IHRoaXMucHJvcHMubWF4OwogICAgfQogIH0sIHsKICAgIGtleTogImxvd2VyVmFsdWVJc1ZhbGlkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gaXNXaXRoaW5SYW5nZSh0aGlzLnByb3BzLm1pbiwgdGhpcy51cHBlclZhbHVlLCB0aGlzLmxvd2VyVmFsdWUpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwcGVyVmFsdWVJc1ZhbGlkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gaXNXaXRoaW5SYW5nZSh0aGlzLmxvd2VyVmFsdWUsIHRoaXMucHJvcHMubWF4LCB0aGlzLnVwcGVyVmFsdWUpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzVmFsaWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvd2VyVmFsdWVJc1ZhbGlkICYmIHRoaXMudXBwZXJWYWx1ZUlzVmFsaWQ7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXVpRHVhbFJhbmdlOwp9KENvbXBvbmVudCk7CgpfZGVmaW5lUHJvcGVydHkoRXVpRHVhbFJhbmdlLCAiZGVmYXVsdFByb3BzIiwgewogIG1pbjogMCwKICBtYXg6IDEwMCwKICBzdGVwOiAxLAogIGZ1bGxXaWR0aDogZmFsc2UsCiAgY29tcHJlc3NlZDogZmFsc2UsCiAgc2hvd0xhYmVsczogZmFsc2UsCiAgc2hvd0lucHV0OiBmYWxzZSwKICBzaG93UmFuZ2U6IHRydWUsCiAgc2hvd1RpY2tzOiBmYWxzZSwKICBsZXZlbHM6IFtdCn0pOwoKRXVpRHVhbFJhbmdlLnByb3BUeXBlcyA9IHsKICB2YWx1ZTogUHJvcFR5cGVzLmFueS5pc1JlcXVpcmVkLAogIG9uQmx1cjogUHJvcFR5cGVzLmZ1bmMsCiAgb25Gb2N1czogUHJvcFR5cGVzLmZ1bmMsCiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsCiAgZnVsbFdpZHRoOiBQcm9wVHlwZXMuYm9vbCwKICBpc0ludmFsaWQ6IFByb3BUeXBlcy5ib29sLAoKICAvKioKICAgICAqIENyZWF0ZSBjb2xvcmVkIGluZGljYXRvcnMgZm9yIGNlcnRhaW4gaW50ZXJ2YWxzCiAgICAgKi8KICBsZXZlbHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zaGFwZSh7CiAgICBtaW46IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCwKICAgIG1heDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLAogICAgY29sb3I6IFByb3BUeXBlcy5vbmVPZihbInByaW1hcnkiLCAic3VjY2VzcyIsICJ3YXJuaW5nIiwgImRhbmdlciJdKS5pc1JlcXVpcmVkCiAgfSkuaXNSZXF1aXJlZCksCgogIC8qKgogICAgICogU2hvd3Mgc3RhdGljIG1pbi9tYXggbGFiZWxzIG9uIHRoZSBzaWRlcyBvZiB0aGUgcmFuZ2Ugc2xpZGVyCiAgICAgKi8KICBzaG93TGFiZWxzOiBQcm9wVHlwZXMuYm9vbCwKCiAgLyoqCiAgICAgKiBQYXNzIGB0cnVlYCB0byBkaXNwbGF5cyBhbiBleHRyYSBpbnB1dCBjb250cm9sIGZvciBkaXJlY3QgbWFuaXB1bGF0aW9uLgogICAgICogUGFzcyBgJ2lucHV0V2l0aFBvcG92ZXInYCB0byBvbmx5IHNob3cgdGhlIGlucHV0IGJ1dCBzaG93IHRoZSByYW5nZSBpbiBhIGRyb3Bkb3duLgogICAgICovCiAgc2hvd0lucHV0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLCBQcm9wVHlwZXMub25lT2YoWyJpbnB1dFdpdGhQb3BvdmVyIl0pXSksCgogIC8qKgogICAgICogTW9kaWZpZXMgdGhlIG51bWJlciBvZiB0aWNrIG1hcmtzIGFuZCBhdCB3aGF0IGludGVydmFsCiAgICAgKi8KICB0aWNrSW50ZXJ2YWw6IFByb3BUeXBlcy5udW1iZXIsCgogIC8qKgogICAgICogU3BlY2lmaWVkIHRpY2tzIGF0IHNwZWNpZmllZCB2YWx1ZXMKICAgICAqLwogIHRpY2tzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc2hhcGUoewogICAgdmFsdWU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCwKICAgIGxhYmVsOiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkCiAgfSkuaXNSZXF1aXJlZCksCgogIC8qKgogICAgICogQ3JlYXRlcyBhbiBpbnB1dCBncm91cCB3aXRoIGVsZW1lbnQocykgY29taW5nIGJlZm9yZSBpbnB1dC4gIFdpbGwgb25seSBzaG93IGlmIGBzaG93SW5wdXQgPSBpbnB1dFdpdGhQb3BvdmVyYC4KICAgICAqIGBzdHJpbmdgIHwgYFJlYWN0RWxlbWVudGAgb3IgYW4gYXJyYXkgb2YgdGhlc2UKICAgICAqLwogIHByZXBlbmQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmVsZW1lbnQuaXNSZXF1aXJlZF0pLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmVsZW1lbnQuaXNSZXF1aXJlZF0pLmlzUmVxdWlyZWQpLmlzUmVxdWlyZWRdKSwKCiAgLyoqCiAgICAgKiBDcmVhdGVzIGFuIGlucHV0IGdyb3VwIHdpdGggZWxlbWVudChzKSBjb21pbmcgYWZ0ZXIgaW5wdXQuIFdpbGwgb25seSBzaG93IGlmIGBzaG93SW5wdXQgPSBpbnB1dFdpdGhQb3BvdmVyYC4KICAgICAqIGBzdHJpbmdgIHwgYFJlYWN0RWxlbWVudGAgb3IgYW4gYXJyYXkgb2YgdGhlc2UKICAgICAqLwogIGFwcGVuZDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCBQcm9wVHlwZXMuZWxlbWVudC5pc1JlcXVpcmVkXSkuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCBQcm9wVHlwZXMuZWxlbWVudC5pc1JlcXVpcmVkXSkuaXNSZXF1aXJlZCkuaXNSZXF1aXJlZF0pLAoKICAvKioKICAgICAqICBJbnRlbmRlZCB0byBiZSB1c2VzIHdpdGggYXJpYSBhdHRyaWJ1dGVzLiBTb21lIGF0dHJpYnV0ZXMgbWF5IGJlIG92ZXJ3cml0dGVuLgogICAgICovCiAgbWluSW5wdXRQcm9wczogUHJvcFR5cGVzLmFueSwKCiAgLyoqCiAgICAgKiAgSW50ZW5kZWQgdG8gYmUgdXNlcyB3aXRoIGFyaWEgYXR0cmlidXRlcy4gU29tZSBhdHRyaWJ1dGVzIG1heSBiZSBvdmVyd3JpdHRlbi4KICAgICAqLwogIG1heElucHV0UHJvcHM6IFByb3BUeXBlcy5hbnksCgogIC8qKgogICAgICogIENyZWF0ZXMgYSBkcmFnZ2JsZSBoaWdobGlnaHRlZCByYW5nZSBhcmVhCiAgICAgKi8KICBpc0RyYWdnYWJsZTogUHJvcFR5cGVzLmJvb2wKfTsKCnRyeSB7CiAgRXVpRHVhbFJhbmdlLl9fZG9jZ2VuSW5mbyA9IHsKICAgIGRlc2NyaXB0aW9uOiAnJywKICAgIGRpc3BsYXlOYW1lOiAnRXVpRHVhbFJhbmdlJywKICAgIG1ldGhvZHM6IFtdLAogICAgcHJvcHM6IHsKICAgICAgdmFsdWU6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICd2YWx1ZScsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9mb3JtL3JhbmdlL2R1YWxfcmFuZ2UudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlEdWFsUmFuZ2VQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdbUmVhY3RUZXh0LCBSZWFjdFRleHRdJwogICAgICAgIH0KICAgICAgfSwKICAgICAgb25CbHVyOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnb25CbHVyJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Zvcm0vcmFuZ2UvZHVhbF9yYW5nZS50c3gnLAogICAgICAgICAgbmFtZTogJ0V1aUR1YWxSYW5nZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZXZlbnQ6IGFueSkgPT4gdm9pZCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9uRm9jdXM6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdvbkZvY3VzJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Zvcm0vcmFuZ2UvZHVhbF9yYW5nZS50c3gnLAogICAgICAgICAgbmFtZTogJ0V1aUR1YWxSYW5nZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICcoZXZlbnQ6IGFueSkgPT4gdm9pZCcKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9uQ2hhbmdlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnb25DaGFuZ2UnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZm9ybS9yYW5nZS9kdWFsX3JhbmdlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpRHVhbFJhbmdlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnKHZhbHVlczogW1JlYWN0VGV4dCwgUmVhY3RUZXh0XSwgaXNWYWxpZDogYm9vbGVhbiwgZXZlbnQ/OiBhbnkpID0+IHZvaWQnCiAgICAgICAgfQogICAgICB9LAogICAgICBmdWxsV2lkdGg6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiAnZmFsc2UnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2Z1bGxXaWR0aCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9mb3JtL3JhbmdlL2R1YWxfcmFuZ2UudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlEdWFsUmFuZ2VQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnYm9vbGVhbicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGlzSW52YWxpZDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2lzSW52YWxpZCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9mb3JtL3JhbmdlL2R1YWxfcmFuZ2UudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlEdWFsUmFuZ2VQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnYm9vbGVhbicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxldmVsczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6ICdbXScKICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIGNvbG9yZWQgaW5kaWNhdG9ycyBmb3IgY2VydGFpbiBpbnRlcnZhbHMnLAogICAgICAgIG5hbWU6ICdsZXZlbHMnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZm9ybS9yYW5nZS9kdWFsX3JhbmdlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpRHVhbFJhbmdlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ0V1aVJhbmdlTGV2ZWxbXScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNob3dMYWJlbHM6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiAnZmFsc2UnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJ1Nob3dzIHN0YXRpYyBtaW4vbWF4IGxhYmVscyBvbiB0aGUgc2lkZXMgb2YgdGhlIHJhbmdlIHNsaWRlcicsCiAgICAgICAgbmFtZTogJ3Nob3dMYWJlbHMnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZm9ybS9yYW5nZS9kdWFsX3JhbmdlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpRHVhbFJhbmdlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2Jvb2xlYW4nCiAgICAgICAgfQogICAgICB9LAogICAgICBzaG93SW5wdXQ6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiAnZmFsc2UnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJ1Bhc3MgYHRydWVgIHRvIGRpc3BsYXlzIGFuIGV4dHJhIGlucHV0IGNvbnRyb2wgZm9yIGRpcmVjdCBtYW5pcHVsYXRpb24uXG4nICsgIlBhc3MgYCdpbnB1dFdpdGhQb3BvdmVyJ2AgdG8gb25seSBzaG93IHRoZSBpbnB1dCBidXQgc2hvdyB0aGUgcmFuZ2UgaW4gYSBkcm9wZG93bi4iLAogICAgICAgIG5hbWU6ICdzaG93SW5wdXQnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZm9ybS9yYW5nZS9kdWFsX3JhbmdlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpRHVhbFJhbmdlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2Jvb2xlYW4gfCAiaW5wdXRXaXRoUG9wb3ZlciInCiAgICAgICAgfQogICAgICB9LAogICAgICB0aWNrSW50ZXJ2YWw6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICdNb2RpZmllcyB0aGUgbnVtYmVyIG9mIHRpY2sgbWFya3MgYW5kIGF0IHdoYXQgaW50ZXJ2YWwnLAogICAgICAgIG5hbWU6ICd0aWNrSW50ZXJ2YWwnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZm9ybS9yYW5nZS9kdWFsX3JhbmdlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpRHVhbFJhbmdlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ251bWJlcicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRpY2tzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnU3BlY2lmaWVkIHRpY2tzIGF0IHNwZWNpZmllZCB2YWx1ZXMnLAogICAgICAgIG5hbWU6ICd0aWNrcycsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9mb3JtL3JhbmdlL2R1YWxfcmFuZ2UudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlEdWFsUmFuZ2VQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnRXVpUmFuZ2VUaWNrW10nCiAgICAgICAgfQogICAgICB9LAogICAgICBwcmVwZW5kOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhbiBpbnB1dCBncm91cCB3aXRoIGVsZW1lbnQocykgY29taW5nIGJlZm9yZSBpbnB1dC4gIFdpbGwgb25seSBzaG93IGlmIGBzaG93SW5wdXQgPSBpbnB1dFdpdGhQb3BvdmVyYC5cbicgKyAnYHN0cmluZ2AgfCBgUmVhY3RFbGVtZW50YCBvciBhbiBhcnJheSBvZiB0aGVzZScsCiAgICAgICAgbmFtZTogJ3ByZXBlbmQnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZm9ybS9yYW5nZS9kdWFsX3JhbmdlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpRHVhbFJhbmdlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ1ByZXBlbmRBcHBlbmRUeXBlJwogICAgICAgIH0KICAgICAgfSwKICAgICAgYXBwZW5kOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhbiBpbnB1dCBncm91cCB3aXRoIGVsZW1lbnQocykgY29taW5nIGFmdGVyIGlucHV0LiBXaWxsIG9ubHkgc2hvdyBpZiBgc2hvd0lucHV0ID0gaW5wdXRXaXRoUG9wb3ZlcmAuXG4nICsgJ2BzdHJpbmdgIHwgYFJlYWN0RWxlbWVudGAgb3IgYW4gYXJyYXkgb2YgdGhlc2UnLAogICAgICAgIG5hbWU6ICdhcHBlbmQnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZm9ybS9yYW5nZS9kdWFsX3JhbmdlLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpRHVhbFJhbmdlUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ1ByZXBlbmRBcHBlbmRUeXBlJwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWluSW5wdXRQcm9wczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0ludGVuZGVkIHRvIGJlIHVzZXMgd2l0aCBhcmlhIGF0dHJpYnV0ZXMuIFNvbWUgYXR0cmlidXRlcyBtYXkgYmUgb3ZlcndyaXR0ZW4uJywKICAgICAgICBuYW1lOiAnbWluSW5wdXRQcm9wcycsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9mb3JtL3JhbmdlL2R1YWxfcmFuZ2UudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlEdWFsUmFuZ2VQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnUGFydGlhbDxFdWlSYW5nZUlucHV0UHJvcHM+JwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWF4SW5wdXRQcm9wczogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0ludGVuZGVkIHRvIGJlIHVzZXMgd2l0aCBhcmlhIGF0dHJpYnV0ZXMuIFNvbWUgYXR0cmlidXRlcyBtYXkgYmUgb3ZlcndyaXR0ZW4uJywKICAgICAgICBuYW1lOiAnbWF4SW5wdXRQcm9wcycsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9mb3JtL3JhbmdlL2R1YWxfcmFuZ2UudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlEdWFsUmFuZ2VQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnUGFydGlhbDxFdWlSYW5nZUlucHV0UHJvcHM+JwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXNEcmFnZ2FibGU6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgZHJhZ2dibGUgaGlnaGxpZ2h0ZWQgcmFuZ2UgYXJlYScsCiAgICAgICAgbmFtZTogJ2lzRHJhZ2dhYmxlJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2Zvcm0vcmFuZ2UvZHVhbF9yYW5nZS50c3gnLAogICAgICAgICAgbmFtZTogJ0V1aUR1YWxSYW5nZVByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgY2xhc3NOYW1lOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnY2xhc3NOYW1lJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL25vZGVfbW9kdWxlcy9AdHlwZXMvcmVhY3QvaW5kZXguZC50cycsCiAgICAgICAgICBuYW1lOiAnSFRNTEF0dHJpYnV0ZXMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdhcmlhLWxhYmVsJzogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0RlZmluZXMgYSBzdHJpbmcgdmFsdWUgdGhhdCBsYWJlbHMgdGhlIGN1cnJlbnQgZWxlbWVudC5cbicgKyAnQHNlZSBhcmlhLWxhYmVsbGVkYnkuJywKICAgICAgICBuYW1lOiAnYXJpYS1sYWJlbCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9ub2RlX21vZHVsZXMvQHR5cGVzL3JlYWN0L2luZGV4LmQudHMnLAogICAgICAgICAgbmFtZTogJ0FyaWFBdHRyaWJ1dGVzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9LAogICAgICAnZGF0YS10ZXN0LXN1YmonOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZGF0YS10ZXN0LXN1YmonLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvY29tbW9uLnRzJywKICAgICAgICAgIG5hbWU6ICdDb21tb25Qcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nJwogICAgICAgIH0KICAgICAgfSwKICAgICAgY29tcHJlc3NlZDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6ICdmYWxzZScKICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnY29tcHJlc3NlZCcsCiAgICAgICAgcGFyZW50OiB1bmRlZmluZWQsCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgaGFzRm9jdXM6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdoYXNGb2N1cycsCiAgICAgICAgcGFyZW50OiB1bmRlZmluZWQsCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2hvd1JhbmdlOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogJ3RydWUnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ3Nob3dSYW5nZScsCiAgICAgICAgcGFyZW50OiB1bmRlZmluZWQsCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2hvd1RpY2tzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogJ2ZhbHNlJwogICAgICAgIH0sCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdzaG93VGlja3MnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnYm9vbGVhbicKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBleHRlbmRlZEludGVyZmFjZXM6IFsnRXVpRHVhbFJhbmdlUHJvcHMnLCAnSFRNTEF0dHJpYnV0ZXMnLCAnSW5wdXRIVE1MQXR0cmlidXRlcycsICdBcmlhQXR0cmlidXRlcycsICdET01BdHRyaWJ1dGVzJywgJ0NvbW1vblByb3BzJ10KICB9Owp9IGNhdGNoIChlKSB7fQ=="},{"version":3,"sources":["D:/work/eui/src/components/form/range/dual_range.tsx"],"names":["React","Component","classNames","keys","isWithinRange","EuiInputPopover","EuiFormControlLayoutDelimited","htmlIdGenerator","EuiRangeDraggable","EuiRangeHighlight","EuiRangeInput","EuiRangeLabel","EuiRangeSlider","EuiRangeThumb","EuiRangeTrack","EuiRangeWrapper","calculateThumbPosition","EuiDualRange","id","props","hasFocus","rangeSliderRefAvailable","isPopoverOpen","rangeWidth","undefined","isVisible","ref","rangeSliderRef","setState","clientWidth","newVal","lower","upper","e","lowerHalf","Math","abs","max","min","newValIsLow","upperValueIsValid","lowerValueIsValid","_handleOnChange","isValid","_determineInvalidThumbMovement","lowerValue","upperValue","_determineValidThumbMovement","onChange","_determineThumbMovement","Number","currentTarget","value","event","ARROW_UP","ARROW_RIGHT","ARROW_DOWN","ARROW_LEFT","indexOf","key","_isDirectionalKeyPress","preventDefault","_resetToRangeEnds","target","stepRemainder","step","TAB","_handleKeyDown","width","trackWidth","showInput","position","left","shouldFocused","state","onFocus","toggleHasFocus","onBlur","preventPopoverClose","setTimeout","closePopover","steps","approx","round","bound","nearest","toPrecision","x","isFirstInteraction","leftPosition","dragAcc","delta","percentageOfArea","percentageOfRange","newLower","getNearestStep","newUpper","noMovement","isMin","isMax","isOutOfRange","className","compressed","disabled","fullWidth","readOnly","propsId","name","showLabels","showTicks","tickInterval","ticks","levels","showRange","style","isInvalid","append","prepend","minInputProps","maxInputProps","isDraggable","rest","digitTolerance","String","length","showInputOnly","canShowDropdown","minInput","handleLowerInputChange","handleInputKeyDown","onInputFocus","onInputBlur","maxInput","handleUpperInputChange","classes","leftThumbPosition","calculateThumbPositionStyle","rightThumbPosition","theRange","handleSliderChange","handleRangeSliderRefUpdate","handleDrag","onThumbFocus","onThumbBlur","handleDraggableKeyDown","handleLowerKeyDown","handleUpperKeyDown","thePopover","onResize"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\nimport classNames from 'classnames';\nimport { keys } from '../../../services';\nimport { isWithinRange } from '../../../services/number';\nimport { EuiInputPopover } from '../../popover';\nimport { EuiFormControlLayoutDelimited } from '../form_control_layout';\nimport { htmlIdGenerator } from '../../../services/accessibility';\nimport { EuiRangeDraggable } from './range_draggable';\nimport { EuiRangeHighlight } from './range_highlight';\nimport { EuiRangeInput } from './range_input';\nimport { EuiRangeLabel } from './range_label';\nimport { EuiRangeSlider } from './range_slider';\nimport { EuiRangeThumb } from './range_thumb';\nimport { EuiRangeTrack } from './range_track';\nimport { EuiRangeWrapper } from './range_wrapper';\nimport { calculateThumbPosition } from './utils';\nexport class EuiDualRange extends Component {\n  static defaultProps = {\n    min: 0,\n    max: 100,\n    step: 1,\n    fullWidth: false,\n    compressed: false,\n    showLabels: false,\n    showInput: false,\n    showRange: true,\n    showTicks: false,\n    levels: []\n  };\n  state = {\n    id: this.props.id || htmlIdGenerator()(),\n    hasFocus: false,\n    rangeSliderRefAvailable: false,\n    isPopoverOpen: false,\n    rangeWidth: undefined,\n    isVisible: true // used to trigger a rerender if initial element width is 0\n\n  };\n  preventPopoverClose = false;\n  rangeSliderRef = null;\n  handleRangeSliderRefUpdate = ref => {\n    this.rangeSliderRef = ref;\n    this.setState({\n      rangeSliderRefAvailable: !!ref,\n      rangeWidth: !!ref ? ref.clientWidth : null\n    });\n  };\n  leftPosition = 0;\n  dragAcc = 0;\n\n  get lowerValue() {\n    return this.props.value ? this.props.value[0] : this.props.min;\n  }\n\n  get upperValue() {\n    return this.props.value ? this.props.value[1] : this.props.max;\n  }\n\n  get lowerValueIsValid() {\n    return isWithinRange(this.props.min, this.upperValue, this.lowerValue);\n  }\n\n  get upperValueIsValid() {\n    return isWithinRange(this.lowerValue, this.props.max, this.upperValue);\n  }\n\n  get isValid() {\n    return this.lowerValueIsValid && this.upperValueIsValid;\n  }\n\n  componentDidMount() {\n    if (this.rangeSliderRef && this.rangeSliderRef.clientWidth === 0) {\n      // Safe to call `setState` inside conditional\n      // https://reactjs.org/docs/react-component.html#componentdidmount\n      // eslint-disable-next-line react/no-did-mount-set-state\n      this.setState({\n        isVisible: false\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.rangeSliderRef?.clientWidth && !this.state.isVisible) {\n      // Safe to call `setState` inside conditional\n      // https://reactjs.org/docs/react-component.html#componentdidupdate\n      // eslint-disable-next-line  react/no-did-update-set-state\n      this.setState({\n        isVisible: true\n      });\n    }\n  }\n\n  _determineInvalidThumbMovement = (newVal, lower, upper, e) => {\n    // If the values are invalid, find whether the new value is in the upper\n    // or lower half and move the appropriate handle to the new value,\n    // while the other handle gets moved to the opposite bound (if invalid)\n    const lowerHalf = Math.abs(this.props.max - this.props.min) / 2 + this.props.min;\n    const newValIsLow = isWithinRange(this.props.min, lowerHalf, newVal);\n\n    if (newValIsLow) {\n      lower = newVal;\n      upper = !this.upperValueIsValid ? this.props.max : upper;\n    } else {\n      lower = !this.lowerValueIsValid ? this.props.min : lower;\n      upper = newVal;\n    }\n\n    this._handleOnChange(lower, upper, e);\n  };\n  _determineValidThumbMovement = (newVal, lower, upper, e) => {\n    // Lower thumb targeted or right-moving swap has occurred\n    if (Math.abs(lower - newVal) < Math.abs(upper - newVal)) {\n      lower = newVal;\n    } // Upper thumb targeted or left-moving swap has occurred\n    else {\n        upper = newVal;\n      }\n\n    this._handleOnChange(lower, upper, e);\n  };\n  _determineThumbMovement = (newVal, e) => {\n    // Determine thumb movement based on slider interaction\n    if (!this.isValid) {\n      // Non-standard positioning follows\n      this._determineInvalidThumbMovement(newVal, this.lowerValue, this.upperValue, e);\n    } else {\n      // Standard positioning based on click event proximity to thumb locations\n      this._determineValidThumbMovement(newVal, this.lowerValue, this.upperValue, e);\n    }\n  };\n  _handleOnChange = (lower, upper, e) => {\n    const isValid = isWithinRange(this.props.min, upper, lower) && isWithinRange(lower, this.props.max, upper);\n    this.props.onChange([lower, upper], isValid, e);\n  };\n  handleSliderChange = e => {\n    this._determineThumbMovement(Number(e.currentTarget.value), e);\n  };\n  _resetToRangeEnds = e => {\n    // Arbitrary decision to pass `min` instead of `max`. Result is the same.\n    this._determineInvalidThumbMovement(this.props.min, this.lowerValue, this.upperValue, e);\n  };\n  _isDirectionalKeyPress = event => {\n    return [keys.ARROW_UP, keys.ARROW_RIGHT, keys.ARROW_DOWN, keys.ARROW_LEFT].indexOf(event.key) > -1;\n  };\n  handleInputKeyDown = e => {\n    // Relevant only when initial values are both `''` and `showInput` is set\n    if (this._isDirectionalKeyPress(e) && !this.isValid) {\n      e.preventDefault();\n\n      this._resetToRangeEnds(e);\n    }\n  };\n  handleLowerInputChange = e => {\n    this._handleOnChange(e.target.value, this.upperValue, e);\n  };\n  handleUpperInputChange = e => {\n    this._handleOnChange(this.lowerValue, e.target.value, e);\n  };\n  _handleKeyDown = (value, event) => {\n    let newVal = Number(value);\n    let stepRemainder = 0;\n    const step = this.props.step || 1;\n\n    switch (event.key) {\n      case keys.ARROW_UP:\n      case keys.ARROW_RIGHT:\n        event.preventDefault();\n        newVal += step;\n        stepRemainder = (newVal - this.props.min) % step;\n\n        if (step !== 1 && stepRemainder > 0) {\n          newVal = newVal - stepRemainder;\n        }\n\n        break;\n\n      case keys.ARROW_DOWN:\n      case keys.ARROW_LEFT:\n        event.preventDefault();\n        newVal -= step;\n        stepRemainder = (newVal - this.props.min) % step;\n\n        if (step !== 1 && stepRemainder > 0) {\n          newVal = newVal + (step - stepRemainder);\n        }\n\n        break;\n    }\n\n    return newVal;\n  };\n  handleLowerKeyDown = event => {\n    let lower = this.lowerValue;\n\n    switch (event.key) {\n      case keys.TAB:\n        return;\n\n      default:\n        if (!this.lowerValueIsValid) {\n          // Relevant only when initial value is `''` and `showInput` is not set\n          event.preventDefault();\n\n          this._resetToRangeEnds(event);\n\n          return;\n        }\n\n        lower = this._handleKeyDown(lower, event);\n    }\n\n    if (lower >= this.upperValue || lower < this.props.min) return;\n\n    this._handleOnChange(lower, this.upperValue, event);\n  };\n  handleUpperKeyDown = event => {\n    let upper = this.upperValue;\n\n    switch (event.key) {\n      case keys.TAB:\n        return;\n\n      default:\n        if (!this.upperValueIsValid) {\n          // Relevant only when initial value is `''` and `showInput` is not set\n          event.preventDefault();\n\n          this._resetToRangeEnds(event);\n\n          return;\n        }\n\n        upper = this._handleKeyDown(upper, event);\n    }\n\n    if (upper <= this.lowerValue || upper > this.props.max) return;\n\n    this._handleOnChange(this.lowerValue, upper, event);\n  };\n  handleDraggableKeyDown = event => {\n    let lower = this.lowerValue;\n    let upper = this.upperValue;\n\n    switch (event.key) {\n      case keys.TAB:\n        return;\n\n      default:\n        lower = this._handleKeyDown(lower, event);\n        upper = this._handleKeyDown(upper, event);\n    }\n\n    if (lower >= this.upperValue || lower < this.props.min) return;\n    if (upper <= this.lowerValue || upper > this.props.max) return;\n\n    this._handleOnChange(lower, upper, event);\n  };\n  calculateThumbPositionStyle = (value, width) => {\n    const trackWidth = this.props.showInput === 'inputWithPopover' && !!width ? width : this.rangeSliderRef.clientWidth;\n    const position = calculateThumbPosition(value, this.props.min, this.props.max, trackWidth);\n    return {\n      left: `${position}%`\n    };\n  };\n  toggleHasFocus = (shouldFocused = !this.state.hasFocus) => {\n    this.setState({\n      hasFocus: shouldFocused\n    });\n  };\n  onThumbFocus = e => {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n\n    this.toggleHasFocus(true);\n  };\n  onThumbBlur = e => {\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n\n    this.toggleHasFocus(false);\n  };\n  onInputFocus = e => {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n\n    this.preventPopoverClose = true;\n    this.setState({\n      isPopoverOpen: true\n    });\n  };\n  onInputBlur = e => setTimeout(() => {\n    // Safari does not recognize any focus-related eventing for input[type=range]\n    // making it impossible to capture its state using active/focus/relatedTarget\n    // Instead, a prevention flag is set on mousedown, with a waiting period here.\n    // Mousedown is viable because in the popover case, it is inaccessible via keyboard (intentionally)\n    if (this.preventPopoverClose) {\n      this.preventPopoverClose = false;\n      return;\n    }\n\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n\n    this.closePopover();\n  }, 200);\n  closePopover = () => {\n    this.preventPopoverClose = false;\n    this.setState({\n      isPopoverOpen: false\n    });\n  };\n  onResize = width => {\n    this.setState({\n      rangeWidth: width\n    });\n  };\n  getNearestStep = value => {\n    const steps = (this.props.max - this.props.min) / this.props.step;\n    const approx = Math.round((value - this.props.min) * steps / (this.props.max - this.props.min)) / steps;\n    const bound = Math.min(Math.max(approx, 0), 1);\n    const nearest = bound * (this.props.max - this.props.min) + this.props.min;\n    return Number(nearest.toPrecision(10)) * 100 / 100;\n  };\n  handleDrag = (x, isFirstInteraction) => {\n    if (isFirstInteraction) {\n      this.leftPosition = x;\n      this.dragAcc = 0;\n    }\n\n    const {\n      min,\n      max\n    } = this.props;\n    const lowerValue = Number(this.lowerValue);\n    const upperValue = Number(this.upperValue);\n    const delta = this.leftPosition - x;\n    this.leftPosition = x;\n    this.dragAcc = this.dragAcc + delta;\n    const percentageOfArea = this.dragAcc / this.rangeSliderRef.clientWidth;\n    const percentageOfRange = percentageOfArea * (max - min);\n    const newLower = this.getNearestStep(lowerValue - percentageOfRange);\n    const newUpper = this.getNearestStep(upperValue - percentageOfRange);\n    const noMovement = newLower === lowerValue;\n    const isMin = min === lowerValue && min === newLower;\n    const isMax = max === upperValue && max === newUpper;\n    const isOutOfRange = newLower < min || newUpper > max;\n    if (noMovement || isMin || isMax || isOutOfRange) return;\n\n    this._handleOnChange(newLower, newUpper);\n\n    this.dragAcc = 0;\n  };\n\n  render() {\n    const {\n      className,\n      compressed,\n      disabled,\n      fullWidth,\n      readOnly,\n      id: propsId,\n      max,\n      min,\n      name,\n      step,\n      showLabels,\n      showInput,\n      showTicks,\n      tickInterval,\n      ticks,\n      levels,\n      onBlur,\n      onChange,\n      onFocus,\n      showRange,\n      value,\n      style,\n      isInvalid,\n      append,\n      prepend,\n      minInputProps,\n      maxInputProps,\n      isDraggable,\n      ...rest\n    } = this.props;\n    const {\n      id\n    } = this.state;\n    const digitTolerance = Math.max(String(min).length, String(max).length);\n    const showInputOnly = showInput === 'inputWithPopover';\n    const canShowDropdown = showInputOnly && !readOnly && !disabled;\n    const minInput = !!showInput ? <EuiRangeInput // Overridable props\n    aria-describedby={this.props['aria-describedby']} aria-label={this.props['aria-label']} {...minInputProps} // Non-overridable props\n    digitTolerance={digitTolerance} side=\"min\" min={min} max={Number(this.upperValue)} step={step} value={this.lowerValue} disabled={disabled} compressed={compressed} onChange={this.handleLowerInputChange} onKeyDown={this.handleInputKeyDown} name={`${name}-minValue`} onFocus={canShowDropdown ? this.onInputFocus : onFocus} onBlur={canShowDropdown ? this.onInputBlur : onBlur} readOnly={readOnly} autoSize={!showInputOnly} fullWidth={!!showInputOnly && fullWidth} isInvalid={isInvalid} controlOnly={showInputOnly} onMouseDown={showInputOnly ? () => this.preventPopoverClose = true : undefined} /> : undefined;\n    const maxInput = !!showInput ? <EuiRangeInput // Overridable props\n    aria-describedby={this.props['aria-describedby']} aria-label={this.props['aria-label']} {...maxInputProps} // Non-overridable props\n    digitTolerance={digitTolerance} side=\"max\" min={Number(this.lowerValue)} max={max} step={step} value={this.upperValue} disabled={disabled} compressed={compressed} onChange={this.handleUpperInputChange} onKeyDown={this.handleInputKeyDown} name={`${name}-maxValue`} onFocus={canShowDropdown ? this.onInputFocus : onFocus} onBlur={canShowDropdown ? this.onInputBlur : onBlur} readOnly={readOnly} autoSize={!showInputOnly} fullWidth={!!showInputOnly && fullWidth} controlOnly={showInputOnly} isInvalid={isInvalid} onMouseDown={showInputOnly ? () => this.preventPopoverClose = true : undefined} /> : undefined;\n    const classes = classNames('euiDualRange', className);\n    const leftThumbPosition = this.state.rangeSliderRefAvailable ? this.calculateThumbPositionStyle(Number(this.lowerValue) || min, this.state.rangeWidth) : {\n      left: '0'\n    };\n    const rightThumbPosition = this.state.rangeSliderRefAvailable ? this.calculateThumbPositionStyle(Number(this.upperValue) || max, this.state.rangeWidth) : {\n      left: '0'\n    };\n    const theRange = <EuiRangeWrapper className={classes} fullWidth={fullWidth} compressed={compressed}>\n        {showInput && !showInputOnly && <>\n            {minInput}\n            <div className={showTicks || ticks ? 'euiRange__slimHorizontalSpacer' : 'euiRange__horizontalSpacer'} />\n          </>}\n        {showLabels && <EuiRangeLabel side=\"min\" disabled={disabled}>\n            {min}\n          </EuiRangeLabel>}\n        <EuiRangeTrack compressed={compressed} disabled={disabled} max={max} min={min} step={step} showTicks={showTicks} tickInterval={tickInterval} ticks={ticks} levels={levels} onChange={this.handleSliderChange} value={value} aria-hidden={showInput === true}>\n          <EuiRangeSlider className=\"euiDualRange__slider\" ref={this.handleRangeSliderRefUpdate} id={id} name={name} min={min} max={max} step={step} disabled={disabled} compressed={compressed} onChange={this.handleSliderChange} style={style} showTicks={showTicks} hasFocus={this.state.hasFocus} aria-hidden={true} tabIndex={-1} showRange={showRange} onFocus={onFocus} onBlur={onBlur} {...rest} />\n\n          {showRange && this.isValid && <EuiRangeHighlight compressed={compressed} hasFocus={this.state.hasFocus} showTicks={showTicks} min={Number(min)} max={Number(max)} lowerValue={Number(this.lowerValue)} upperValue={Number(this.upperValue)} />}\n\n          {this.state.rangeSliderRefAvailable && <React.Fragment>\n              {isDraggable && this.isValid && <EuiRangeDraggable min={min} max={max} value={[Number(this.lowerValue), Number(this.upperValue)]} disabled={disabled} lowerPosition={leftThumbPosition.left} upperPosition={rightThumbPosition.left} showTicks={showTicks} compressed={compressed} onChange={this.handleDrag} onFocus={this.onThumbFocus} onBlur={this.onThumbBlur} onKeyDown={this.handleDraggableKeyDown} aria-describedby={this.props['aria-describedby']} aria-label={this.props['aria-label']} />}\n\n              <EuiRangeThumb min={min} max={Number(this.upperValue)} value={this.lowerValue} disabled={disabled} showTicks={showTicks} showInput={!!showInput} onKeyDown={this.handleLowerKeyDown} onFocus={this.onThumbFocus} onBlur={this.onThumbBlur} style={leftThumbPosition} aria-describedby={this.props['aria-describedby']} aria-label={this.props['aria-label']} />\n\n              <EuiRangeThumb min={Number(this.lowerValue)} max={max} value={this.upperValue} disabled={disabled} showTicks={showTicks} showInput={!!showInput} onKeyDown={this.handleUpperKeyDown} onFocus={this.onThumbFocus} onBlur={this.onThumbBlur} style={rightThumbPosition} aria-describedby={this.props['aria-describedby']} aria-label={this.props['aria-label']} />\n            </React.Fragment>}\n        </EuiRangeTrack>\n        {showLabels && <EuiRangeLabel disabled={disabled}>{max}</EuiRangeLabel>}\n        {showInput && !showInputOnly && <>\n            <div className={showTicks || ticks ? 'euiRange__slimHorizontalSpacer' : 'euiRange__horizontalSpacer'} />\n            {maxInput}\n          </>}\n      </EuiRangeWrapper>;\n    const thePopover = showInputOnly ? <EuiInputPopover className=\"euiRange__popover\" input={<EuiFormControlLayoutDelimited startControl={minInput} endControl={maxInput} isDisabled={disabled} fullWidth={fullWidth} compressed={compressed} readOnly={readOnly} append={append} prepend={prepend} />} fullWidth={fullWidth} isOpen={this.state.isPopoverOpen} closePopover={this.closePopover} disableFocusTrap={true} onPanelResize={this.onResize}>\n        {theRange}\n      </EuiInputPopover> : undefined;\n    return thePopover || theRange;\n  }\n\n}\nEuiDualRange.propTypes = {\n  value: PropTypes.any.isRequired,\n  onBlur: PropTypes.func,\n  onFocus: PropTypes.func,\n  onChange: PropTypes.func.isRequired,\n  fullWidth: PropTypes.bool,\n  isInvalid: PropTypes.bool,\n\n  /**\n     * Create colored indicators for certain intervals\n     */\n  levels: PropTypes.arrayOf(PropTypes.shape({\n    min: PropTypes.number.isRequired,\n    max: PropTypes.number.isRequired,\n    color: PropTypes.oneOf([\"primary\", \"success\", \"warning\", \"danger\"]).isRequired\n  }).isRequired),\n\n  /**\n     * Shows static min/max labels on the sides of the range slider\n     */\n  showLabels: PropTypes.bool,\n\n  /**\n     * Pass `true` to displays an extra input control for direct manipulation.\n     * Pass `'inputWithPopover'` to only show the input but show the range in a dropdown.\n     */\n  showInput: PropTypes.oneOfType([PropTypes.bool.isRequired, PropTypes.oneOf([\"inputWithPopover\"])]),\n\n  /**\n     * Modifies the number of tick marks and at what interval\n     */\n  tickInterval: PropTypes.number,\n\n  /**\n     * Specified ticks at specified values\n     */\n  ticks: PropTypes.arrayOf(PropTypes.shape({\n    value: PropTypes.number.isRequired,\n    label: PropTypes.node.isRequired\n  }).isRequired),\n\n  /**\n     * Creates an input group with element(s) coming before input.  Will only show if `showInput = inputWithPopover`.\n     * `string` | `ReactElement` or an array of these\n     */\n  prepend: PropTypes.oneOfType([PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.element.isRequired]).isRequired, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.element.isRequired]).isRequired).isRequired]),\n\n  /**\n     * Creates an input group with element(s) coming after input. Will only show if `showInput = inputWithPopover`.\n     * `string` | `ReactElement` or an array of these\n     */\n  append: PropTypes.oneOfType([PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.element.isRequired]).isRequired, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.element.isRequired]).isRequired).isRequired]),\n\n  /**\n     *  Intended to be uses with aria attributes. Some attributes may be overwritten.\n     */\n  minInputProps: PropTypes.any,\n\n  /**\n     *  Intended to be uses with aria attributes. Some attributes may be overwritten.\n     */\n  maxInputProps: PropTypes.any,\n\n  /**\n     *  Creates a draggble highlighted range area\n     */\n  isDraggable: PropTypes.bool\n};\n\ntry {\n  EuiDualRange.__docgenInfo = {\n    description: '',\n    displayName: 'EuiDualRange',\n    methods: [],\n    props: {\n      value: {\n        defaultValue: null,\n        description: '',\n        name: 'value',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: true,\n        type: {\n          name: '[ReactText, ReactText]'\n        }\n      },\n      onBlur: {\n        defaultValue: null,\n        description: '',\n        name: 'onBlur',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: '(event: any) => void'\n        }\n      },\n      onFocus: {\n        defaultValue: null,\n        description: '',\n        name: 'onFocus',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: '(event: any) => void'\n        }\n      },\n      onChange: {\n        defaultValue: null,\n        description: '',\n        name: 'onChange',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: true,\n        type: {\n          name: '(values: [ReactText, ReactText], isValid: boolean, event?: any) => void'\n        }\n      },\n      fullWidth: {\n        defaultValue: {\n          value: 'false'\n        },\n        description: '',\n        name: 'fullWidth',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      isInvalid: {\n        defaultValue: null,\n        description: '',\n        name: 'isInvalid',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      levels: {\n        defaultValue: {\n          value: '[]'\n        },\n        description: 'Create colored indicators for certain intervals',\n        name: 'levels',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'EuiRangeLevel[]'\n        }\n      },\n      showLabels: {\n        defaultValue: {\n          value: 'false'\n        },\n        description: 'Shows static min/max labels on the sides of the range slider',\n        name: 'showLabels',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      showInput: {\n        defaultValue: {\n          value: 'false'\n        },\n        description: 'Pass `true` to displays an extra input control for direct manipulation.\\n' + \"Pass `'inputWithPopover'` to only show the input but show the range in a dropdown.\",\n        name: 'showInput',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean | \"inputWithPopover\"'\n        }\n      },\n      tickInterval: {\n        defaultValue: null,\n        description: 'Modifies the number of tick marks and at what interval',\n        name: 'tickInterval',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'number'\n        }\n      },\n      ticks: {\n        defaultValue: null,\n        description: 'Specified ticks at specified values',\n        name: 'ticks',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'EuiRangeTick[]'\n        }\n      },\n      prepend: {\n        defaultValue: null,\n        description: 'Creates an input group with element(s) coming before input.  Will only show if `showInput = inputWithPopover`.\\n' + '`string` | `ReactElement` or an array of these',\n        name: 'prepend',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'PrependAppendType'\n        }\n      },\n      append: {\n        defaultValue: null,\n        description: 'Creates an input group with element(s) coming after input. Will only show if `showInput = inputWithPopover`.\\n' + '`string` | `ReactElement` or an array of these',\n        name: 'append',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'PrependAppendType'\n        }\n      },\n      minInputProps: {\n        defaultValue: null,\n        description: 'Intended to be uses with aria attributes. Some attributes may be overwritten.',\n        name: 'minInputProps',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'Partial<EuiRangeInputProps>'\n        }\n      },\n      maxInputProps: {\n        defaultValue: null,\n        description: 'Intended to be uses with aria attributes. Some attributes may be overwritten.',\n        name: 'maxInputProps',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'Partial<EuiRangeInputProps>'\n        }\n      },\n      isDraggable: {\n        defaultValue: null,\n        description: 'Creates a draggble highlighted range area',\n        name: 'isDraggable',\n        parent: {\n          fileName: 'eui/src/components/form/range/dual_range.tsx',\n          name: 'EuiDualRangeProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      className: {\n        defaultValue: null,\n        description: '',\n        name: 'className',\n        parent: {\n          fileName: 'eui/node_modules/@types/react/index.d.ts',\n          name: 'HTMLAttributes'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      'aria-label': {\n        defaultValue: null,\n        description: 'Defines a string value that labels the current element.\\n' + '@see aria-labelledby.',\n        name: 'aria-label',\n        parent: {\n          fileName: 'eui/node_modules/@types/react/index.d.ts',\n          name: 'AriaAttributes'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      'data-test-subj': {\n        defaultValue: null,\n        description: '',\n        name: 'data-test-subj',\n        parent: {\n          fileName: 'eui/src/components/common.ts',\n          name: 'CommonProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      compressed: {\n        defaultValue: {\n          value: 'false'\n        },\n        description: '',\n        name: 'compressed',\n        parent: undefined,\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      hasFocus: {\n        defaultValue: null,\n        description: '',\n        name: 'hasFocus',\n        parent: undefined,\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      showRange: {\n        defaultValue: {\n          value: 'true'\n        },\n        description: '',\n        name: 'showRange',\n        parent: undefined,\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      showTicks: {\n        defaultValue: {\n          value: 'false'\n        },\n        description: '',\n        name: 'showTicks',\n        parent: undefined,\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      }\n    },\n    extendedInterfaces: ['EuiDualRangeProps', 'HTMLAttributes', 'InputHTMLAttributes', 'AriaAttributes', 'DOMAttributes', 'CommonProps']\n  };\n} catch (e) {}"]}]}