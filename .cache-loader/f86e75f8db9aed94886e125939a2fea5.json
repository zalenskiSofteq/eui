{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\date_picker\\super_date_picker\\pretty_duration.ts","dependencies":[{"path":"D:\\work\\eui\\src\\components\\date_picker\\super_date_picker\\pretty_duration.ts","mtime":1649070093378},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KaW1wb3J0IGRhdGVNYXRoIGZyb20gJ0BlbGFzdGljL2RhdGVtYXRoJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGltcG9ydC9uYW1lZAoKaW1wb3J0IHsgdGltZVVuaXRzLCB0aW1lVW5pdHNQbHVyYWwgfSBmcm9tICcuL3RpbWVfdW5pdHMnOwppbXBvcnQgeyBnZXREYXRlTW9kZSwgREFURV9NT0RFUyB9IGZyb20gJy4vZGF0ZV9tb2Rlcyc7CmltcG9ydCB7IHBhcnNlUmVsYXRpdmVQYXJ0cyB9IGZyb20gJy4vcmVsYXRpdmVfdXRpbHMnOwp2YXIgSVNPX0ZPUk1BVCA9ICdZWVlZLU1NLUREVEhIOm1tOnNzLlNTU1onOwpleHBvcnQgdmFyIGNvbW1vbkR1cmF0aW9uUmFuZ2VzID0gW3sKICBzdGFydDogJ25vdy9kJywKICBlbmQ6ICdub3cvZCcsCiAgbGFiZWw6ICdUb2RheScKfSwgewogIHN0YXJ0OiAnbm93L3cnLAogIGVuZDogJ25vdy93JywKICBsYWJlbDogJ1RoaXMgd2VlaycKfSwgewogIHN0YXJ0OiAnbm93L00nLAogIGVuZDogJ25vdy9NJywKICBsYWJlbDogJ1RoaXMgbW9udGgnCn0sIHsKICBzdGFydDogJ25vdy95JywKICBlbmQ6ICdub3cveScsCiAgbGFiZWw6ICdUaGlzIHllYXInCn0sIHsKICBzdGFydDogJ25vdy0xZC9kJywKICBlbmQ6ICdub3ctMWQvZCcsCiAgbGFiZWw6ICdZZXN0ZXJkYXknCn0sIHsKICBzdGFydDogJ25vdy93JywKICBlbmQ6ICdub3cnLAogIGxhYmVsOiAnV2VlayB0byBkYXRlJwp9LCB7CiAgc3RhcnQ6ICdub3cvTScsCiAgZW5kOiAnbm93JywKICBsYWJlbDogJ01vbnRoIHRvIGRhdGUnCn0sIHsKICBzdGFydDogJ25vdy95JywKICBlbmQ6ICdub3cnLAogIGxhYmVsOiAnWWVhciB0byBkYXRlJwp9XTsKCmZ1bmN0aW9uIGNhbnRMb29rdXAodGltZUZyb20sIHRpbWVUbywgZGF0ZUZvcm1hdCkgewogIHZhciBkaXNwbGF5RnJvbSA9IGZvcm1hdFRpbWVTdHJpbmcodGltZUZyb20sIGRhdGVGb3JtYXQpOwogIHZhciBkaXNwbGF5VG8gPSBmb3JtYXRUaW1lU3RyaW5nKHRpbWVUbywgZGF0ZUZvcm1hdCwgdHJ1ZSk7CiAgcmV0dXJuICIiLmNvbmNhdChkaXNwbGF5RnJvbSwgIiB0byAiKS5jb25jYXQoZGlzcGxheVRvKTsKfQoKZnVuY3Rpb24gaXNSZWxhdGl2ZVRvTm93KHRpbWVGcm9tLCB0aW1lVG8pIHsKICB2YXIgZnJvbURhdGVNb2RlID0gZ2V0RGF0ZU1vZGUodGltZUZyb20pOwogIHZhciB0b0RhdGVNb2RlID0gZ2V0RGF0ZU1vZGUodGltZVRvKTsKICB2YXIgaXNMYXN0ID0gZnJvbURhdGVNb2RlID09PSBEQVRFX01PREVTLlJFTEFUSVZFICYmIHRvRGF0ZU1vZGUgPT09IERBVEVfTU9ERVMuTk9XOwogIHZhciBpc05leHQgPSBmcm9tRGF0ZU1vZGUgPT09IERBVEVfTU9ERVMuTk9XICYmIHRvRGF0ZU1vZGUgPT09IERBVEVfTU9ERVMuUkVMQVRJVkU7CiAgcmV0dXJuIGlzTGFzdCB8fCBpc05leHQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUaW1lU3RyaW5nKHRpbWVTdHJpbmcsIGRhdGVGb3JtYXQpIHsKICB2YXIgcm91bmRVcCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgdmFyIGxvY2FsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJ2VuJzsKICB2YXIgdGltZUFzTW9tZW50ID0gbW9tZW50KHRpbWVTdHJpbmcsIElTT19GT1JNQVQsIHRydWUpOwoKICBpZiAodGltZUFzTW9tZW50LmlzVmFsaWQoKSkgewogICAgcmV0dXJuIHRpbWVBc01vbWVudC5sb2NhbGUobG9jYWxlKS5mb3JtYXQoZGF0ZUZvcm1hdCk7CiAgfQoKICBpZiAodGltZVN0cmluZyA9PT0gJ25vdycpIHsKICAgIHJldHVybiAnbm93JzsKICB9CgogIHZhciB0cnlQYXJzZSA9IGRhdGVNYXRoLnBhcnNlKHRpbWVTdHJpbmcsIHsKICAgIHJvdW5kVXA6IHJvdW5kVXAKICB9KTsKCiAgaWYgKG1vbWVudC5pc01vbWVudCh0cnlQYXJzZSkpIHsKICAgIHJldHVybiAifiAiLmNvbmNhdCh0cnlQYXJzZS5sb2NhbGUobG9jYWxlKS5mcm9tTm93KCkpOwogIH0KCiAgcmV0dXJuIHRpbWVTdHJpbmc7Cn0KZXhwb3J0IGZ1bmN0aW9uIHByZXR0eUR1cmF0aW9uKHRpbWVGcm9tLCB0aW1lVG8pIHsKICB2YXIgcXVpY2tSYW5nZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IFtdOwogIHZhciBkYXRlRm9ybWF0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgdmFyIG1hdGNoaW5nUXVpY2tSYW5nZSA9IHF1aWNrUmFuZ2VzLmZpbmQoZnVuY3Rpb24gKF9yZWYpIHsKICAgIHZhciBxdWlja0Zyb20gPSBfcmVmLnN0YXJ0LAogICAgICAgIHF1aWNrVG8gPSBfcmVmLmVuZDsKICAgIHJldHVybiB0aW1lRnJvbSA9PT0gcXVpY2tGcm9tICYmIHRpbWVUbyA9PT0gcXVpY2tUbzsKICB9KTsKCiAgaWYgKG1hdGNoaW5nUXVpY2tSYW5nZSAmJiBtYXRjaGluZ1F1aWNrUmFuZ2UubGFiZWwpIHsKICAgIHJldHVybiBtYXRjaGluZ1F1aWNrUmFuZ2UubGFiZWw7CiAgfQoKICBpZiAoaXNSZWxhdGl2ZVRvTm93KHRpbWVGcm9tLCB0aW1lVG8pKSB7CiAgICB2YXIgdGltZVRlbnNlOwogICAgdmFyIHJlbGF0aXZlUGFydHM7CgogICAgaWYgKGdldERhdGVNb2RlKHRpbWVUbykgPT09IERBVEVfTU9ERVMuTk9XKSB7CiAgICAgIHRpbWVUZW5zZSA9ICdMYXN0JzsKICAgICAgcmVsYXRpdmVQYXJ0cyA9IHBhcnNlUmVsYXRpdmVQYXJ0cyh0aW1lRnJvbSk7CiAgICB9IGVsc2UgewogICAgICB0aW1lVGVuc2UgPSAnTmV4dCc7CiAgICAgIHJlbGF0aXZlUGFydHMgPSBwYXJzZVJlbGF0aXZlUGFydHModGltZVRvKTsKICAgIH0KCiAgICB2YXIgY291bnRUaW1lVW5pdCA9IHJlbGF0aXZlUGFydHMudW5pdC5zdWJzdHJpbmcoMCwgMSk7CiAgICB2YXIgY291bnRUaW1lVW5pdEZ1bGxOYW1lID0gcmVsYXRpdmVQYXJ0cy5jb3VudCA+IDEgPyB0aW1lVW5pdHNQbHVyYWxbY291bnRUaW1lVW5pdF0gOiB0aW1lVW5pdHNbY291bnRUaW1lVW5pdF07CiAgICB2YXIgdGV4dCA9ICIiLmNvbmNhdCh0aW1lVGVuc2UsICIgIikuY29uY2F0KHJlbGF0aXZlUGFydHMuY291bnQsICIgIikuY29uY2F0KGNvdW50VGltZVVuaXRGdWxsTmFtZSk7CgogICAgaWYgKHJlbGF0aXZlUGFydHMucm91bmQgJiYgcmVsYXRpdmVQYXJ0cy5yb3VuZFVuaXQpIHsKICAgICAgdGV4dCArPSAiIHJvdW5kZWQgdG8gdGhlICIuY29uY2F0KHRpbWVVbml0c1tyZWxhdGl2ZVBhcnRzLnJvdW5kVW5pdF0pOwogICAgfQoKICAgIHJldHVybiB0ZXh0OwogIH0KCiAgcmV0dXJuIGNhbnRMb29rdXAodGltZUZyb20sIHRpbWVUbywgZGF0ZUZvcm1hdCk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHNob3dQcmV0dHlEdXJhdGlvbih0aW1lRnJvbSwgdGltZVRvKSB7CiAgdmFyIHF1aWNrUmFuZ2VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBbXTsKICB2YXIgbWF0Y2hpbmdRdWlja1JhbmdlID0gcXVpY2tSYW5nZXMuZmluZChmdW5jdGlvbiAoX3JlZjIpIHsKICAgIHZhciBxdWlja0Zyb20gPSBfcmVmMi5zdGFydCwKICAgICAgICBxdWlja1RvID0gX3JlZjIuZW5kOwogICAgcmV0dXJuIHRpbWVGcm9tID09PSBxdWlja0Zyb20gJiYgdGltZVRvID09PSBxdWlja1RvOwogIH0pOwoKICBpZiAobWF0Y2hpbmdRdWlja1JhbmdlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiBpc1JlbGF0aXZlVG9Ob3codGltZUZyb20sIHRpbWVUbyk7Cn0="},{"version":3,"sources":["D:/work/eui/src/components/date_picker/super_date_picker/pretty_duration.ts"],"names":["dateMath","moment","timeUnits","timeUnitsPlural","getDateMode","DATE_MODES","parseRelativeParts","ISO_FORMAT","commonDurationRanges","start","end","label","cantLookup","timeFrom","timeTo","dateFormat","displayFrom","formatTimeString","displayTo","isRelativeToNow","fromDateMode","toDateMode","isLast","RELATIVE","NOW","isNext","timeString","roundUp","locale","timeAsMoment","isValid","format","tryParse","parse","isMoment","fromNow","prettyDuration","quickRanges","matchingQuickRange","find","quickFrom","quickTo","timeTense","relativeParts","countTimeUnit","unit","substring","countTimeUnitFullName","count","text","round","roundUnit","showPrettyDuration"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport dateMath from '@elastic/datemath';\nimport moment, { LocaleSpecifier } from 'moment'; // eslint-disable-line import/named\nimport { timeUnits, timeUnitsPlural } from './time_units';\nimport { getDateMode, DATE_MODES } from './date_modes';\nimport { parseRelativeParts } from './relative_utils';\nimport { DurationRange, TimeUnitId, ShortDate } from '../types';\n\nconst ISO_FORMAT = 'YYYY-MM-DDTHH:mm:ss.SSSZ';\n\nexport const commonDurationRanges: DurationRange[] = [\n  { start: 'now/d', end: 'now/d', label: 'Today' },\n  { start: 'now/w', end: 'now/w', label: 'This week' },\n  { start: 'now/M', end: 'now/M', label: 'This month' },\n  { start: 'now/y', end: 'now/y', label: 'This year' },\n  { start: 'now-1d/d', end: 'now-1d/d', label: 'Yesterday' },\n  { start: 'now/w', end: 'now', label: 'Week to date' },\n  { start: 'now/M', end: 'now', label: 'Month to date' },\n  { start: 'now/y', end: 'now', label: 'Year to date' },\n];\n\nfunction cantLookup(timeFrom: string, timeTo: string, dateFormat: string) {\n  const displayFrom = formatTimeString(timeFrom, dateFormat);\n  const displayTo = formatTimeString(timeTo, dateFormat, true);\n  return `${displayFrom} to ${displayTo}`;\n}\n\nfunction isRelativeToNow(timeFrom: ShortDate, timeTo: ShortDate) {\n  const fromDateMode = getDateMode(timeFrom);\n  const toDateMode = getDateMode(timeTo);\n  const isLast =\n    fromDateMode === DATE_MODES.RELATIVE && toDateMode === DATE_MODES.NOW;\n  const isNext =\n    fromDateMode === DATE_MODES.NOW && toDateMode === DATE_MODES.RELATIVE;\n  return isLast || isNext;\n}\n\nexport function formatTimeString(\n  timeString: string,\n  dateFormat: string,\n  roundUp = false,\n  locale: LocaleSpecifier = 'en'\n) {\n  const timeAsMoment = moment(timeString, ISO_FORMAT, true);\n  if (timeAsMoment.isValid()) {\n    return timeAsMoment.locale(locale).format(dateFormat);\n  }\n\n  if (timeString === 'now') {\n    return 'now';\n  }\n\n  const tryParse = dateMath.parse(timeString, { roundUp: roundUp });\n  if (moment.isMoment(tryParse)) {\n    return `~ ${tryParse.locale(locale).fromNow()}`;\n  }\n\n  return timeString;\n}\n\nexport function prettyDuration(\n  timeFrom: ShortDate,\n  timeTo: ShortDate,\n  quickRanges: DurationRange[] = [],\n  dateFormat: string\n) {\n  const matchingQuickRange = quickRanges.find(\n    ({ start: quickFrom, end: quickTo }) => {\n      return timeFrom === quickFrom && timeTo === quickTo;\n    }\n  );\n  if (matchingQuickRange && matchingQuickRange.label) {\n    return matchingQuickRange.label;\n  }\n\n  if (isRelativeToNow(timeFrom, timeTo)) {\n    let timeTense;\n    let relativeParts;\n    if (getDateMode(timeTo) === DATE_MODES.NOW) {\n      timeTense = 'Last';\n      relativeParts = parseRelativeParts(timeFrom);\n    } else {\n      timeTense = 'Next';\n      relativeParts = parseRelativeParts(timeTo);\n    }\n    const countTimeUnit = relativeParts.unit.substring(0, 1) as TimeUnitId;\n    const countTimeUnitFullName =\n      relativeParts.count > 1\n        ? timeUnitsPlural[countTimeUnit]\n        : timeUnits[countTimeUnit];\n    let text = `${timeTense} ${relativeParts.count} ${countTimeUnitFullName}`;\n    if (relativeParts.round && relativeParts.roundUnit) {\n      text += ` rounded to the ${timeUnits[relativeParts.roundUnit]}`;\n    }\n    return text;\n  }\n\n  return cantLookup(timeFrom, timeTo, dateFormat);\n}\n\nexport function showPrettyDuration(\n  timeFrom: ShortDate,\n  timeTo: ShortDate,\n  quickRanges: DurationRange[] = []\n) {\n  const matchingQuickRange = quickRanges.find(\n    ({ start: quickFrom, end: quickTo }) => {\n      return timeFrom === quickFrom && timeTo === quickTo;\n    }\n  );\n  if (matchingQuickRange) {\n    return true;\n  }\n\n  return isRelativeToNow(timeFrom, timeTo);\n}\n"]}]}