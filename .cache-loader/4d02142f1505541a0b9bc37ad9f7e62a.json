{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\services\\color\\color_palette.ts","dependencies":[{"path":"D:\\work\\eui\\src\\services\\color\\color_palette.ts","mtime":1649070093828},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmV2ZXJzZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwppbXBvcnQgY2hyb21hIGZyb20gJ2Nocm9tYS1qcyc7CmV4cG9ydCB2YXIgTUlEX0NPTE9SX1NUT1AgPSAnI0VCRUZGNSc7Ci8qKgogKiBUaGlzIGZ1bmN0aW9uIHRha2VzIGFuIGFycmF5IG9mIGNvbG9ycyBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBpbnRlcnBvbGF0ZWQKICogY29sb3JzIGJhc2VkIG9uIHRoZSBudW1iZXIgb2Ygc3RlcHMvbGVuIG5lZWRlZCBmb3IgdXNlIGluIFVJIGVsZW1lbnRzIHN1Y2ggYXMgY2hhcnRzLgogKiBEZXJpdmVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2drYS9wYWxldHRlcyAoVW5saWNlbnNlZCkKICovCgpleHBvcnQgZnVuY3Rpb24gY29sb3JQYWxldHRlKAovKioKICogVGhlIG1haW4gY29sb3IgY29kZSBvciBhcnJheSBvZiBjb2RlcwogKi8KY29sb3JzKSB7CiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTA7CiAgdmFyIGRpdmVyZ2luZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgdmFyIGNhdGVnb3JpY2FsID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICB2YXIgaGV4U3RhcnQgPSBjb2xvcnMuc2xpY2UoKTsKICB2YXIgaGV4RW5kID0gW107CiAgdmFyIGV2ZW4gPSBsZW4gJSAyID09PSAwOwogIHZhciBudW1Db2xvcnNMZWZ0ID0gZGl2ZXJnaW5nID8gTWF0aC5jZWlsKGxlbiAvIDIpICsgKGV2ZW4gPyAxIDogMCkgOiBsZW47CiAgdmFyIG51bUNvbG9yc1JpZ2h0ID0gZGl2ZXJnaW5nID8gTWF0aC5jZWlsKGxlbiAvIDIpICsgKGV2ZW4gPyAxIDogMCkgOiAwOyAvLyBJZiBvbmx5IGEgc2luZ2xlIGNvbG9yIGlzIHByb3ZpZGVkIHByZXBlbmQgdGhlIG1pZC1wb2ludCBjb2xvcgoKICBpZiAoaGV4U3RhcnQubGVuZ3RoID09PSAxKSB7CiAgICBoZXhTdGFydC51bnNoaWZ0KE1JRF9DT0xPUl9TVE9QKTsKICB9IC8vIElmIGRpdmVyZ2luZywgc3BsaXQgdGhlIHN0YXJ0IGFycmF5IGFuZCBkdXBsaWNhdGUgdGhlIG1pZCBjb2xvcgoKCiAgaWYgKGRpdmVyZ2luZykgewogICAgLy8gSWYgdGhlcmUncyBubyBtaWRwb2ludCwgY3JlYXRlIG9uZQogICAgaWYgKGhleFN0YXJ0Lmxlbmd0aCA8IDMpIHsKICAgICAgaGV4U3RhcnRbMl0gPSBoZXhTdGFydFsxXTsKICAgICAgaGV4U3RhcnRbMV0gPSBNSURfQ09MT1JfU1RPUDsKICAgIH0KCiAgICB2YXIgbnVtQ29sb3JzSGFsZiA9IE1hdGguY2VpbChoZXhTdGFydC5sZW5ndGggLyAyKTsKICAgIHZhciBjb2xvcnNMZWZ0ID0gaGV4U3RhcnQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICBpZiAoaW5kZXggPCBudW1Db2xvcnNIYWxmKSB7CiAgICAgICAgcmV0dXJuIHRydWU7IC8vIGtlZXAgaXQKICAgICAgfQogICAgfSk7CiAgICB2YXIgY29sb3JzUmlnaHQgPSBoZXhTdGFydC5yZXZlcnNlKCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICBpZiAoaW5kZXggPCBudW1Db2xvcnNIYWxmKSB7CiAgICAgICAgcmV0dXJuIHRydWU7IC8vIGtlZXAgaXQKICAgICAgfQogICAgfSkucmV2ZXJzZSgpOwogICAgaGV4U3RhcnQgPSBjb2xvcnNMZWZ0OwogICAgaGV4RW5kID0gY29sb3JzUmlnaHQ7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVTdGVwcyhjb2xvcnMsIHN0ZXBzKSB7CiAgICBpZiAoIWNvbG9ycy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGNvbG9yczsKICAgIH0KCiAgICBpZiAoIWNhdGVnb3JpY2FsKSB7CiAgICAgIHJldHVybiBjaHJvbWEuYmV6aWVyKGNvbG9ycykuc2NhbGUoKS5jb3JyZWN0TGlnaHRuZXNzKCkuY29sb3JzKHN0ZXBzKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjaHJvbWEuc2NhbGUoY29sb3JzKS5jb2xvcnMoc3RlcHMpOwogICAgfQogIH0KCiAgdmFyIHN0ZXBzTGVmdCA9IGNyZWF0ZVN0ZXBzKGhleFN0YXJ0LCBudW1Db2xvcnNMZWZ0KTsKICB2YXIgc3RlcHNSaWdodCA9IGNyZWF0ZVN0ZXBzKGhleEVuZCwgbnVtQ29sb3JzUmlnaHQpOwogIHJldHVybiAoZXZlbiAmJiBkaXZlcmdpbmcgPyBzdGVwc0xlZnQuc2xpY2UoMCwgc3RlcHNMZWZ0Lmxlbmd0aCAtIDEpIDogc3RlcHNMZWZ0KS5jb25jYXQoc3RlcHNSaWdodC5zbGljZSgxKSk7Cn0KCnRyeSB7CiAgY29sb3JQYWxldHRlLl9fZG9jZ2VuSW5mbyA9IHsKICAgIGRlc2NyaXB0aW9uOiAnVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiBhcnJheSBvZiBjb2xvcnMgYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgaW50ZXJwb2xhdGVkXG4nICsgJ2NvbG9ycyBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHN0ZXBzL2xlbiBuZWVkZWQgZm9yIHVzZSBpbiBVSSBlbGVtZW50cyBzdWNoIGFzIGNoYXJ0cy5cbicgKyAnRGVyaXZlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9na2EvcGFsZXR0ZXMgKFVubGljZW5zZWQpJywKICAgIGRpc3BsYXlOYW1lOiAnY29sb3JQYWxldHRlJywKICAgIG1ldGhvZHM6IFtdLAogICAgcHJvcHM6IHt9LAogICAgZXh0ZW5kZWRJbnRlcmZhY2VzOiBbXQogIH07Cn0gY2F0Y2ggKGUpIHt9"},{"version":3,"sources":["D:/work/eui/src/services/color/color_palette.ts"],"names":["chroma","MID_COLOR_STOP","colorPalette","colors","len","diverging","categorical","hexStart","slice","hexEnd","even","numColorsLeft","Math","ceil","numColorsRight","length","unshift","numColorsHalf","colorsLeft","filter","item","index","colorsRight","reverse","createSteps","steps","bezier","scale","correctLightness","stepsLeft","stepsRight","concat"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport chroma from 'chroma-js';\n\nexport const MID_COLOR_STOP = '#EBEFF5';\n\n/**\n * This function takes an array of colors and returns an array of interpolated\n * colors based on the number of steps/len needed for use in UI elements such as charts.\n * Derived from https://github.com/gka/palettes (Unlicensed)\n */\n\nexport function colorPalette(\n  /**\n   * The main color code or array of codes\n   */\n  colors: string[],\n  /**\n   * The number of colors in the resulting array (default 10)\n   */\n  len: number = 10,\n  /**\n   * Forces color interpolation to be calculated separately for each half (default false)\n   */\n  diverging: boolean = false,\n  /**\n   * Uses a more static interpolation for non-continuous spectrums\n   */\n  categorical: boolean = false\n) {\n  let hexStart: string[] = colors.slice();\n  let hexEnd: string[] = [];\n\n  const even = len % 2 === 0;\n  const numColorsLeft = diverging ? Math.ceil(len / 2) + (even ? 1 : 0) : len;\n  const numColorsRight = diverging ? Math.ceil(len / 2) + (even ? 1 : 0) : 0;\n\n  // If only a single color is provided prepend the mid-point color\n  if (hexStart.length === 1) {\n    hexStart.unshift(MID_COLOR_STOP);\n  }\n\n  // If diverging, split the start array and duplicate the mid color\n  if (diverging) {\n    // If there's no midpoint, create one\n    if (hexStart.length < 3) {\n      hexStart[2] = hexStart[1];\n      hexStart[1] = MID_COLOR_STOP;\n    }\n\n    const numColorsHalf = Math.ceil(hexStart.length / 2);\n\n    const colorsLeft = hexStart.filter(function (item, index) {\n      if (index < numColorsHalf) {\n        return true; // keep it\n      }\n    });\n    const colorsRight = hexStart\n      .reverse()\n      .filter(function (item, index) {\n        if (index < numColorsHalf) {\n          return true; // keep it\n        }\n      })\n      .reverse();\n\n    hexStart = colorsLeft;\n    hexEnd = colorsRight;\n  }\n\n  function createSteps(colors: string[], steps: number) {\n    if (!colors.length) {\n      return colors;\n    }\n\n    if (!categorical) {\n      return chroma.bezier(colors).scale().correctLightness().colors(steps);\n    } else {\n      return chroma.scale(colors).colors(steps);\n    }\n  }\n\n  const stepsLeft = createSteps(hexStart, numColorsLeft);\n  const stepsRight = createSteps(hexEnd, numColorsRight);\n\n  return (even && diverging\n    ? stepsLeft.slice(0, stepsLeft.length - 1)\n    : stepsLeft\n  ).concat(stepsRight.slice(1));\n}\n"]}]}