{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\code\\_code_block.tsx","dependencies":[{"path":"D:\\work\\eui\\src\\components\\code\\_code_block.tsx","mtime":1649070093319},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKCmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmltcG9ydCBQcm9wVHlwZXMgZnJvbSAicHJvcC10eXBlcyI7CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgeyBoaWdobGlnaHQgfSBmcm9tICdyZWZyYWN0b3InOwppbXBvcnQgeyBrZXlzLCB1c2VDb21iaW5lZFJlZnMgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcyc7CmltcG9ydCB7IEV1aUJ1dHRvbkljb24gfSBmcm9tICcuLi9idXR0b24nOwppbXBvcnQgeyBrZXlzT2YgfSBmcm9tICcuLi9jb21tb24nOwppbXBvcnQgeyBFdWlDb3B5IH0gZnJvbSAnLi4vY29weSc7CmltcG9ydCB7IEV1aUZvY3VzVHJhcCB9IGZyb20gJy4uL2ZvY3VzX3RyYXAnOwppbXBvcnQgeyBFdWlJMThuIH0gZnJvbSAnLi4vaTE4bic7CmltcG9ydCB7IHVzZUlubmVyVGV4dCB9IGZyb20gJy4uL2lubmVyX3RleHQnOwppbXBvcnQgeyB1c2VNdXRhdGlvbk9ic2VydmVyIH0gZnJvbSAnLi4vb2JzZXJ2ZXIvbXV0YXRpb25fb2JzZXJ2ZXInOwppbXBvcnQgeyB1c2VSZXNpemVPYnNlcnZlciB9IGZyb20gJy4uL29ic2VydmVyL3Jlc2l6ZV9vYnNlcnZlcic7CmltcG9ydCB7IEV1aU92ZXJsYXlNYXNrIH0gZnJvbSAnLi4vb3ZlcmxheV9tYXNrJzsKCnZhciBpc0FzdEVsZW1lbnQgPSBmdW5jdGlvbiBpc0FzdEVsZW1lbnQobm9kZSkgewogIHJldHVybiBub2RlLmhhc093blByb3BlcnR5KCd0eXBlJykgJiYgbm9kZS50eXBlID09PSAnZWxlbWVudCc7Cn07Cgp2YXIgbm9kZVRvSHRtbCA9IGZ1bmN0aW9uIG5vZGVUb0h0bWwobm9kZSwgaWR4LCBub2RlcykgewogIHZhciBkZXB0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMDsKCiAgaWYgKGlzQXN0RWxlbWVudChub2RlKSkgewogICAgdmFyIHByb3BlcnRpZXMgPSBub2RlLnByb3BlcnRpZXMsCiAgICAgICAgdGFnTmFtZSA9IG5vZGUudGFnTmFtZSwKICAgICAgICBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wZXJ0aWVzKSwge30sIHsKICAgICAga2V5OiAibm9kZS0iLmNvbmNhdChkZXB0aCwgIi0iKS5jb25jYXQoaWR4KSwKICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHByb3BlcnRpZXMuY2xhc3NOYW1lKQogICAgfSksIGNoaWxkcmVuICYmIGNoaWxkcmVuLm1hcChmdW5jdGlvbiAoZWwsIGkpIHsKICAgICAgcmV0dXJuIG5vZGVUb0h0bWwoZWwsIGksIG5vZGVzLCBkZXB0aCArIDEpOwogICAgfSkpOwogIH0KCiAgcmV0dXJuIG5vZGUudmFsdWU7Cn07Cgp2YXIgYWRkTGluZURhdGEgPSBmdW5jdGlvbiBhZGRMaW5lRGF0YShub2RlcykgewogIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7CiAgICBsaW5lTnVtYmVyOiAxCiAgfTsKICByZXR1cm4gbm9kZXMucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIG5vZGUpIHsKICAgIHZhciBsaW5lU3RhcnQgPSBkYXRhLmxpbmVOdW1iZXI7CgogICAgaWYgKG5vZGUudHlwZSA9PT0gJ3RleHQnKSB7CiAgICAgIGlmICghbm9kZS52YWx1ZS5tYXRjaCgvXHJcbj98XG4vKSkgewogICAgICAgIG5vZGUubGluZVN0YXJ0ID0gbGluZVN0YXJ0OwogICAgICAgIG5vZGUubGluZUVuZCA9IGxpbmVTdGFydDsKICAgICAgICByZXN1bHQucHVzaChub2RlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbGluZXMgPSBub2RlLnZhbHVlLnNwbGl0KC9cclxuP3xcbi8pOwogICAgICAgIGxpbmVzLmZvckVhY2goZnVuY3Rpb24gKGxpbmUsIGkpIHsKICAgICAgICAgIHZhciBudW0gPSBpID09PSAwID8gZGF0YS5saW5lTnVtYmVyIDogKytkYXRhLmxpbmVOdW1iZXI7CiAgICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgdmFsdWU6IGkgPT09IGxpbmVzLmxlbmd0aCAtIDEgPyBsaW5lIDogIiIuY29uY2F0KGxpbmUsICJcbiIpLAogICAgICAgICAgICBsaW5lU3RhcnQ6IG51bSwKICAgICAgICAgICAgbGluZUVuZDogbnVtCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICB2YXIgX2ZpcnN0JGxpbmVTdGFydCwgX2xhc3QkbGluZUVuZDsKCiAgICAgIHZhciBjaGlsZHJlbiA9IGFkZExpbmVEYXRhKG5vZGUuY2hpbGRyZW4sIGRhdGEpOwogICAgICB2YXIgZmlyc3QgPSBjaGlsZHJlblswXTsKICAgICAgdmFyIGxhc3QgPSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXTsKICAgICAgdmFyIHN0YXJ0ID0gKF9maXJzdCRsaW5lU3RhcnQgPSBmaXJzdC5saW5lU3RhcnQpICE9PSBudWxsICYmIF9maXJzdCRsaW5lU3RhcnQgIT09IHZvaWQgMCA/IF9maXJzdCRsaW5lU3RhcnQgOiBsaW5lU3RhcnQ7CiAgICAgIHZhciBlbmQgPSAoX2xhc3QkbGluZUVuZCA9IGxhc3QubGluZUVuZCkgIT09IG51bGwgJiYgX2xhc3QkbGluZUVuZCAhPT0gdm9pZCAwID8gX2xhc3QkbGluZUVuZCA6IGxpbmVTdGFydDsKCiAgICAgIGlmIChzdGFydCAhPT0gZW5kKSB7CiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9kZS5saW5lU3RhcnQgPSBzdGFydDsKICAgICAgICBub2RlLmxpbmVFbmQgPSBlbmQ7CiAgICAgICAgbm9kZS5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgICAgIHJlc3VsdC5wdXNoKG5vZGUpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIHJlc3VsdC5wdXNoKG5vZGUpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9LCBbXSk7Cn07CgpmdW5jdGlvbiB3cmFwTGluZXMobm9kZXMpIHsKICB2YXIgZ3JvdXBlZCA9IFtdOwogIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgIHZhciBsaW5lU3RhcnQgPSBub2RlLmxpbmVTdGFydCAtIDE7CgogICAgaWYgKGdyb3VwZWRbbGluZVN0YXJ0XSkgewogICAgICBncm91cGVkW2xpbmVTdGFydF0ucHVzaChub2RlKTsKICAgIH0gZWxzZSB7CiAgICAgIGdyb3VwZWRbbGluZVN0YXJ0XSA9IFtub2RlXTsKICAgIH0KICB9KTsKICB2YXIgd3JhcHBlZCA9IFtdOwogIGdyb3VwZWQuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgewogICAgd3JhcHBlZC5wdXNoKHsKICAgICAgdHlwZTogJ2VsZW1lbnQnLAogICAgICB0YWdOYW1lOiAnc3BhbicsCiAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICBjbGFzc05hbWU6IFsnZXVpQ29kZUJsb2NrX19saW5lJ10KICAgICAgfSwKICAgICAgY2hpbGRyZW46IG5vZGUKICAgIH0pOwogIH0pOwogIHJldHVybiB3cmFwcGVkOwp9Cgp2YXIgaGlnaGxpZ2h0QnlMaW5lID0gZnVuY3Rpb24gaGlnaGxpZ2h0QnlMaW5lKGNoaWxkcmVuLCBsYW5ndWFnZSkgewogIHJldHVybiB3cmFwTGluZXMoYWRkTGluZURhdGEoaGlnaGxpZ2h0KGNoaWxkcmVuLCBsYW5ndWFnZSkpKTsKfTsKCnZhciBmb250U2l6ZVRvQ2xhc3NOYW1lTWFwID0gewogIHM6ICdldWlDb2RlQmxvY2stLWZvbnRTbWFsbCcsCiAgbTogJ2V1aUNvZGVCbG9jay0tZm9udE1lZGl1bScsCiAgbDogJ2V1aUNvZGVCbG9jay0tZm9udExhcmdlJwp9OwpleHBvcnQgdmFyIEZPTlRfU0laRVMgPSBrZXlzT2YoZm9udFNpemVUb0NsYXNzTmFtZU1hcCk7CnZhciBwYWRkaW5nU2l6ZVRvQ2xhc3NOYW1lTWFwID0gewogIG5vbmU6ICcnLAogIHM6ICdldWlDb2RlQmxvY2stLXBhZGRpbmdTbWFsbCcsCiAgbTogJ2V1aUNvZGVCbG9jay0tcGFkZGluZ01lZGl1bScsCiAgbDogJ2V1aUNvZGVCbG9jay0tcGFkZGluZ0xhcmdlJwp9OwpleHBvcnQgdmFyIFBBRERJTkdfU0laRVMgPSBrZXlzT2YocGFkZGluZ1NpemVUb0NsYXNzTmFtZU1hcCk7CgovKioKICogVGhpcyBpcyB0aGUgYmFzZSBjb21wb25lbnQgZXh0ZW5kZWQgYnkgRXVpQ29kZSBhbmQgRXVpQ29kZUJsb2NrLgogKiBUaGVzZSBjb21wb25lbnRzIHNoYXJlIHRoZSBzYW1lIHByb3BUeXBlcyBkZWZpbml0aW9uIHdpdGggRXVpQ29kZUJsb2NrSW1wbC4KICovCmV4cG9ydCB2YXIgRXVpQ29kZUJsb2NrSW1wbCA9IGZ1bmN0aW9uIEV1aUNvZGVCbG9ja0ltcGwoX3JlZikgewogIHZhciBfcmVmJHRyYW5zcGFyZW50QmFja2cgPSBfcmVmLnRyYW5zcGFyZW50QmFja2dyb3VuZCwKICAgICAgdHJhbnNwYXJlbnRCYWNrZ3JvdW5kID0gX3JlZiR0cmFuc3BhcmVudEJhY2tnID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkdHJhbnNwYXJlbnRCYWNrZywKICAgICAgX3JlZiRwYWRkaW5nU2l6ZSA9IF9yZWYucGFkZGluZ1NpemUsCiAgICAgIHBhZGRpbmdTaXplID0gX3JlZiRwYWRkaW5nU2l6ZSA9PT0gdm9pZCAwID8gJ2wnIDogX3JlZiRwYWRkaW5nU2l6ZSwKICAgICAgX3JlZiRmb250U2l6ZSA9IF9yZWYuZm9udFNpemUsCiAgICAgIGZvbnRTaXplID0gX3JlZiRmb250U2l6ZSA9PT0gdm9pZCAwID8gJ3MnIDogX3JlZiRmb250U2l6ZSwKICAgICAgX3JlZiRpc0NvcHlhYmxlID0gX3JlZi5pc0NvcHlhYmxlLAogICAgICBpc0NvcHlhYmxlID0gX3JlZiRpc0NvcHlhYmxlID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkaXNDb3B5YWJsZSwKICAgICAgX3JlZiR3aGl0ZVNwYWNlID0gX3JlZi53aGl0ZVNwYWNlLAogICAgICB3aGl0ZVNwYWNlID0gX3JlZiR3aGl0ZVNwYWNlID09PSB2b2lkIDAgPyAncHJlLXdyYXAnIDogX3JlZiR3aGl0ZVNwYWNlLAogICAgICBsYW5ndWFnZSA9IF9yZWYubGFuZ3VhZ2UsCiAgICAgIGlubGluZSA9IF9yZWYuaW5saW5lLAogICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sCiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLAogICAgICBvdmVyZmxvd0hlaWdodCA9IF9yZWYub3ZlcmZsb3dIZWlnaHQsCiAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgWyJ0cmFuc3BhcmVudEJhY2tncm91bmQiLCAicGFkZGluZ1NpemUiLCAiZm9udFNpemUiLCAiaXNDb3B5YWJsZSIsICJ3aGl0ZVNwYWNlIiwgImxhbmd1YWdlIiwgImlubGluZSIsICJjaGlsZHJlbiIsICJjbGFzc05hbWUiLCAib3ZlcmZsb3dIZWlnaHQiXSk7CgogIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBpc0Z1bGxTY3JlZW4gPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRJc0Z1bGxTY3JlZW4gPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKG51bGwpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHdyYXBwZXJSZWYgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRXcmFwcGVyUmVmID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VJbm5lclRleHQgPSB1c2VJbm5lclRleHQoJycpLAogICAgICBfdXNlSW5uZXJUZXh0MiA9IF9zbGljZWRUb0FycmF5KF91c2VJbm5lclRleHQsIDIpLAogICAgICBpbm5lclRleHRSZWYgPSBfdXNlSW5uZXJUZXh0MlswXSwKICAgICAgX2lubmVyVGV4dCA9IF91c2VJbm5lclRleHQyWzFdOwoKICB2YXIgaW5uZXJUZXh0ID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gX2lubmVyVGV4dCA9PT0gbnVsbCB8fCBfaW5uZXJUZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW5uZXJUZXh0LnJlcGxhY2UoL1tcclxuP117Mn18XG5cbi9nLCAnXG4nKTsKICB9LCBbX2lubmVyVGV4dF0pOwoKICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKC0xKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICB0YWJJbmRleCA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFRhYkluZGV4ID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIGNvbWJpbmVkUmVmID0gdXNlQ29tYmluZWRSZWZzKFtpbm5lclRleHRSZWYsIHNldFdyYXBwZXJSZWZdKTsKCiAgdmFyIF91c2VSZXNpemVPYnNlcnZlciA9IHVzZVJlc2l6ZU9ic2VydmVyKHdyYXBwZXJSZWYpLAogICAgICB3aWR0aCA9IF91c2VSZXNpemVPYnNlcnZlci53aWR0aCwKICAgICAgaGVpZ2h0ID0gX3VzZVJlc2l6ZU9ic2VydmVyLmhlaWdodDsKCiAgdmFyIGNvbnRlbnQgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHsKICAgIGlmICghbGFuZ3VhZ2UgfHwgdHlwZW9mIGNoaWxkcmVuICE9PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gY2hpbGRyZW47CiAgICB9CgogICAgdmFyIG5vZGVzID0gaW5saW5lID8gaGlnaGxpZ2h0KGNoaWxkcmVuLCBsYW5ndWFnZSkgOiBoaWdobGlnaHRCeUxpbmUoY2hpbGRyZW4sIGxhbmd1YWdlKTsKICAgIHJldHVybiBub2Rlcy5sZW5ndGggPT09IDAgPyBjaGlsZHJlbiA6IG5vZGVzLm1hcChub2RlVG9IdG1sKTsKICB9LCBbY2hpbGRyZW4sIGxhbmd1YWdlLCBpbmxpbmVdKTsKCiAgdmFyIGRvZXNPdmVyZmxvdyA9IGZ1bmN0aW9uIGRvZXNPdmVyZmxvdygpIHsKICAgIGlmICghd3JhcHBlclJlZikgcmV0dXJuOwogICAgdmFyIGNsaWVudFdpZHRoID0gd3JhcHBlclJlZi5jbGllbnRXaWR0aCwKICAgICAgICBjbGllbnRIZWlnaHQgPSB3cmFwcGVyUmVmLmNsaWVudEhlaWdodCwKICAgICAgICBzY3JvbGxXaWR0aCA9IHdyYXBwZXJSZWYuc2Nyb2xsV2lkdGgsCiAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gd3JhcHBlclJlZi5zY3JvbGxIZWlnaHQ7CiAgICB2YXIgZG9lc092ZXJmbG93ID0gc2Nyb2xsSGVpZ2h0ID4gY2xpZW50SGVpZ2h0IHx8IHNjcm9sbFdpZHRoID4gY2xpZW50V2lkdGg7CiAgICBzZXRUYWJJbmRleChkb2VzT3ZlcmZsb3cgPyAwIDogLTEpOwogIH07CgogIHVzZU11dGF0aW9uT2JzZXJ2ZXIod3JhcHBlclJlZiwgZG9lc092ZXJmbG93LCB7CiAgICBzdWJ0cmVlOiB0cnVlLAogICAgY2hpbGRMaXN0OiB0cnVlCiAgfSk7CiAgdXNlRWZmZWN0KGRvZXNPdmVyZmxvdywgW3dpZHRoLCBoZWlnaHQsIHdyYXBwZXJSZWZdKTsKCiAgdmFyIG9uS2V5RG93biA9IGZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkgewogICAgaWYgKGV2ZW50LmtleSA9PT0ga2V5cy5FU0NBUEUpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGNsb3NlRnVsbFNjcmVlbigpOwogICAgfQogIH07CgogIHZhciB0b2dnbGVGdWxsU2NyZWVuID0gZnVuY3Rpb24gdG9nZ2xlRnVsbFNjcmVlbigpIHsKICAgIHNldElzRnVsbFNjcmVlbighaXNGdWxsU2NyZWVuKTsKICB9OwoKICB2YXIgY2xvc2VGdWxsU2NyZWVuID0gZnVuY3Rpb24gY2xvc2VGdWxsU2NyZWVuKCkgewogICAgc2V0SXNGdWxsU2NyZWVuKGZhbHNlKTsKICB9OwoKICB2YXIgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2V1aUNvZGVCbG9jaycsIGZvbnRTaXplVG9DbGFzc05hbWVNYXBbZm9udFNpemVdLCBwYWRkaW5nU2l6ZVRvQ2xhc3NOYW1lTWFwW3BhZGRpbmdTaXplXSwgewogICAgJ2V1aUNvZGVCbG9jay0tdHJhbnNwYXJlbnRCYWNrZ3JvdW5kJzogdHJhbnNwYXJlbnRCYWNrZ3JvdW5kLAogICAgJ2V1aUNvZGVCbG9jay0taW5saW5lJzogaW5saW5lLAogICAgJ2V1aUNvZGVCbG9jay0taGFzQ29udHJvbHMnOiBpc0NvcHlhYmxlIHx8IG92ZXJmbG93SGVpZ2h0CiAgfSwgX2RlZmluZVByb3BlcnR5KHsKICAgIHByaXNtanM6ICEoY2xhc3NOYW1lID09PSBudWxsIHx8IGNsYXNzTmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2xhc3NOYW1lLmluY2x1ZGVzKCdwcmlzbWpzJykpCiAgfSwgImxhbmd1YWdlLSIuY29uY2F0KGxhbmd1YWdlIHx8ICdub25lJyksICEoY2xhc3NOYW1lID09PSBudWxsIHx8IGNsYXNzTmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2xhc3NOYW1lLmluY2x1ZGVzKCdsYW5ndWFnZScpKSksIGNsYXNzTmFtZSk7CiAgdmFyIGNvZGVDbGFzc2VzID0gY2xhc3NOYW1lcygnZXVpQ29kZUJsb2NrX19jb2RlJywgbGFuZ3VhZ2UpOwogIHZhciBwcmVDbGFzc2VzID0gY2xhc3NOYW1lcygnZXVpQ29kZUJsb2NrX19wcmUnLCB7CiAgICAnZXVpQ29kZUJsb2NrX19wcmUtLXdoaXRlU3BhY2VQcmUnOiB3aGl0ZVNwYWNlID09PSAncHJlJywKICAgICdldWlDb2RlQmxvY2tfX3ByZS0td2hpdGVTcGFjZVByZVdyYXAnOiB3aGl0ZVNwYWNlID09PSAncHJlLXdyYXAnCiAgfSk7CiAgdmFyIG9wdGlvbmFsU3R5bGVzID0ge307CgogIGlmIChvdmVyZmxvd0hlaWdodCkgewogICAgb3B0aW9uYWxTdHlsZXMubWF4SGVpZ2h0ID0gb3ZlcmZsb3dIZWlnaHQ7CiAgfQoKICB2YXIgY29kZVNuaXBwZXQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiY29kZSIsIF9leHRlbmRzKHsKICAgIGNsYXNzTmFtZTogY29kZUNsYXNzZXMKICB9LCByZXN0KSwgY29udGVudCk7CiAgdmFyIHdyYXBwZXJQcm9wcyA9IHsKICAgIGNsYXNzTmFtZTogY2xhc3NlcywKICAgIHN0eWxlOiBvcHRpb25hbFN0eWxlcwogIH07CgogIGlmIChpbmxpbmUpIHsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHdyYXBwZXJQcm9wcywgY29kZVNuaXBwZXQpOwogIH0KCiAgdmFyIGdldENvcHlCdXR0b24gPSBmdW5jdGlvbiBnZXRDb3B5QnV0dG9uKHRleHRUb0NvcHkpIHsKICAgIHZhciBjb3B5QnV0dG9uOwoKICAgIGlmIChpc0NvcHlhYmxlICYmIHRleHRUb0NvcHkpIHsKICAgICAgY29weUJ1dHRvbiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZXVpQ29kZUJsb2NrX19jb3B5QnV0dG9uIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlJMThuLCB7CiAgICAgICAgdG9rZW46ICJldWlDb2RlQmxvY2suY29weUJ1dHRvbiIsCiAgICAgICAgZGVmYXVsdDogIkNvcHkiCiAgICAgIH0sIGZ1bmN0aW9uIChjb3B5QnV0dG9uKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUNvcHksIHsKICAgICAgICAgIHRleHRUb0NvcHk6IHRleHRUb0NvcHkKICAgICAgICB9LCBmdW5jdGlvbiAoY29weSkgewogICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUJ1dHRvbkljb24sIHsKICAgICAgICAgICAgb25DbGljazogY29weSwKICAgICAgICAgICAgaWNvblR5cGU6ICJjb3B5IiwKICAgICAgICAgICAgY29sb3I6ICJ0ZXh0IiwKICAgICAgICAgICAgImFyaWEtbGFiZWwiOiBjb3B5QnV0dG9uCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSkpOwogICAgfQoKICAgIHJldHVybiBjb3B5QnV0dG9uOwogIH07CgogIHZhciBmdWxsU2NyZWVuQnV0dG9uOwoKICBpZiAoIWlubGluZSAmJiBvdmVyZmxvd0hlaWdodCkgewogICAgZnVsbFNjcmVlbkJ1dHRvbiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUkxOG4sIHsKICAgICAgdG9rZW5zOiBbJ2V1aUNvZGVCbG9jay5mdWxsc2NyZWVuQ29sbGFwc2UnLCAnZXVpQ29kZUJsb2NrLmZ1bGxzY3JlZW5FeHBhbmQnXSwKICAgICAgZGVmYXVsdHM6IFsnQ29sbGFwc2UnLCAnRXhwYW5kJ10KICAgIH0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgICB2YXIgX3JlZjMgPSBfc2xpY2VkVG9BcnJheShfcmVmMiwgMiksCiAgICAgICAgICBmdWxsc2NyZWVuQ29sbGFwc2UgPSBfcmVmM1swXSwKICAgICAgICAgIGZ1bGxzY3JlZW5FeHBhbmQgPSBfcmVmM1sxXTsKCiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFdWlCdXR0b25JY29uLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZXVpQ29kZUJsb2NrX19mdWxsU2NyZWVuQnV0dG9uIiwKICAgICAgICBvbkNsaWNrOiB0b2dnbGVGdWxsU2NyZWVuLAogICAgICAgIGljb25UeXBlOiBpc0Z1bGxTY3JlZW4gPyAnY3Jvc3MnIDogJ2Z1bGxTY3JlZW4nLAogICAgICAgIGNvbG9yOiAidGV4dCIsCiAgICAgICAgImFyaWEtbGFiZWwiOiBpc0Z1bGxTY3JlZW4gPyBmdWxsc2NyZWVuQ29sbGFwc2UgOiBmdWxsc2NyZWVuRXhwYW5kCiAgICAgIH0pOwogICAgfSk7CiAgfQoKICB2YXIgZ2V0Q29kZUJsb2NrQ29udHJvbHMgPSBmdW5jdGlvbiBnZXRDb2RlQmxvY2tDb250cm9scyh0ZXh0VG9Db3B5KSB7CiAgICB2YXIgY29kZUJsb2NrQ29udHJvbHM7CiAgICB2YXIgY29weUJ1dHRvbiA9IGdldENvcHlCdXR0b24odGV4dFRvQ29weSk7CgogICAgaWYgKGNvcHlCdXR0b24gfHwgZnVsbFNjcmVlbkJ1dHRvbikgewogICAgICBjb2RlQmxvY2tDb250cm9scyA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZXVpQ29kZUJsb2NrX19jb250cm9scyIKICAgICAgfSwgZnVsbFNjcmVlbkJ1dHRvbiwgY29weUJ1dHRvbik7CiAgICB9CgogICAgcmV0dXJuIGNvZGVCbG9ja0NvbnRyb2xzOwogIH07CgogIHZhciBnZXRGdWxsU2NyZWVuRGlzcGxheSA9IGZ1bmN0aW9uIGdldEZ1bGxTY3JlZW5EaXNwbGF5KGNvZGVCbG9ja0NvbnRyb2xzKSB7CiAgICB2YXIgZnVsbFNjcmVlbkRpc3BsYXk7CgogICAgaWYgKGlzRnVsbFNjcmVlbikgewogICAgICAvLyBGb3JjZSBmdWxsc2NyZWVuIHRvIHVzZSBsYXJnZSBmb250IGFuZCBwYWRkaW5nLgogICAgICB2YXIgZnVsbFNjcmVlbkNsYXNzZXMgPSBjbGFzc05hbWVzKCdldWlDb2RlQmxvY2snLCBmb250U2l6ZVRvQ2xhc3NOYW1lTWFwW2ZvbnRTaXplXSwgJ2V1aUNvZGVCbG9jay1wYWRkaW5nTGFyZ2UnLCAnZXVpQ29kZUJsb2NrLWlzRnVsbFNjcmVlbicsIGNsYXNzTmFtZSk7CiAgICAgIGZ1bGxTY3JlZW5EaXNwbGF5ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpT3ZlcmxheU1hc2ssIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUZvY3VzVHJhcCwgewogICAgICAgIGNsaWNrT3V0c2lkZURpc2FibGVzOiB0cnVlCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiBmdWxsU2NyZWVuQ2xhc3NlcwogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicHJlIiwgewogICAgICAgIGNsYXNzTmFtZTogcHJlQ2xhc3NlcywKICAgICAgICB0YWJJbmRleDogMAogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiY29kZSIsIHsKICAgICAgICBjbGFzc05hbWU6IGNvZGVDbGFzc2VzLAogICAgICAgIG9uS2V5RG93bjogb25LZXlEb3duCiAgICAgIH0sIGNvbnRlbnQpKSwgY29kZUJsb2NrQ29udHJvbHMpKSk7CiAgICB9CgogICAgcmV0dXJuIGZ1bGxTY3JlZW5EaXNwbGF5OwogIH07CgogIHZhciBjb2RlQmxvY2tDb250cm9scyA9IGdldENvZGVCbG9ja0NvbnRyb2xzKGlubmVyVGV4dCk7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB3cmFwcGVyUHJvcHMsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwcmUiLCB7CiAgICByZWY6IGNvbWJpbmVkUmVmLAogICAgc3R5bGU6IG9wdGlvbmFsU3R5bGVzLAogICAgY2xhc3NOYW1lOiBwcmVDbGFzc2VzLAogICAgdGFiSW5kZXg6IHRhYkluZGV4CiAgfSwgY29kZVNuaXBwZXQpLCBjb2RlQmxvY2tDb250cm9scywgZ2V0RnVsbFNjcmVlbkRpc3BsYXkoY29kZUJsb2NrQ29udHJvbHMpKTsKfTsKRXVpQ29kZUJsb2NrSW1wbC5wcm9wVHlwZXMgPSB7CiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLAogIGZvbnRTaXplOiBQcm9wVHlwZXMub25lT2YoWyJzIiwgIm0iLCAibCJdKSwKCiAgLyoqCiAgICAgKiBEaXNwbGF5cyB0aGUgcGFzc2VkIGNvZGUgaW4gYW4gaW5saW5lIGZvcm1hdC4gQWxzbyByZW1vdmVzIGFueSBtYXJnaW5zIHNldC4KICAgICAqLwogIGlubGluZTogUHJvcFR5cGVzLmJvb2wsCgogIC8qKgogICAgICogRGlzcGxheXMgYW4gaWNvbiBidXR0b24gdG8gY29weSB0aGUgY29kZSBzbmlwcGV0IHRvIHRoZSBjbGlwYm9hcmQuCiAgICAgKi8KICBpc0NvcHlhYmxlOiBQcm9wVHlwZXMuYm9vbCwKCiAgLyoqCiAgICAgKiBTZXRzIHRoZSBzeW50YXggaGlnaGxpZ2h0aW5nIGZvciBhIHNwZWNpZmljIGxhbmd1YWdlCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93b29vcm0vcmVmcmFjdG9yI3N5bnRheGVzCiAgICAgKiBmb3Igb3B0aW9ucwogICAgICovCiAgbGFuZ3VhZ2U6IFByb3BUeXBlcy5zdHJpbmcsCiAgb3ZlcmZsb3dIZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsCiAgcGFkZGluZ1NpemU6IFByb3BUeXBlcy5vbmVPZihbIm5vbmUiLCAicyIsICJtIiwgImwiXSksCiAgdHJhbnNwYXJlbnRCYWNrZ3JvdW5kOiBQcm9wVHlwZXMuYm9vbCwKCiAgLyoqCiAgICAgKiBTcGVjaWZ5IGhvdyBgd2hpdGUtc3BhY2VgIGluc2lkZSB0aGUgZWxlbWVudCBpcyBoYW5kbGVkLgogICAgICogYHByZWAgcmVzcGVjdHMgbGluZSBicmVha3Mvd2hpdGUgc3BhY2UgYnV0IGRvZXNuJ3QgZm9yY2UgdGhlbSB0byB3cmFwIHRoZSBsaW5lCiAgICAgKiBgcHJlLXdyYXBgIHJlc3BlY3RzIGxpbmUgYnJlYWtzL3doaXRlIHNwYWNlIGJ1dCBkb2VzIGZvcmNlIHRoZW0gdG8gd3JhcCB0aGUgbGluZSB3aGVuIG5lY2Vzc2FyeS4KICAgICAqLwogIHdoaXRlU3BhY2U6IFByb3BUeXBlcy5vbmVPZihbInByZSIsICJwcmUtd3JhcCJdKQp9OwoKdHJ5IHsKICBFdWlDb2RlQmxvY2tJbXBsLl9fZG9jZ2VuSW5mbyA9IHsKICAgIGRlc2NyaXB0aW9uOiAnVGhpcyBpcyB0aGUgYmFzZSBjb21wb25lbnQgZXh0ZW5kZWQgYnkgRXVpQ29kZSBhbmQgRXVpQ29kZUJsb2NrLlxuJyArICdUaGVzZSBjb21wb25lbnRzIHNoYXJlIHRoZSBzYW1lIHByb3BUeXBlcyBkZWZpbml0aW9uIHdpdGggRXVpQ29kZUJsb2NrSW1wbC4nLAogICAgZGlzcGxheU5hbWU6ICdFdWlDb2RlQmxvY2tJbXBsJywKICAgIG1ldGhvZHM6IFtdLAogICAgcHJvcHM6IHsKICAgICAgY2xhc3NOYW1lOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnY2xhc3NOYW1lJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGUvX2NvZGVfYmxvY2sudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlDb2RlQmxvY2tJbXBsUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZvbnRTaXplOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogJ3MnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2ZvbnRTaXplJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGUvX2NvZGVfYmxvY2sudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlDb2RlQmxvY2tJbXBsUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2VudW0nLAogICAgICAgICAgcmF3OiAnInMiIHwgIm0iIHwgImwiJywKICAgICAgICAgIHZhbHVlOiBbewogICAgICAgICAgICB2YWx1ZTogJyJzIicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdmFsdWU6ICcibSInCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHZhbHVlOiAnImwiJwogICAgICAgICAgfV0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGlubGluZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXlzIHRoZSBwYXNzZWQgY29kZSBpbiBhbiBpbmxpbmUgZm9ybWF0LiBBbHNvIHJlbW92ZXMgYW55IG1hcmdpbnMgc2V0LicsCiAgICAgICAgbmFtZTogJ2lubGluZScsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb2RlL19jb2RlX2Jsb2NrLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUJsb2NrSW1wbFByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXNDb3B5YWJsZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6ICdmYWxzZScKICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheXMgYW4gaWNvbiBidXR0b24gdG8gY29weSB0aGUgY29kZSBzbmlwcGV0IHRvIHRoZSBjbGlwYm9hcmQuJywKICAgICAgICBuYW1lOiAnaXNDb3B5YWJsZScsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb2RlL19jb2RlX2Jsb2NrLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUJsb2NrSW1wbFByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgbGFuZ3VhZ2U6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IG51bGwsCiAgICAgICAgZGVzY3JpcHRpb246ICdTZXRzIHRoZSBzeW50YXggaGlnaGxpZ2h0aW5nIGZvciBhIHNwZWNpZmljIGxhbmd1YWdlXG4nICsgJ0BzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dvb29ybS9yZWZyYWN0b3Ijc3ludGF4ZXNcbicgKyAnZm9yIG9wdGlvbnMnLAogICAgICAgIG5hbWU6ICdsYW5ndWFnZScsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb2RlL19jb2RlX2Jsb2NrLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUJsb2NrSW1wbFByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9LAogICAgICBvdmVyZmxvd0hlaWdodDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ292ZXJmbG93SGVpZ2h0JywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGUvX2NvZGVfYmxvY2sudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlDb2RlQmxvY2tJbXBsUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ251bWJlcicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBhZGRpbmdTaXplOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogJ2wnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ3BhZGRpbmdTaXplJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvZGUvX2NvZGVfYmxvY2sudHN4JywKICAgICAgICAgIG5hbWU6ICdFdWlDb2RlQmxvY2tJbXBsUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2VudW0nLAogICAgICAgICAgcmF3OiAnInMiIHwgIm0iIHwgImwiIHwgIm5vbmUiJywKICAgICAgICAgIHZhbHVlOiBbewogICAgICAgICAgICB2YWx1ZTogJyJzIicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdmFsdWU6ICcibSInCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHZhbHVlOiAnImwiJwogICAgICAgICAgfSwgewogICAgICAgICAgICB2YWx1ZTogJyJub25lIicKICAgICAgICAgIH1dCiAgICAgICAgfQogICAgICB9LAogICAgICB0cmFuc3BhcmVudEJhY2tncm91bmQ6IHsKICAgICAgICBkZWZhdWx0VmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiAnZmFsc2UnCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ3RyYW5zcGFyZW50QmFja2dyb3VuZCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb2RlL19jb2RlX2Jsb2NrLnRzeCcsCiAgICAgICAgICBuYW1lOiAnRXVpQ29kZUJsb2NrSW1wbFByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdib29sZWFuJwogICAgICAgIH0KICAgICAgfSwKICAgICAgd2hpdGVTcGFjZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6ICdwcmUtd3JhcCcKICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uOiAnU3BlY2lmeSBob3cgYHdoaXRlLXNwYWNlYCBpbnNpZGUgdGhlIGVsZW1lbnQgaXMgaGFuZGxlZC5cbicgKyAiYHByZWAgcmVzcGVjdHMgbGluZSBicmVha3Mvd2hpdGUgc3BhY2UgYnV0IGRvZXNuJ3QgZm9yY2UgdGhlbSB0byB3cmFwIHRoZSBsaW5lXG4iICsgJ2BwcmUtd3JhcGAgcmVzcGVjdHMgbGluZSBicmVha3Mvd2hpdGUgc3BhY2UgYnV0IGRvZXMgZm9yY2UgdGhlbSB0byB3cmFwIHRoZSBsaW5lIHdoZW4gbmVjZXNzYXJ5LicsCiAgICAgICAgbmFtZTogJ3doaXRlU3BhY2UnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvY29kZS9fY29kZV9ibG9jay50c3gnLAogICAgICAgICAgbmFtZTogJ0V1aUNvZGVCbG9ja0ltcGxQcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnZW51bScsCiAgICAgICAgICByYXc6ICcicHJlIiB8ICJwcmUtd3JhcCInLAogICAgICAgICAgdmFsdWU6IFt7CiAgICAgICAgICAgIHZhbHVlOiAnInByZSInCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHZhbHVlOiAnInByZS13cmFwIicKICAgICAgICAgIH1dCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZXh0ZW5kZWRJbnRlcmZhY2VzOiBbJ0V1aUNvZGVCbG9ja0ltcGxQcm9wcyddCiAgfTsKfSBjYXRjaCAoZSkge30="},{"version":3,"sources":["D:/work/eui/src/components/code/_code_block.tsx"],"names":["React","useEffect","useMemo","useState","classNames","highlight","keys","useCombinedRefs","EuiButtonIcon","keysOf","EuiCopy","EuiFocusTrap","EuiI18n","useInnerText","useMutationObserver","useResizeObserver","EuiOverlayMask","isAstElement","node","hasOwnProperty","type","nodeToHtml","idx","nodes","depth","properties","tagName","children","createElement","key","className","map","el","i","value","addLineData","data","lineNumber","reduce","result","lineStart","match","lineEnd","push","lines","split","forEach","line","num","length","first","last","start","end","wrapLines","grouped","wrapped","highlightByLine","language","fontSizeToClassNameMap","s","m","l","FONT_SIZES","paddingSizeToClassNameMap","none","PADDING_SIZES","EuiCodeBlockImpl","transparentBackground","paddingSize","fontSize","isCopyable","whiteSpace","inline","overflowHeight","rest","isFullScreen","setIsFullScreen","wrapperRef","setWrapperRef","innerTextRef","_innerText","innerText","replace","tabIndex","setTabIndex","combinedRef","width","height","content","doesOverflow","clientWidth","clientHeight","scrollWidth","scrollHeight","subtree","childList","onKeyDown","event","ESCAPE","preventDefault","stopPropagation","closeFullScreen","toggleFullScreen","classes","prismjs","includes","codeClasses","preClasses","optionalStyles","maxHeight","codeSnippet","wrapperProps","style","getCopyButton","textToCopy","copyButton","copy","fullScreenButton","fullscreenCollapse","fullscreenExpand","getCodeBlockControls","codeBlockControls","getFullScreenDisplay","fullScreenDisplay","fullScreenClasses"],"mappings":"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","sourcesContent":["function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nimport PropTypes from \"prop-types\";\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport classNames from 'classnames';\nimport { highlight } from 'refractor';\nimport { keys, useCombinedRefs } from '../../services';\nimport { EuiButtonIcon } from '../button';\nimport { keysOf } from '../common';\nimport { EuiCopy } from '../copy';\nimport { EuiFocusTrap } from '../focus_trap';\nimport { EuiI18n } from '../i18n';\nimport { useInnerText } from '../inner_text';\nimport { useMutationObserver } from '../observer/mutation_observer';\nimport { useResizeObserver } from '../observer/resize_observer';\nimport { EuiOverlayMask } from '../overlay_mask';\n\nvar isAstElement = function isAstElement(node) {\n  return node.hasOwnProperty('type') && node.type === 'element';\n};\n\nvar nodeToHtml = function nodeToHtml(node, idx, nodes) {\n  var depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n  if (isAstElement(node)) {\n    var properties = node.properties,\n        tagName = node.tagName,\n        children = node.children;\n    return /*#__PURE__*/React.createElement(tagName, _objectSpread(_objectSpread({}, properties), {}, {\n      key: \"node-\".concat(depth, \"-\").concat(idx),\n      className: classNames(properties.className)\n    }), children && children.map(function (el, i) {\n      return nodeToHtml(el, i, nodes, depth + 1);\n    }));\n  }\n\n  return node.value;\n};\n\nvar addLineData = function addLineData(nodes) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    lineNumber: 1\n  };\n  return nodes.reduce(function (result, node) {\n    var lineStart = data.lineNumber;\n\n    if (node.type === 'text') {\n      if (!node.value.match(/\\r\\n?|\\n/)) {\n        node.lineStart = lineStart;\n        node.lineEnd = lineStart;\n        result.push(node);\n      } else {\n        var lines = node.value.split(/\\r\\n?|\\n/);\n        lines.forEach(function (line, i) {\n          var num = i === 0 ? data.lineNumber : ++data.lineNumber;\n          result.push({\n            type: 'text',\n            value: i === lines.length - 1 ? line : \"\".concat(line, \"\\n\"),\n            lineStart: num,\n            lineEnd: num\n          });\n        });\n      }\n\n      return result;\n    }\n\n    if (node.children && node.children.length) {\n      var _first$lineStart, _last$lineEnd;\n\n      var children = addLineData(node.children, data);\n      var first = children[0];\n      var last = children[children.length - 1];\n      var start = (_first$lineStart = first.lineStart) !== null && _first$lineStart !== void 0 ? _first$lineStart : lineStart;\n      var end = (_last$lineEnd = last.lineEnd) !== null && _last$lineEnd !== void 0 ? _last$lineEnd : lineStart;\n\n      if (start !== end) {\n        children.forEach(function (node) {\n          result.push(node);\n        });\n      } else {\n        node.lineStart = start;\n        node.lineEnd = end;\n        node.children = children;\n        result.push(node);\n      }\n\n      return result;\n    }\n\n    result.push(node);\n    return result;\n  }, []);\n};\n\nfunction wrapLines(nodes) {\n  var grouped = [];\n  nodes.forEach(function (node) {\n    var lineStart = node.lineStart - 1;\n\n    if (grouped[lineStart]) {\n      grouped[lineStart].push(node);\n    } else {\n      grouped[lineStart] = [node];\n    }\n  });\n  var wrapped = [];\n  grouped.forEach(function (node) {\n    wrapped.push({\n      type: 'element',\n      tagName: 'span',\n      properties: {\n        className: ['euiCodeBlock__line']\n      },\n      children: node\n    });\n  });\n  return wrapped;\n}\n\nvar highlightByLine = function highlightByLine(children, language) {\n  return wrapLines(addLineData(highlight(children, language)));\n};\n\nvar fontSizeToClassNameMap = {\n  s: 'euiCodeBlock--fontSmall',\n  m: 'euiCodeBlock--fontMedium',\n  l: 'euiCodeBlock--fontLarge'\n};\nexport var FONT_SIZES = keysOf(fontSizeToClassNameMap);\nvar paddingSizeToClassNameMap = {\n  none: '',\n  s: 'euiCodeBlock--paddingSmall',\n  m: 'euiCodeBlock--paddingMedium',\n  l: 'euiCodeBlock--paddingLarge'\n};\nexport var PADDING_SIZES = keysOf(paddingSizeToClassNameMap);\n/**\n * This is the base component extended by EuiCode and EuiCodeBlock.\n * These components share the same propTypes definition with EuiCodeBlockImpl.\n */\n\nexport var EuiCodeBlockImpl = ({\n  transparentBackground = false,\n  paddingSize = 'l',\n  fontSize = 's',\n  isCopyable = false,\n  whiteSpace = 'pre-wrap',\n  language,\n  inline,\n  children,\n  className,\n  overflowHeight,\n  ...rest\n}) => {\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  const [wrapperRef, setWrapperRef] = useState(null);\n  const [innerTextRef, _innerText] = useInnerText('');\n  const innerText = useMemo(() => _innerText?.replace(/[\\r\\n?]{2}|\\n\\n/g, '\\n'), [_innerText]);\n  const [tabIndex, setTabIndex] = useState(-1);\n  const combinedRef = useCombinedRefs([innerTextRef, setWrapperRef]);\n  const {\n    width,\n    height\n  } = useResizeObserver(wrapperRef);\n  const content = useMemo(() => {\n    if (!language || typeof children !== 'string') {\n      return children;\n    }\n\n    const nodes = inline ? highlight(children, language) : highlightByLine(children, language);\n    return nodes.length === 0 ? children : nodes.map(nodeToHtml);\n  }, [children, language, inline]);\n\n  const doesOverflow = () => {\n    if (!wrapperRef) return;\n    const {\n      clientWidth,\n      clientHeight,\n      scrollWidth,\n      scrollHeight\n    } = wrapperRef;\n    const doesOverflow = scrollHeight > clientHeight || scrollWidth > clientWidth;\n    setTabIndex(doesOverflow ? 0 : -1);\n  };\n\n  useMutationObserver(wrapperRef, doesOverflow, {\n    subtree: true,\n    childList: true\n  });\n  useEffect(doesOverflow, [width, height, wrapperRef]);\n\n  const onKeyDown = event => {\n    if (event.key === keys.ESCAPE) {\n      event.preventDefault();\n      event.stopPropagation();\n      closeFullScreen();\n    }\n  };\n\n  const toggleFullScreen = () => {\n    setIsFullScreen(!isFullScreen);\n  };\n\n  const closeFullScreen = () => {\n    setIsFullScreen(false);\n  };\n\n  const classes = classNames('euiCodeBlock', fontSizeToClassNameMap[fontSize], paddingSizeToClassNameMap[paddingSize], {\n    'euiCodeBlock--transparentBackground': transparentBackground,\n    'euiCodeBlock--inline': inline,\n    'euiCodeBlock--hasControls': isCopyable || overflowHeight\n  }, {\n    prismjs: !className?.includes('prismjs'),\n    [`language-${language || 'none'}`]: !className?.includes('language')\n  }, className);\n  const codeClasses = classNames('euiCodeBlock__code', language);\n  const preClasses = classNames('euiCodeBlock__pre', {\n    'euiCodeBlock__pre--whiteSpacePre': whiteSpace === 'pre',\n    'euiCodeBlock__pre--whiteSpacePreWrap': whiteSpace === 'pre-wrap'\n  });\n  const optionalStyles = {};\n\n  if (overflowHeight) {\n    optionalStyles.maxHeight = overflowHeight;\n  }\n\n  const codeSnippet = <code className={codeClasses} {...rest}>\n      {content}\n    </code>;\n  const wrapperProps = {\n    className: classes,\n    style: optionalStyles\n  };\n\n  if (inline) {\n    return <span {...wrapperProps}>{codeSnippet}</span>;\n  }\n\n  const getCopyButton = textToCopy => {\n    let copyButton;\n\n    if (isCopyable && textToCopy) {\n      copyButton = <div className=\"euiCodeBlock__copyButton\">\n          <EuiI18n token=\"euiCodeBlock.copyButton\" default=\"Copy\">\n            {copyButton => <EuiCopy textToCopy={textToCopy}>\n                {copy => <EuiButtonIcon onClick={copy} iconType=\"copy\" color=\"text\" aria-label={copyButton} />}\n              </EuiCopy>}\n          </EuiI18n>\n        </div>;\n    }\n\n    return copyButton;\n  };\n\n  let fullScreenButton;\n\n  if (!inline && overflowHeight) {\n    fullScreenButton = <EuiI18n tokens={['euiCodeBlock.fullscreenCollapse', 'euiCodeBlock.fullscreenExpand']} defaults={['Collapse', 'Expand']}>\n        {([fullscreenCollapse, fullscreenExpand]) => <EuiButtonIcon className=\"euiCodeBlock__fullScreenButton\" onClick={toggleFullScreen} iconType={isFullScreen ? 'cross' : 'fullScreen'} color=\"text\" aria-label={isFullScreen ? fullscreenCollapse : fullscreenExpand} />}\n      </EuiI18n>;\n  }\n\n  const getCodeBlockControls = textToCopy => {\n    let codeBlockControls;\n    const copyButton = getCopyButton(textToCopy);\n\n    if (copyButton || fullScreenButton) {\n      codeBlockControls = <div className=\"euiCodeBlock__controls\">\n          {fullScreenButton}\n          {copyButton}\n        </div>;\n    }\n\n    return codeBlockControls;\n  };\n\n  const getFullScreenDisplay = codeBlockControls => {\n    let fullScreenDisplay;\n\n    if (isFullScreen) {\n      // Force fullscreen to use large font and padding.\n      const fullScreenClasses = classNames('euiCodeBlock', fontSizeToClassNameMap[fontSize], 'euiCodeBlock-paddingLarge', 'euiCodeBlock-isFullScreen', className);\n      fullScreenDisplay = <EuiOverlayMask>\n          <EuiFocusTrap clickOutsideDisables={true}>\n            <div className={fullScreenClasses}>\n              <pre className={preClasses} tabIndex={0}>\n                <code className={codeClasses} onKeyDown={onKeyDown}>\n                  {content}\n                </code>\n              </pre>\n\n              {codeBlockControls}\n            </div>\n          </EuiFocusTrap>\n        </EuiOverlayMask>;\n    }\n\n    return fullScreenDisplay;\n  };\n\n  const codeBlockControls = getCodeBlockControls(innerText);\n  return <div {...wrapperProps}>\n      <pre ref={combinedRef} style={optionalStyles} className={preClasses} tabIndex={tabIndex}>\n        {codeSnippet}\n      </pre>\n      {\n      /*\n         If the below fullScreen code renders, it actually attaches to the body because of\n         EuiOverlayMask's React portal usage.\n       */\n    }\n      {codeBlockControls}\n      {getFullScreenDisplay(codeBlockControls)}\n    </div>;\n};\nEuiCodeBlockImpl.propTypes = {\n  className: PropTypes.string,\n  fontSize: PropTypes.oneOf([\"s\", \"m\", \"l\"]),\n\n  /**\n     * Displays the passed code in an inline format. Also removes any margins set.\n     */\n  inline: PropTypes.bool,\n\n  /**\n     * Displays an icon button to copy the code snippet to the clipboard.\n     */\n  isCopyable: PropTypes.bool,\n\n  /**\n     * Sets the syntax highlighting for a specific language\n     * @see https://github.com/wooorm/refractor#syntaxes\n     * for options\n     */\n  language: PropTypes.string,\n  overflowHeight: PropTypes.number,\n  paddingSize: PropTypes.oneOf([\"none\", \"s\", \"m\", \"l\"]),\n  transparentBackground: PropTypes.bool,\n\n  /**\n     * Specify how `white-space` inside the element is handled.\n     * `pre` respects line breaks/white space but doesn't force them to wrap the line\n     * `pre-wrap` respects line breaks/white space but does force them to wrap the line when necessary.\n     */\n  whiteSpace: PropTypes.oneOf([\"pre\", \"pre-wrap\"])\n};\n\ntry {\n  EuiCodeBlockImpl.__docgenInfo = {\n    description: 'This is the base component extended by EuiCode and EuiCodeBlock.\\n' + 'These components share the same propTypes definition with EuiCodeBlockImpl.',\n    displayName: 'EuiCodeBlockImpl',\n    methods: [],\n    props: {\n      className: {\n        defaultValue: null,\n        description: '',\n        name: 'className',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      fontSize: {\n        defaultValue: {\n          value: 's'\n        },\n        description: '',\n        name: 'fontSize',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'enum',\n          raw: '\"s\" | \"m\" | \"l\"',\n          value: [{\n            value: '\"s\"'\n          }, {\n            value: '\"m\"'\n          }, {\n            value: '\"l\"'\n          }]\n        }\n      },\n      inline: {\n        defaultValue: null,\n        description: 'Displays the passed code in an inline format. Also removes any margins set.',\n        name: 'inline',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      isCopyable: {\n        defaultValue: {\n          value: 'false'\n        },\n        description: 'Displays an icon button to copy the code snippet to the clipboard.',\n        name: 'isCopyable',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      language: {\n        defaultValue: null,\n        description: 'Sets the syntax highlighting for a specific language\\n' + '@see https://github.com/wooorm/refractor#syntaxes\\n' + 'for options',\n        name: 'language',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      overflowHeight: {\n        defaultValue: null,\n        description: '',\n        name: 'overflowHeight',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'number'\n        }\n      },\n      paddingSize: {\n        defaultValue: {\n          value: 'l'\n        },\n        description: '',\n        name: 'paddingSize',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'enum',\n          raw: '\"s\" | \"m\" | \"l\" | \"none\"',\n          value: [{\n            value: '\"s\"'\n          }, {\n            value: '\"m\"'\n          }, {\n            value: '\"l\"'\n          }, {\n            value: '\"none\"'\n          }]\n        }\n      },\n      transparentBackground: {\n        defaultValue: {\n          value: 'false'\n        },\n        description: '',\n        name: 'transparentBackground',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'boolean'\n        }\n      },\n      whiteSpace: {\n        defaultValue: {\n          value: 'pre-wrap'\n        },\n        description: 'Specify how `white-space` inside the element is handled.\\n' + \"`pre` respects line breaks/white space but doesn't force them to wrap the line\\n\" + '`pre-wrap` respects line breaks/white space but does force them to wrap the line when necessary.',\n        name: 'whiteSpace',\n        parent: {\n          fileName: 'eui/src/components/code/_code_block.tsx',\n          name: 'EuiCodeBlockImplProps'\n        },\n        required: false,\n        type: {\n          name: 'enum',\n          raw: '\"pre\" | \"pre-wrap\"',\n          value: [{\n            value: '\"pre\"'\n          }, {\n            value: '\"pre-wrap\"'\n          }]\n        }\n      }\n    },\n    extendedInterfaces: ['EuiCodeBlockImplProps']\n  };\n} catch (e) {}"]}]}