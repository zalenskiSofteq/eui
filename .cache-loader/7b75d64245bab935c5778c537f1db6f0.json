{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\date_picker\\super_date_picker\\relative_utils.ts","dependencies":[{"path":"D:\\work\\eui\\src\\components\\date_picker\\super_date_picker\\relative_utils.ts","mtime":1649070093380},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCmltcG9ydCBkYXRlTWF0aCBmcm9tICdAZWxhc3RpYy9kYXRlbWF0aCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvb2JqZWN0cyc7CmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcHJlZGljYXRlJzsKaW1wb3J0IHsgcmVsYXRpdmVVbml0c0Zyb21MYXJnZXN0VG9TbWFsbGVzdCB9IGZyb20gJy4vcmVsYXRpdmVfb3B0aW9ucyc7CnZhciBST1VORF9ERUxJTUVURVIgPSAnLyc7CmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlbGF0aXZlUGFydHModmFsdWUpIHsKICB2YXIgbWF0Y2hlcyA9IGlzU3RyaW5nKHZhbHVlKSAmJiB2YWx1ZS5tYXRjaCgvbm93KChbXC1cK10pKFswLTldKykoW3NtaGR3TXldKShcL1tzbWhkd015XSk/KT8vKTsKICB2YXIgb3BlcmF0b3IgPSBtYXRjaGVzICYmIG1hdGNoZXNbMl07CiAgdmFyIGNvdW50ID0gbWF0Y2hlcyAmJiBtYXRjaGVzWzNdOwogIHZhciB1bml0ID0gbWF0Y2hlcyAmJiBtYXRjaGVzWzRdOwogIHZhciByb3VuZEJ5ID0gbWF0Y2hlcyAmJiBtYXRjaGVzWzVdOwoKICBpZiAoY291bnQgJiYgdW5pdCkgewogICAgdmFyIGlzUm91bmRlZCA9IHJvdW5kQnkgPyB0cnVlIDogZmFsc2U7CiAgICB2YXIgcm91bmRVbml0ID0gaXNSb3VuZGVkICYmIHJvdW5kQnkgPyByb3VuZEJ5LnJlcGxhY2UoUk9VTkRfREVMSU1FVEVSLCAnJykgOiB1bmRlZmluZWQ7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICAgIGNvdW50OiBwYXJzZUludChjb3VudCwgMTApLAogICAgICB1bml0OiBvcGVyYXRvciA9PT0gJysnID8gIiIuY29uY2F0KHVuaXQsICIrIikgOiB1bml0LAogICAgICByb3VuZDogaXNSb3VuZGVkCiAgICB9LCByb3VuZFVuaXQgPyB7CiAgICAgIHJvdW5kVW5pdDogcm91bmRVbml0CiAgICB9IDoge30pOwogIH0KCiAgdmFyIHJlc3VsdHMgPSB7CiAgICBjb3VudDogMCwKICAgIHVuaXQ6ICdzJywKICAgIHJvdW5kOiBmYWxzZQogIH07CiAgdmFyIGR1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKG1vbWVudCgpLmRpZmYoZGF0ZU1hdGgucGFyc2UodmFsdWUpKSk7CiAgdmFyIHVuaXRPcCA9ICcnOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbGF0aXZlVW5pdHNGcm9tTGFyZ2VzdFRvU21hbGxlc3QubGVuZ3RoOyBpKyspIHsKICAgIHZhciBhc1JlbGF0aXZlID0gZHVyYXRpb24uYXMocmVsYXRpdmVVbml0c0Zyb21MYXJnZXN0VG9TbWFsbGVzdFtpXSk7CiAgICBpZiAoYXNSZWxhdGl2ZSA8IDApIHVuaXRPcCA9ICcrJzsKCiAgICBpZiAoTWF0aC5hYnMoYXNSZWxhdGl2ZSkgPiAxKSB7CiAgICAgIHJlc3VsdHMuY291bnQgPSBNYXRoLnJvdW5kKE1hdGguYWJzKGFzUmVsYXRpdmUpKTsKICAgICAgcmVzdWx0cy51bml0ID0gcmVsYXRpdmVVbml0c0Zyb21MYXJnZXN0VG9TbWFsbGVzdFtpXSArIHVuaXRPcDsKICAgICAgcmVzdWx0cy5yb3VuZCA9IGZhbHNlOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXN1bHRzOwp9CmV4cG9ydCB2YXIgdG9SZWxhdGl2ZVN0cmluZ0Zyb21QYXJ0cyA9IGZ1bmN0aW9uIHRvUmVsYXRpdmVTdHJpbmdGcm9tUGFydHMocmVsYXRpdmVQYXJ0cykgewogIHZhciBjb3VudCA9IGdldChyZWxhdGl2ZVBhcnRzLCAnY291bnQnLCAwKTsKICB2YXIgaXNSb3VuZGVkID0gZ2V0KHJlbGF0aXZlUGFydHMsICdyb3VuZCcsIGZhbHNlKTsKCiAgaWYgKGNvdW50ID09PSAwICYmICFpc1JvdW5kZWQpIHsKICAgIHJldHVybiAnbm93JzsKICB9CgogIHZhciBtYXRjaGVzID0gZ2V0KHJlbGF0aXZlUGFydHMsICd1bml0JywgJ3MnKS5tYXRjaCgvKFtzbWhkd015XSkoXCspPy8pOwogIHZhciB1bml0ID0gbWF0Y2hlc1sxXTsKICB2YXIgb3BlcmF0b3IgPSBtYXRjaGVzICYmIG1hdGNoZXNbMl0gPyBtYXRjaGVzWzJdIDogJy0nOwogIHZhciByb3VuZCA9IGlzUm91bmRlZCA/ICIiLmNvbmNhdChST1VORF9ERUxJTUVURVIpLmNvbmNhdCh1bml0KSA6ICcnOwogIHJldHVybiAibm93Ii5jb25jYXQob3BlcmF0b3IpLmNvbmNhdChjb3VudCkuY29uY2F0KHVuaXQpLmNvbmNhdChyb3VuZCk7Cn07Cgp0cnkgewogIHBhcnNlUmVsYXRpdmVQYXJ0cy5fX2RvY2dlbkluZm8gPSB7CiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBkaXNwbGF5TmFtZTogJ3BhcnNlUmVsYXRpdmVQYXJ0cycsCiAgICBtZXRob2RzOiBbXSwKICAgIHByb3BzOiB7fSwKICAgIGV4dGVuZGVkSW50ZXJmYWNlczogWydTdHJpbmcnLCAnUmVsYXRpdmVQYXJ0cyddCiAgfTsKfSBjYXRjaCAoZSkge30KCnRyeSB7CiAgdG9SZWxhdGl2ZVN0cmluZ0Zyb21QYXJ0cy5fX2RvY2dlbkluZm8gPSB7CiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBkaXNwbGF5TmFtZTogJ3RvUmVsYXRpdmVTdHJpbmdGcm9tUGFydHMnLAogICAgbWV0aG9kczogW10sCiAgICBwcm9wczogewogICAgICBjb3VudDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ2NvdW50JywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2RhdGVfcGlja2VyL3R5cGVzLnRzJywKICAgICAgICAgIG5hbWU6ICdSZWxhdGl2ZVBhcnRzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ251bWJlcicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJvdW5kOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAncm91bmQnLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvZGF0ZV9waWNrZXIvdHlwZXMudHMnLAogICAgICAgICAgbmFtZTogJ1JlbGF0aXZlUGFydHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnYm9vbGVhbicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJvdW5kVW5pdDogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgbmFtZTogJ3JvdW5kVW5pdCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9kYXRlX3BpY2tlci90eXBlcy50cycsCiAgICAgICAgICBuYW1lOiAnUmVsYXRpdmVQYXJ0cycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnZW51bScsCiAgICAgICAgICByYXc6ICdUaW1lVW5pdElkJywKICAgICAgICAgIHZhbHVlOiBbewogICAgICAgICAgICB2YWx1ZTogJyJzIicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdmFsdWU6ICcibSInCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHZhbHVlOiAnImQiJwogICAgICAgICAgfSwgewogICAgICAgICAgICB2YWx1ZTogJyJ5IicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdmFsdWU6ICciTSInCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHZhbHVlOiAnInciJwogICAgICAgICAgfSwgewogICAgICAgICAgICB2YWx1ZTogJyJoIicKICAgICAgICAgIH1dCiAgICAgICAgfQogICAgICB9LAogICAgICB1bml0OiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAndW5pdCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9kYXRlX3BpY2tlci90eXBlcy50cycsCiAgICAgICAgICBuYW1lOiAnUmVsYXRpdmVQYXJ0cycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZXh0ZW5kZWRJbnRlcmZhY2VzOiBbJ1N0cmluZycsICdSZWxhdGl2ZVBhcnRzJ10KICB9Owp9IGNhdGNoIChlKSB7fQ=="},{"version":3,"sources":["D:/work/eui/src/components/date_picker/super_date_picker/relative_utils.ts"],"names":["dateMath","moment","get","isString","relativeUnitsFromLargestToSmallest","ROUND_DELIMETER","parseRelativeParts","value","matches","match","operator","count","unit","roundBy","isRounded","roundUnit","replace","undefined","parseInt","round","results","duration","diff","parse","unitOp","i","length","asRelative","as","Math","abs","toRelativeStringFromParts","relativeParts"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport dateMath from '@elastic/datemath';\nimport moment from 'moment';\n\nimport { get } from '../../../services/objects';\nimport { isString } from '../../../services/predicate';\nimport { relativeUnitsFromLargestToSmallest } from './relative_options';\nimport { TimeUnitId, RelativeParts } from '../types';\n\nconst ROUND_DELIMETER = '/';\n\nexport function parseRelativeParts(value: string): RelativeParts {\n  const matches =\n    isString(value) &&\n    value.match(/now(([\\-\\+])([0-9]+)([smhdwMy])(\\/[smhdwMy])?)?/);\n\n  const operator = matches && matches[2];\n  const count = matches && matches[3];\n  const unit = matches && matches[4];\n  const roundBy = matches && matches[5];\n\n  if (count && unit) {\n    const isRounded = roundBy ? true : false;\n    const roundUnit =\n      isRounded && roundBy\n        ? (roundBy.replace(ROUND_DELIMETER, '') as TimeUnitId)\n        : undefined;\n    return {\n      count: parseInt(count, 10),\n      unit: operator === '+' ? `${unit}+` : unit,\n      round: isRounded,\n      ...(roundUnit ? { roundUnit } : {}),\n    };\n  }\n\n  const results = { count: 0, unit: 's', round: false };\n  const duration = moment.duration(moment().diff(dateMath.parse(value)));\n  let unitOp = '';\n  for (let i = 0; i < relativeUnitsFromLargestToSmallest.length; i++) {\n    const asRelative = duration.as(relativeUnitsFromLargestToSmallest[i]);\n    if (asRelative < 0) unitOp = '+';\n    if (Math.abs(asRelative) > 1) {\n      results.count = Math.round(Math.abs(asRelative));\n      results.unit = relativeUnitsFromLargestToSmallest[i] + unitOp;\n      results.round = false;\n      break;\n    }\n  }\n  return results;\n}\n\nexport const toRelativeStringFromParts = (relativeParts: RelativeParts) => {\n  const count = get(relativeParts, 'count', 0);\n  const isRounded = get(relativeParts, 'round', false);\n\n  if (count === 0 && !isRounded) {\n    return 'now';\n  }\n\n  const matches = get(relativeParts, 'unit', 's').match(/([smhdwMy])(\\+)?/);\n  const unit = matches[1];\n  const operator = matches && matches[2] ? matches[2] : '-';\n  const round = isRounded ? `${ROUND_DELIMETER}${unit}` : '';\n\n  return `now${operator}${count}${unit}${round}`;\n};\n"]}]}