{"remainingRequest":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js??ref--4-1!D:\\work\\eui\\src\\components\\context_menu\\context_menu.tsx","dependencies":[{"path":"D:\\work\\eui\\src\\components\\context_menu\\context_menu.tsx","mtime":1649070093350},{"path":"D:\\work\\eui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636976621750},{"path":"D:\\work\\eui\\node_modules\\babel-loader\\lib\\index.js","mtime":1649070120649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKCmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBQcm9wVHlwZXMgZnJvbSAicHJvcC10eXBlcyI7CmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgeyBrZXlzT2YgfSBmcm9tICcuLi9jb21tb24nOwppbXBvcnQgeyBFdWlDb250ZXh0TWVudVBhbmVsIH0gZnJvbSAnLi9jb250ZXh0X21lbnVfcGFuZWwnOwppbXBvcnQgeyBFdWlDb250ZXh0TWVudUl0ZW0gfSBmcm9tICcuL2NvbnRleHRfbWVudV9pdGVtJzsKaW1wb3J0IHsgRXVpSG9yaXpvbnRhbFJ1bGUgfSBmcm9tICcuLi9ob3Jpem9udGFsX3J1bGUnOwp2YXIgc2l6ZVRvQ2xhc3NOYW1lTWFwID0gewogIHM6ICdldWlDb250ZXh0TWVudS0tc21hbGwnLAogIG06IG51bGwKfTsKZXhwb3J0IHZhciBTSVpFUyA9IGtleXNPZihzaXplVG9DbGFzc05hbWVNYXApOwoKdmFyIGlzSXRlbVNlcGFyYXRvciA9IGZ1bmN0aW9uIGlzSXRlbVNlcGFyYXRvcihpdGVtKSB7CiAgcmV0dXJuIGl0ZW0uaXNTZXBhcmF0b3IgPT09IHRydWU7Cn07CgpmdW5jdGlvbiBtYXBJZHNUb1BhbmVscyhwYW5lbHMpIHsKICB2YXIgbWFwID0ge307CiAgcGFuZWxzLmZvckVhY2goZnVuY3Rpb24gKHBhbmVsKSB7CiAgICBtYXBbcGFuZWwuaWRdID0gcGFuZWw7CiAgfSk7CiAgcmV0dXJuIG1hcDsKfQoKZnVuY3Rpb24gbWFwSWRzVG9QcmV2aW91c1BhbmVscyhwYW5lbHMpIHsKICB2YXIgaWRUb1ByZXZpb3VzUGFuZWxJZE1hcCA9IHt9OwogIHBhbmVscy5mb3JFYWNoKGZ1bmN0aW9uIChwYW5lbCkgewogICAgaWYgKEFycmF5LmlzQXJyYXkocGFuZWwuaXRlbXMpKSB7CiAgICAgIHBhbmVsLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXNJdGVtU2VwYXJhdG9yKGl0ZW0pKSByZXR1cm47CiAgICAgICAgdmFyIGlzQ2xvc2VhYmxlID0gaXRlbS5wYW5lbCAhPT0gdW5kZWZpbmVkOwoKICAgICAgICBpZiAoaXNDbG9zZWFibGUpIHsKICAgICAgICAgIGlkVG9QcmV2aW91c1BhbmVsSWRNYXBbaXRlbS5wYW5lbF0gPSBwYW5lbC5pZDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pOwogIHJldHVybiBpZFRvUHJldmlvdXNQYW5lbElkTWFwOwp9CgpmdW5jdGlvbiBtYXBQYW5lbEl0ZW1zVG9QYW5lbHMocGFuZWxzKSB7CiAgdmFyIGlkQW5kSXRlbUluZGV4VG9QYW5lbElkTWFwID0ge307CiAgcGFuZWxzLmZvckVhY2goZnVuY3Rpb24gKHBhbmVsKSB7CiAgICBpZEFuZEl0ZW1JbmRleFRvUGFuZWxJZE1hcFtwYW5lbC5pZF0gPSB7fTsKCiAgICBpZiAocGFuZWwuaXRlbXMpIHsKICAgICAgcGFuZWwuaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXNJdGVtU2VwYXJhdG9yKGl0ZW0pKSByZXR1cm47CgogICAgICAgIGlmIChpdGVtLnBhbmVsKSB7CiAgICAgICAgICBpZEFuZEl0ZW1JbmRleFRvUGFuZWxJZE1hcFtwYW5lbC5pZF1baW5kZXhdID0gaXRlbS5wYW5lbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pOwogIHJldHVybiBpZEFuZEl0ZW1JbmRleFRvUGFuZWxJZE1hcDsKfQoKZXhwb3J0IHZhciBFdWlDb250ZXh0TWVudSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhFdWlDb250ZXh0TWVudSwgX0NvbXBvbmVudCk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRXVpQ29udGV4dE1lbnUpOwoKICBfY3JlYXRlQ2xhc3MoRXVpQ29udGV4dE1lbnUsIG51bGwsIFt7CiAgICBrZXk6ICJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkgewogICAgICB2YXIgcGFuZWxzID0gbmV4dFByb3BzLnBhbmVsczsKCiAgICAgIGlmIChwYW5lbHMgJiYgcHJldlN0YXRlLnByZXZQcm9wcy5wYW5lbHMgIT09IHBhbmVscykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBwcmV2UHJvcHM6IHsKICAgICAgICAgICAgcGFuZWxzOiBwYW5lbHMKICAgICAgICAgIH0sCiAgICAgICAgICBpZFRvUGFuZWxNYXA6IG1hcElkc1RvUGFuZWxzKHBhbmVscyksCiAgICAgICAgICBpZFRvUHJldmlvdXNQYW5lbElkTWFwOiBtYXBJZHNUb1ByZXZpb3VzUGFuZWxzKHBhbmVscyksCiAgICAgICAgICBpZEFuZEl0ZW1JbmRleFRvUGFuZWxJZE1hcDogbWFwUGFuZWxJdGVtc1RvUGFuZWxzKHBhbmVscykKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9XSk7CgogIGZ1bmN0aW9uIEV1aUNvbnRleHRNZW51KHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV1aUNvbnRleHRNZW51KTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYXNQcmV2aW91c1BhbmVsIiwgZnVuY3Rpb24gKHBhbmVsSWQpIHsKICAgICAgdmFyIHByZXZpb3VzUGFuZWxJZCA9IF90aGlzLnN0YXRlLmlkVG9QcmV2aW91c1BhbmVsSWRNYXBbcGFuZWxJZF07CiAgICAgIHJldHVybiB0eXBlb2YgcHJldmlvdXNQYW5lbElkICE9PSAndW5kZWZpbmVkJzsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNob3dOZXh0UGFuZWwiLCBmdW5jdGlvbiAoaXRlbUluZGV4KSB7CiAgICAgIGlmIChpdGVtSW5kZXggPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5leHRQYW5lbElkID0gX3RoaXMuc3RhdGUuaWRBbmRJdGVtSW5kZXhUb1BhbmVsSWRNYXBbX3RoaXMuc3RhdGUuaW5jb21pbmdQYW5lbElkXVtpdGVtSW5kZXhdOwoKICAgICAgaWYgKG5leHRQYW5lbElkKSB7CiAgICAgICAgaWYgKF90aGlzLnN0YXRlLmlzVXNpbmdLZXlib2FyZFRvTmF2aWdhdGUpIHsKICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgICAgIHZhciBfaWRUb1BhbmVsTWFwJG5leHRQYW47CgogICAgICAgICAgICB2YXIgaWRUb1BhbmVsTWFwID0gX3JlZi5pZFRvUGFuZWxNYXA7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgZm9jdXNlZEl0ZW1JbmRleDogKF9pZFRvUGFuZWxNYXAkbmV4dFBhbiA9IGlkVG9QYW5lbE1hcFtuZXh0UGFuZWxJZF0uaW5pdGlhbEZvY3VzZWRJdGVtSW5kZXgpICE9PSBudWxsICYmIF9pZFRvUGFuZWxNYXAkbmV4dFBhbiAhPT0gdm9pZCAwID8gX2lkVG9QYW5lbE1hcCRuZXh0UGFuIDogMAogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5zaG93UGFuZWwobmV4dFBhbmVsSWQsICduZXh0Jyk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInNob3dQcmV2aW91c1BhbmVsIiwgZnVuY3Rpb24gKCkgewogICAgICAvLyBJZiB0aGVyZSdzIGEgcHJldmlvdXMgcGFuZWwsIHRoZW4gd2UgY2FuIGNsb3NlIHRoZSBjdXJyZW50IHBhbmVsIHRvIGdvIGJhY2sgdG8gaXQuCiAgICAgIGlmIChfdGhpcy5oYXNQcmV2aW91c1BhbmVsKF90aGlzLnN0YXRlLmluY29taW5nUGFuZWxJZCkpIHsKICAgICAgICB2YXIgcHJldmlvdXNQYW5lbElkID0gX3RoaXMuc3RhdGUuaWRUb1ByZXZpb3VzUGFuZWxJZE1hcFtfdGhpcy5zdGF0ZS5pbmNvbWluZ1BhbmVsSWRdOyAvLyBTZXQgZm9jdXMgb24gdGhlIGl0ZW0gd2hpY2ggc2hvd3MgdGhlIHBhbmVsIHdlJ3JlIGxlYXZpbmcuCgogICAgICAgIHZhciBwcmV2aW91c1BhbmVsID0gX3RoaXMuc3RhdGUuaWRUb1BhbmVsTWFwW3ByZXZpb3VzUGFuZWxJZF07CiAgICAgICAgdmFyIGZvY3VzZWRJdGVtSW5kZXggPSBwcmV2aW91c1BhbmVsLml0ZW1zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuICFpc0l0ZW1TZXBhcmF0b3IoaXRlbSkgJiYgaXRlbS5wYW5lbCA9PT0gX3RoaXMuc3RhdGUuaW5jb21pbmdQYW5lbElkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoZm9jdXNlZEl0ZW1JbmRleCAhPT0gLTEpIHsKICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgZm9jdXNlZEl0ZW1JbmRleDogZm9jdXNlZEl0ZW1JbmRleAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5zaG93UGFuZWwocHJldmlvdXNQYW5lbElkLCAncHJldmlvdXMnKTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25JbmNvbWluZ1BhbmVsSGVpZ2h0Q2hhbmdlIiwgZnVuY3Rpb24gKGhlaWdodCkgewogICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICB2YXIgcHJldkhlaWdodCA9IF9yZWYyLmhlaWdodDsKCiAgICAgICAgaWYgKGhlaWdodCA9PT0gcHJldkhlaWdodCkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgaGVpZ2h0OiBoZWlnaHQKICAgICAgICB9OwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uT3V0R29pbmdQYW5lbFRyYW5zaXRpb25Db21wbGV0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzT3V0Z29pbmdQYW5lbFZpc2libGU6IGZhbHNlCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25Vc2VLZXlib2FyZFRvTmF2aWdhdGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghX3RoaXMuc3RhdGUuaXNVc2luZ0tleWJvYXJkVG9OYXZpZ2F0ZSkgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGlzVXNpbmdLZXlib2FyZFRvTmF2aWdhdGU6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibWFwSWRzVG9SZW5kZXJlZEl0ZW1zIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgcGFuZWxzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKICAgICAgdmFyIGlkVG9SZW5kZXJlZEl0ZW1zTWFwID0ge307IC8vIFByZS1yZW5kZXJpbmcgdGhlIGl0ZW1zIGxldHMgdXMgY2hlY2sgcmVmZXJlbmNlIGVxdWFsaXR5IGluc2lkZSBvZiBFdWlDb250ZXh0TWVudVBhbmVsLgoKICAgICAgcGFuZWxzLmZvckVhY2goZnVuY3Rpb24gKHBhbmVsKSB7CiAgICAgICAgaWRUb1JlbmRlcmVkSXRlbXNNYXBbcGFuZWwuaWRdID0gX3RoaXMucmVuZGVySXRlbXMocGFuZWwuaXRlbXMpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGlkVG9SZW5kZXJlZEl0ZW1zTWFwOwogICAgfSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIHByZXZQcm9wczoge30sCiAgICAgIGlkVG9QYW5lbE1hcDoge30sCiAgICAgIGlkVG9QcmV2aW91c1BhbmVsSWRNYXA6IHt9LAogICAgICBpZEFuZEl0ZW1JbmRleFRvUGFuZWxJZE1hcDoge30sCiAgICAgIGlkVG9SZW5kZXJlZEl0ZW1zTWFwOiBfdGhpcy5tYXBJZHNUb1JlbmRlcmVkSXRlbXMoX3RoaXMucHJvcHMucGFuZWxzKSwKICAgICAgaGVpZ2h0OiB1bmRlZmluZWQsCiAgICAgIG91dGdvaW5nUGFuZWxJZDogdW5kZWZpbmVkLAogICAgICBpbmNvbWluZ1BhbmVsSWQ6IHByb3BzLmluaXRpYWxQYW5lbElkLAogICAgICB0cmFuc2l0aW9uRGlyZWN0aW9uOiB1bmRlZmluZWQsCiAgICAgIGlzT3V0Z29pbmdQYW5lbFZpc2libGU6IGZhbHNlLAogICAgICBmb2N1c2VkSXRlbUluZGV4OiB1bmRlZmluZWQsCiAgICAgIGlzVXNpbmdLZXlib2FyZFRvTmF2aWdhdGU6IGZhbHNlCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEV1aUNvbnRleHRNZW51LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7CiAgICAgIGlmIChwcmV2UHJvcHMucGFuZWxzICE9PSB0aGlzLnByb3BzLnBhbmVscykgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9uby1kaWQtdXBkYXRlLXNldC1zdGF0ZQogICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgaWRUb1JlbmRlcmVkSXRlbXNNYXA6IHRoaXMubWFwSWRzVG9SZW5kZXJlZEl0ZW1zKHRoaXMucHJvcHMucGFuZWxzKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd1BhbmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93UGFuZWwocGFuZWxJZCwgZGlyZWN0aW9uKSB7CiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIG91dGdvaW5nUGFuZWxJZDogdGhpcy5zdGF0ZS5pbmNvbWluZ1BhbmVsSWQsCiAgICAgICAgaW5jb21pbmdQYW5lbElkOiBwYW5lbElkLAogICAgICAgIHRyYW5zaXRpb25EaXJlY3Rpb246IGRpcmVjdGlvbiwKICAgICAgICBpc091dGdvaW5nUGFuZWxWaXNpYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckl0ZW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJJdGVtcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgaXRlbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpc0l0ZW1TZXBhcmF0b3IoaXRlbSkpIHsKICAgICAgICAgIHZhciBvbWl0ID0gaXRlbS5pc1NlcGFyYXRvciwKICAgICAgICAgICAgICBfaXRlbSRrZXkgPSBpdGVtLmtleSwKICAgICAgICAgICAgICBfa2V5ID0gX2l0ZW0ka2V5ID09PSB2b2lkIDAgPyBpbmRleCA6IF9pdGVtJGtleSwKICAgICAgICAgICAgICBfcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhpdGVtLCBbImlzU2VwYXJhdG9yIiwgImtleSJdKTsKCiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpSG9yaXpvbnRhbFJ1bGUsIF9leHRlbmRzKHsKICAgICAgICAgICAga2V5OiBfa2V5LAogICAgICAgICAgICBtYXJnaW46ICJub25lIgogICAgICAgICAgfSwgX3Jlc3QpKTsKICAgICAgICB9CgogICAgICAgIHZhciBwYW5lbCA9IGl0ZW0ucGFuZWwsCiAgICAgICAgICAgIG5hbWUgPSBpdGVtLm5hbWUsCiAgICAgICAgICAgIGtleSA9IGl0ZW0ua2V5LAogICAgICAgICAgICBpY29uID0gaXRlbS5pY29uLAogICAgICAgICAgICBvbkNsaWNrID0gaXRlbS5vbkNsaWNrLAogICAgICAgICAgICB0b29sVGlwVGl0bGUgPSBpdGVtLnRvb2xUaXBUaXRsZSwKICAgICAgICAgICAgdG9vbFRpcENvbnRlbnQgPSBpdGVtLnRvb2xUaXBDb250ZW50LAogICAgICAgICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKGl0ZW0sIFsicGFuZWwiLCAibmFtZSIsICJrZXkiLCAiaWNvbiIsICJvbkNsaWNrIiwgInRvb2xUaXBUaXRsZSIsICJ0b29sVGlwQ29udGVudCJdKTsKCiAgICAgICAgdmFyIG9uQ2xpY2tIYW5kbGVyID0gcGFuZWwgPyBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIGlmIChvbkNsaWNrICYmIGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LnBlcnNpc3QoKTsKICAgICAgICAgIH0gLy8gVGhpcyBjb21wb25lbnQgaXMgY29tbW9ubHkgd3JhcHBlZCBpbiBhIEV1aU91dHNpZGVDbGlja0RldGVjdG9yLCB3aGljaCBtZWFucyB3ZSdsbAogICAgICAgICAgLy8gbmVlZCB0byB3YWl0IGZvciB0aGF0IGxvZ2ljIHRvIGNvbXBsZXRlIGJlZm9yZSByZS1yZW5kZXJpbmcgdGhlIERPTSB2aWEgc2hvd1BhbmVsLgoKCiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKG9uQ2xpY2spIHsKICAgICAgICAgICAgICBvbkNsaWNrKGV2ZW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMyLnNob3dOZXh0UGFuZWwoaW5kZXgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSA6IG9uQ2xpY2s7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV1aUNvbnRleHRNZW51SXRlbSwgX2V4dGVuZHMoewogICAgICAgICAga2V5OiBrZXkgfHwgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUgOiB1bmRlZmluZWQpIHx8IGluZGV4LAogICAgICAgICAgaWNvbjogaWNvbiwKICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tIYW5kbGVyLAogICAgICAgICAgaGFzUGFuZWw6IEJvb2xlYW4ocGFuZWwpLAogICAgICAgICAgdG9vbFRpcFRpdGxlOiB0b29sVGlwVGl0bGUsCiAgICAgICAgICB0b29sVGlwQ29udGVudDogdG9vbFRpcENvbnRlbnQKICAgICAgICB9LCByZXN0KSwgbmFtZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlclBhbmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQYW5lbChwYW5lbElkLCB0cmFuc2l0aW9uVHlwZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBwYW5lbCA9IHRoaXMuc3RhdGUuaWRUb1BhbmVsTWFwW3BhbmVsSWRdOwoKICAgICAgaWYgKCFwYW5lbCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBBcyBhYm92ZSwgd2UgbmVlZCB0byB3YWl0IGZvciBFdWlPdXRzaWRlQ2xpY2tEZXRlY3RvciB0byBjb21wbGV0ZSBpdHMgbG9naWMgYmVmb3JlCiAgICAgIC8vIHJlLXJlbmRlcmluZyB2aWEgc2hvd1BhbmVsLgoKCiAgICAgIHZhciBvbkNsb3NlOwoKICAgICAgaWYgKHRoaXMuaGFzUHJldmlvdXNQYW5lbChwYW5lbElkKSkgewogICAgICAgIG9uQ2xvc2UgPSBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX3RoaXMzLnNob3dQcmV2aW91c1BhbmVsKTsKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXVpQ29udGV4dE1lbnVQYW5lbCwgewogICAgICAgIGtleTogcGFuZWxJZCwKICAgICAgICBzaXplOiB0aGlzLnByb3BzLnNpemUsCiAgICAgICAgY2xhc3NOYW1lOiAiZXVpQ29udGV4dE1lbnVfX3BhbmVsIiwKICAgICAgICBvbkhlaWdodENoYW5nZTogdHJhbnNpdGlvblR5cGUgPT09ICdpbicgPyB0aGlzLm9uSW5jb21pbmdQYW5lbEhlaWdodENoYW5nZSA6IHVuZGVmaW5lZCwKICAgICAgICBvblRyYW5zaXRpb25Db21wbGV0ZTogdHJhbnNpdGlvblR5cGUgPT09ICdvdXQnID8gdGhpcy5vbk91dEdvaW5nUGFuZWxUcmFuc2l0aW9uQ29tcGxldGUgOiB1bmRlZmluZWQsCiAgICAgICAgdGl0bGU6IHBhbmVsLnRpdGxlLAogICAgICAgIG9uQ2xvc2U6IG9uQ2xvc2UsCiAgICAgICAgdHJhbnNpdGlvblR5cGU6IHRoaXMuc3RhdGUuaXNPdXRnb2luZ1BhbmVsVmlzaWJsZSA/IHRyYW5zaXRpb25UeXBlIDogdW5kZWZpbmVkLAogICAgICAgIHRyYW5zaXRpb25EaXJlY3Rpb246IHRoaXMuc3RhdGUuaXNPdXRnb2luZ1BhbmVsVmlzaWJsZSA/IHRoaXMuc3RhdGUudHJhbnNpdGlvbkRpcmVjdGlvbiA6IHVuZGVmaW5lZCwKICAgICAgICBoYXNGb2N1czogdHJhbnNpdGlvblR5cGUgPT09ICdpbicsCiAgICAgICAgaXRlbXM6IHRoaXMuc3RhdGUuaWRUb1JlbmRlcmVkSXRlbXNNYXBbcGFuZWxJZF0sCiAgICAgICAgaW5pdGlhbEZvY3VzZWRJdGVtSW5kZXg6IHRoaXMuc3RhdGUuaXNVc2luZ0tleWJvYXJkVG9OYXZpZ2F0ZSA/IHRoaXMuc3RhdGUuZm9jdXNlZEl0ZW1JbmRleCA6IHBhbmVsLmluaXRpYWxGb2N1c2VkSXRlbUluZGV4LAogICAgICAgIG9uVXNlS2V5Ym9hcmRUb05hdmlnYXRlOiB0aGlzLm9uVXNlS2V5Ym9hcmRUb05hdmlnYXRlLAogICAgICAgIHNob3dOZXh0UGFuZWw6IHRoaXMuc2hvd05leHRQYW5lbCwKICAgICAgICBzaG93UHJldmlvdXNQYW5lbDogdGhpcy5zaG93UHJldmlvdXNQYW5lbAogICAgICB9LCBwYW5lbC5jb250ZW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIHBhbmVscyA9IF90aGlzJHByb3BzLnBhbmVscywKICAgICAgICAgIGNsYXNzTmFtZSA9IF90aGlzJHByb3BzLmNsYXNzTmFtZSwKICAgICAgICAgIGluaXRpYWxQYW5lbElkID0gX3RoaXMkcHJvcHMuaW5pdGlhbFBhbmVsSWQsCiAgICAgICAgICBzaXplID0gX3RoaXMkcHJvcHMuc2l6ZSwKICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3RoaXMkcHJvcHMsIFsicGFuZWxzIiwgImNsYXNzTmFtZSIsICJpbml0aWFsUGFuZWxJZCIsICJzaXplIl0pOwoKICAgICAgdmFyIGluY29taW5nUGFuZWwgPSB0aGlzLnJlbmRlclBhbmVsKHRoaXMuc3RhdGUuaW5jb21pbmdQYW5lbElkLCAnaW4nKTsKICAgICAgdmFyIG91dGdvaW5nUGFuZWw7CgogICAgICBpZiAodGhpcy5zdGF0ZS5pc091dGdvaW5nUGFuZWxWaXNpYmxlKSB7CiAgICAgICAgb3V0Z29pbmdQYW5lbCA9IHRoaXMucmVuZGVyUGFuZWwodGhpcy5zdGF0ZS5vdXRnb2luZ1BhbmVsSWQsICdvdXQnKTsKICAgICAgfQoKICAgICAgdmFyIHdpZHRoID0gdGhpcy5zdGF0ZS5pZFRvUGFuZWxNYXBbdGhpcy5zdGF0ZS5pbmNvbWluZ1BhbmVsSWRdICYmIHRoaXMuc3RhdGUuaWRUb1BhbmVsTWFwW3RoaXMuc3RhdGUuaW5jb21pbmdQYW5lbElkXS53aWR0aCA/IHRoaXMuc3RhdGUuaWRUb1BhbmVsTWFwW3RoaXMuc3RhdGUuaW5jb21pbmdQYW5lbElkXS53aWR0aCA6IHVuZGVmaW5lZDsKICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWVzKCdldWlDb250ZXh0TWVudScsIHNpemUgJiYgc2l6ZVRvQ2xhc3NOYW1lTWFwW3NpemVdLCBjbGFzc05hbWUpOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIF9leHRlbmRzKHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzZXMsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGhlaWdodDogdGhpcy5zdGF0ZS5oZWlnaHQsCiAgICAgICAgICB3aWR0aDogd2lkdGgKICAgICAgICB9CiAgICAgIH0sIHJlc3QpLCBvdXRnb2luZ1BhbmVsLCBpbmNvbWluZ1BhbmVsKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBFdWlDb250ZXh0TWVudTsKfShDb21wb25lbnQpOwoKX2RlZmluZVByb3BlcnR5KEV1aUNvbnRleHRNZW51LCAiZGVmYXVsdFByb3BzIiwgewogIHBhbmVsczogW10sCiAgc2l6ZTogJ20nCn0pOwoKRXVpQ29udGV4dE1lbnUucHJvcFR5cGVzID0gewogIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZywKICAiYXJpYS1sYWJlbCI6IFByb3BUeXBlcy5zdHJpbmcsCiAgImRhdGEtdGVzdC1zdWJqIjogUHJvcFR5cGVzLnN0cmluZywKICBwYW5lbHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zaGFwZSh7CiAgICBpZDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLCBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWRdKS5pc1JlcXVpcmVkLAogICAgdGl0bGU6IFByb3BUeXBlcy5ub2RlLAogICAgaXRlbXM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zaGFwZSh7CiAgICAgIG5hbWU6IFByb3BUeXBlcy5ub2RlLAogICAgICBrZXk6IFByb3BUeXBlcy5zdHJpbmcsCiAgICAgIHBhbmVsOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZF0pLAogICAgICBpc1NlcGFyYXRvcjogUHJvcFR5cGVzLm9uZU9mKFt0cnVlXSksCgogICAgICAvKioKICAgICAgICAgKiBEZWZpbmVzIHRoZSB3aWR0aCBvZiB0aGUgSFIuCiAgICAgICAgICovCiAgICAgIHNpemU6IFByb3BUeXBlcy5vbmVPZihbImZ1bGwiLCAiaGFsZiIsICJxdWFydGVyIl0pLAogICAgICBtYXJnaW46IFByb3BUeXBlcy5vbmVPZihbIm5vbmUiLCAieHMiLCAicyIsICJtIiwgImwiLCAieGwiLCAieHhsIl0pLAogICAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsCiAgICAgICJhcmlhLWxhYmVsIjogUHJvcFR5cGVzLnN0cmluZywKICAgICAgImRhdGEtdGVzdC1zdWJqIjogUHJvcFR5cGVzLnN0cmluZwogICAgfSkuaXNSZXF1aXJlZCksCiAgICBjb250ZW50OiBQcm9wVHlwZXMubm9kZSwKICAgIHdpZHRoOiBQcm9wVHlwZXMubnVtYmVyLAogICAgaW5pdGlhbEZvY3VzZWRJdGVtSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsCgogICAgLyoqCiAgICAgICAqIEFsdGVycyB0aGUgc2l6ZSBvZiB0aGUgaXRlbXMgYW5kIHRoZSB0aXRsZQogICAgICAgKi8KICAgIHNpemU6IFByb3BUeXBlcy5vbmVPZihbInMiLCAibSJdKQogIH0pLmlzUmVxdWlyZWQpLAogIGluaXRpYWxQYW5lbElkOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsIFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZF0pLAoKICAvKioKICAgICAgICogQWx0ZXJzIHRoZSBzaXplIG9mIHRoZSBpdGVtcyBhbmQgdGhlIHRpdGxlCiAgICAgICAqLwogIHNpemU6IFByb3BUeXBlcy5vbmVPZihbInMiLCAibSJdKQp9OwoKdHJ5IHsKICBFdWlDb250ZXh0TWVudS5fX2RvY2dlbkluZm8gPSB7CiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBkaXNwbGF5TmFtZTogJ0V1aUNvbnRleHRNZW51JywKICAgIG1ldGhvZHM6IFtdLAogICAgcHJvcHM6IHsKICAgICAgY2xhc3NOYW1lOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnY2xhc3NOYW1lJywKICAgICAgICBwYXJlbnQ6IHsKICAgICAgICAgIGZpbGVOYW1lOiAnZXVpL3NyYy9jb21wb25lbnRzL2NvbW1vbi50cycsCiAgICAgICAgICBuYW1lOiAnQ29tbW9uUHJvcHMnCiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdhcmlhLWxhYmVsJzogewogICAgICAgIGRlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgICBkZXNjcmlwdGlvbjogJ0RlZmluZXMgYSBzdHJpbmcgdmFsdWUgdGhhdCBsYWJlbHMgdGhlIGN1cnJlbnQgZWxlbWVudC5cbicgKyAnQHNlZSBhcmlhLWxhYmVsbGVkYnkuJywKICAgICAgICBuYW1lOiAnYXJpYS1sYWJlbCcsCiAgICAgICAgcGFyZW50OiB7CiAgICAgICAgICBmaWxlTmFtZTogJ2V1aS9zcmMvY29tcG9uZW50cy9jb21tb24udHMnLAogICAgICAgICAgbmFtZTogJ0NvbW1vblByb3BzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIG5hbWU6ICdzdHJpbmcnCiAgICAgICAgfQogICAgICB9LAogICAgICAnZGF0YS10ZXN0LXN1YmonOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnZGF0YS10ZXN0LXN1YmonLAogICAgICAgIHBhcmVudDogewogICAgICAgICAgZmlsZU5hbWU6ICdldWkvc3JjL2NvbXBvbmVudHMvY29tbW9uLnRzJywKICAgICAgICAgIG5hbWU6ICdDb21tb25Qcm9wcycKICAgICAgICB9LAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nJwogICAgICAgIH0KICAgICAgfSwKICAgICAgcGFuZWxzOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogJ1tdJwogICAgICAgIH0sCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG5hbWU6ICdwYW5lbHMnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnRXVpQ29udGV4dE1lbnVQYW5lbERlc2NyaXB0b3JbXScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluaXRpYWxQYW5lbElkOiB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBudWxsLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBuYW1lOiAnaW5pdGlhbFBhbmVsSWQnLAogICAgICAgIHBhcmVudDogdW5kZWZpbmVkLAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiB7CiAgICAgICAgICBuYW1lOiAnc3RyaW5nIHwgbnVtYmVyJwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2l6ZTogewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6ICdtJwogICAgICAgIH0sCiAgICAgICAgZGVzY3JpcHRpb246ICdBbHRlcnMgdGhlIHNpemUgb2YgdGhlIGl0ZW1zIGFuZCB0aGUgdGl0bGUnLAogICAgICAgIG5hbWU6ICdzaXplJywKICAgICAgICBwYXJlbnQ6IHVuZGVmaW5lZCwKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogewogICAgICAgICAgbmFtZTogJ2VudW0nLAogICAgICAgICAgcmF3OiAnInMiIHwgIm0iJywKICAgICAgICAgIHZhbHVlOiBbewogICAgICAgICAgICB2YWx1ZTogJyJzIicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgdmFsdWU6ICcibSInCiAgICAgICAgICB9XQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGV4dGVuZGVkSW50ZXJmYWNlczogWydDb21tb25Qcm9wcycsICdIVE1MQXR0cmlidXRlcycsICdBcmlhQXR0cmlidXRlcycsICdET01BdHRyaWJ1dGVzJ10KICB9Owp9IGNhdGNoIChlKSB7fQ=="},{"version":3,"sources":["D:/work/eui/src/components/context_menu/context_menu.tsx"],"names":["React","Component","classNames","keysOf","EuiContextMenuPanel","EuiContextMenuItem","EuiHorizontalRule","sizeToClassNameMap","s","m","SIZES","isItemSeparator","item","isSeparator","mapIdsToPanels","panels","map","forEach","panel","id","mapIdsToPreviousPanels","idToPreviousPanelIdMap","Array","isArray","items","isCloseable","undefined","mapPanelItemsToPanels","idAndItemIndexToPanelIdMap","index","EuiContextMenu","nextProps","prevState","prevProps","idToPanelMap","props","panelId","previousPanelId","state","itemIndex","nextPanelId","incomingPanelId","isUsingKeyboardToNavigate","setState","focusedItemIndex","initialFocusedItemIndex","showPanel","hasPreviousPanel","previousPanel","findIndex","height","prevHeight","isOutgoingPanelVisible","idToRenderedItemsMap","renderItems","mapIdsToRenderedItems","outgoingPanelId","initialPanelId","transitionDirection","direction","omit","key","rest","name","icon","onClick","toolTipTitle","toolTipContent","onClickHandler","event","persist","window","requestAnimationFrame","showNextPanel","Boolean","transitionType","onClose","showPreviousPanel","size","onIncomingPanelHeightChange","onOutGoingPanelTransitionComplete","title","onUseKeyboardToNavigate","content","className","incomingPanel","renderPanel","outgoingPanel","width","classes"],"mappings":"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","sourcesContent":["/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\nimport classNames from 'classnames';\nimport { keysOf } from '../common';\nimport { EuiContextMenuPanel } from './context_menu_panel';\nimport { EuiContextMenuItem } from './context_menu_item';\nimport { EuiHorizontalRule } from '../horizontal_rule';\nvar sizeToClassNameMap = {\n  s: 'euiContextMenu--small',\n  m: null\n};\nexport var SIZES = keysOf(sizeToClassNameMap);\n\nvar isItemSeparator = function isItemSeparator(item) {\n  return item.isSeparator === true;\n};\n\nfunction mapIdsToPanels(panels) {\n  var map = {};\n  panels.forEach(function (panel) {\n    map[panel.id] = panel;\n  });\n  return map;\n}\n\nfunction mapIdsToPreviousPanels(panels) {\n  var idToPreviousPanelIdMap = {};\n  panels.forEach(function (panel) {\n    if (Array.isArray(panel.items)) {\n      panel.items.forEach(function (item) {\n        if (isItemSeparator(item)) return;\n        var isCloseable = item.panel !== undefined;\n\n        if (isCloseable) {\n          idToPreviousPanelIdMap[item.panel] = panel.id;\n        }\n      });\n    }\n  });\n  return idToPreviousPanelIdMap;\n}\n\nfunction mapPanelItemsToPanels(panels) {\n  var idAndItemIndexToPanelIdMap = {};\n  panels.forEach(function (panel) {\n    idAndItemIndexToPanelIdMap[panel.id] = {};\n\n    if (panel.items) {\n      panel.items.forEach(function (item, index) {\n        if (isItemSeparator(item)) return;\n\n        if (item.panel) {\n          idAndItemIndexToPanelIdMap[panel.id][index] = item.panel;\n        }\n      });\n    }\n  });\n  return idAndItemIndexToPanelIdMap;\n}\n\nexport class EuiContextMenu extends Component {\n  static defaultProps = {\n    panels: [],\n    size: 'm'\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const {\n      panels\n    } = nextProps;\n\n    if (panels && prevState.prevProps.panels !== panels) {\n      return {\n        prevProps: {\n          panels\n        },\n        idToPanelMap: mapIdsToPanels(panels),\n        idToPreviousPanelIdMap: mapIdsToPreviousPanels(panels),\n        idAndItemIndexToPanelIdMap: mapPanelItemsToPanels(panels)\n      };\n    }\n\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      prevProps: {},\n      idToPanelMap: {},\n      idToPreviousPanelIdMap: {},\n      idAndItemIndexToPanelIdMap: {},\n      idToRenderedItemsMap: this.mapIdsToRenderedItems(this.props.panels),\n      height: undefined,\n      outgoingPanelId: undefined,\n      incomingPanelId: props.initialPanelId,\n      transitionDirection: undefined,\n      isOutgoingPanelVisible: false,\n      focusedItemIndex: undefined,\n      isUsingKeyboardToNavigate: false\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.panels !== this.props.panels) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({\n        idToRenderedItemsMap: this.mapIdsToRenderedItems(this.props.panels)\n      });\n    }\n  }\n\n  hasPreviousPanel = panelId => {\n    const previousPanelId = this.state.idToPreviousPanelIdMap[panelId];\n    return typeof previousPanelId !== 'undefined';\n  };\n\n  showPanel(panelId, direction) {\n    this.setState({\n      outgoingPanelId: this.state.incomingPanelId,\n      incomingPanelId: panelId,\n      transitionDirection: direction,\n      isOutgoingPanelVisible: true\n    });\n  }\n\n  showNextPanel = itemIndex => {\n    if (itemIndex == null) {\n      return;\n    }\n\n    const nextPanelId = this.state.idAndItemIndexToPanelIdMap[this.state.incomingPanelId][itemIndex];\n\n    if (nextPanelId) {\n      if (this.state.isUsingKeyboardToNavigate) {\n        this.setState(({\n          idToPanelMap\n        }) => ({\n          focusedItemIndex: idToPanelMap[nextPanelId].initialFocusedItemIndex ?? 0\n        }));\n      }\n\n      this.showPanel(nextPanelId, 'next');\n    }\n  };\n  showPreviousPanel = () => {\n    // If there's a previous panel, then we can close the current panel to go back to it.\n    if (this.hasPreviousPanel(this.state.incomingPanelId)) {\n      const previousPanelId = this.state.idToPreviousPanelIdMap[this.state.incomingPanelId]; // Set focus on the item which shows the panel we're leaving.\n\n      const previousPanel = this.state.idToPanelMap[previousPanelId];\n      const focusedItemIndex = previousPanel.items.findIndex(item => !isItemSeparator(item) && item.panel === this.state.incomingPanelId);\n\n      if (focusedItemIndex !== -1) {\n        this.setState({\n          focusedItemIndex\n        });\n      }\n\n      this.showPanel(previousPanelId, 'previous');\n    }\n  };\n  onIncomingPanelHeightChange = height => {\n    this.setState(({\n      height: prevHeight\n    }) => {\n      if (height === prevHeight) {\n        return null;\n      }\n\n      return {\n        height\n      };\n    });\n  };\n  onOutGoingPanelTransitionComplete = () => {\n    this.setState({\n      isOutgoingPanelVisible: false\n    });\n  };\n  onUseKeyboardToNavigate = () => {\n    if (!this.state.isUsingKeyboardToNavigate) {\n      this.setState({\n        isUsingKeyboardToNavigate: true\n      });\n    }\n  };\n  mapIdsToRenderedItems = (panels = []) => {\n    const idToRenderedItemsMap = {}; // Pre-rendering the items lets us check reference equality inside of EuiContextMenuPanel.\n\n    panels.forEach(panel => {\n      idToRenderedItemsMap[panel.id] = this.renderItems(panel.items);\n    });\n    return idToRenderedItemsMap;\n  };\n\n  renderItems(items = []) {\n    return items.map((item, index) => {\n      if (isItemSeparator(item)) {\n        const {\n          isSeparator: omit,\n          key = index,\n          ...rest\n        } = item;\n        return <EuiHorizontalRule key={key} margin=\"none\" {...rest} />;\n      }\n\n      const {\n        panel,\n        name,\n        key,\n        icon,\n        onClick,\n        toolTipTitle,\n        toolTipContent,\n        ...rest\n      } = item;\n      const onClickHandler = panel ? event => {\n        if (onClick && event) {\n          event.persist();\n        } // This component is commonly wrapped in a EuiOutsideClickDetector, which means we'll\n        // need to wait for that logic to complete before re-rendering the DOM via showPanel.\n\n\n        window.requestAnimationFrame(() => {\n          if (onClick) {\n            onClick(event);\n          }\n\n          this.showNextPanel(index);\n        });\n      } : onClick;\n      return <EuiContextMenuItem key={key || (typeof name === 'string' ? name : undefined) || index} icon={icon} onClick={onClickHandler} hasPanel={Boolean(panel)} toolTipTitle={toolTipTitle} toolTipContent={toolTipContent} {...rest}>\n          {name}\n        </EuiContextMenuItem>;\n    });\n  }\n\n  renderPanel(panelId, transitionType) {\n    const panel = this.state.idToPanelMap[panelId];\n\n    if (!panel) {\n      return;\n    } // As above, we need to wait for EuiOutsideClickDetector to complete its logic before\n    // re-rendering via showPanel.\n\n\n    let onClose;\n\n    if (this.hasPreviousPanel(panelId)) {\n      onClose = () => window.requestAnimationFrame(this.showPreviousPanel);\n    }\n\n    return <EuiContextMenuPanel key={panelId} size={this.props.size} className=\"euiContextMenu__panel\" onHeightChange={transitionType === 'in' ? this.onIncomingPanelHeightChange : undefined} onTransitionComplete={transitionType === 'out' ? this.onOutGoingPanelTransitionComplete : undefined} title={panel.title} onClose={onClose} transitionType={this.state.isOutgoingPanelVisible ? transitionType : undefined} transitionDirection={this.state.isOutgoingPanelVisible ? this.state.transitionDirection : undefined} hasFocus={transitionType === 'in'} items={this.state.idToRenderedItemsMap[panelId]} initialFocusedItemIndex={this.state.isUsingKeyboardToNavigate ? this.state.focusedItemIndex : panel.initialFocusedItemIndex} onUseKeyboardToNavigate={this.onUseKeyboardToNavigate} showNextPanel={this.showNextPanel} showPreviousPanel={this.showPreviousPanel}>\n        {panel.content}\n      </EuiContextMenuPanel>;\n  }\n\n  render() {\n    const {\n      panels,\n      className,\n      initialPanelId,\n      size,\n      ...rest\n    } = this.props;\n    const incomingPanel = this.renderPanel(this.state.incomingPanelId, 'in');\n    let outgoingPanel;\n\n    if (this.state.isOutgoingPanelVisible) {\n      outgoingPanel = this.renderPanel(this.state.outgoingPanelId, 'out');\n    }\n\n    const width = this.state.idToPanelMap[this.state.incomingPanelId] && this.state.idToPanelMap[this.state.incomingPanelId].width ? this.state.idToPanelMap[this.state.incomingPanelId].width : undefined;\n    const classes = classNames('euiContextMenu', size && sizeToClassNameMap[size], className);\n    return <div className={classes} style={{\n      height: this.state.height,\n      width: width\n    }} {...rest}>\n        {outgoingPanel}\n        {incomingPanel}\n      </div>;\n  }\n\n}\nEuiContextMenu.propTypes = {\n  className: PropTypes.string,\n  \"aria-label\": PropTypes.string,\n  \"data-test-subj\": PropTypes.string,\n  panels: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.number.isRequired]).isRequired,\n    title: PropTypes.node,\n    items: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.node,\n      key: PropTypes.string,\n      panel: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.number.isRequired]),\n      isSeparator: PropTypes.oneOf([true]),\n\n      /**\n         * Defines the width of the HR.\n         */\n      size: PropTypes.oneOf([\"full\", \"half\", \"quarter\"]),\n      margin: PropTypes.oneOf([\"none\", \"xs\", \"s\", \"m\", \"l\", \"xl\", \"xxl\"]),\n      className: PropTypes.string,\n      \"aria-label\": PropTypes.string,\n      \"data-test-subj\": PropTypes.string\n    }).isRequired),\n    content: PropTypes.node,\n    width: PropTypes.number,\n    initialFocusedItemIndex: PropTypes.number,\n\n    /**\n       * Alters the size of the items and the title\n       */\n    size: PropTypes.oneOf([\"s\", \"m\"])\n  }).isRequired),\n  initialPanelId: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.number.isRequired]),\n\n  /**\n       * Alters the size of the items and the title\n       */\n  size: PropTypes.oneOf([\"s\", \"m\"])\n};\n\ntry {\n  EuiContextMenu.__docgenInfo = {\n    description: '',\n    displayName: 'EuiContextMenu',\n    methods: [],\n    props: {\n      className: {\n        defaultValue: null,\n        description: '',\n        name: 'className',\n        parent: {\n          fileName: 'eui/src/components/common.ts',\n          name: 'CommonProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      'aria-label': {\n        defaultValue: null,\n        description: 'Defines a string value that labels the current element.\\n' + '@see aria-labelledby.',\n        name: 'aria-label',\n        parent: {\n          fileName: 'eui/src/components/common.ts',\n          name: 'CommonProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      'data-test-subj': {\n        defaultValue: null,\n        description: '',\n        name: 'data-test-subj',\n        parent: {\n          fileName: 'eui/src/components/common.ts',\n          name: 'CommonProps'\n        },\n        required: false,\n        type: {\n          name: 'string'\n        }\n      },\n      panels: {\n        defaultValue: {\n          value: '[]'\n        },\n        description: '',\n        name: 'panels',\n        parent: undefined,\n        required: false,\n        type: {\n          name: 'EuiContextMenuPanelDescriptor[]'\n        }\n      },\n      initialPanelId: {\n        defaultValue: null,\n        description: '',\n        name: 'initialPanelId',\n        parent: undefined,\n        required: false,\n        type: {\n          name: 'string | number'\n        }\n      },\n      size: {\n        defaultValue: {\n          value: 'm'\n        },\n        description: 'Alters the size of the items and the title',\n        name: 'size',\n        parent: undefined,\n        required: false,\n        type: {\n          name: 'enum',\n          raw: '\"s\" | \"m\"',\n          value: [{\n            value: '\"s\"'\n          }, {\n            value: '\"m\"'\n          }]\n        }\n      }\n    },\n    extendedInterfaces: ['CommonProps', 'HTMLAttributes', 'AriaAttributes', 'DOMAttributes']\n  };\n} catch (e) {}"]}]}